!function(e,t){"use strict";function r(){}var n=Object.create(r.prototype,{version:{value:"2.0.9"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,2}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},"in":{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:r.prototype},extend:{value:function(e,t){for(var r in e)("undefined"==typeof n.prototype[r]||t===!0)&&(n.prototype[r]=e[r])}}});"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),"undefined"==typeof Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return 180*this/Math.PI}),n.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:t,latitude:e.length>=2?1:t,elevation:e.length>=3?2:t};var r=function(t){var r;return t.every(function(t){return"object"!=typeof e?!0:e.hasOwnProperty(t)?function(){return r=t,!1}():!0}),r},n=r(["lng","lon","longitude"]),a=r(["lat","latitude"]),i=r(["alt","altitude","elevation","elev"]);return"undefined"==typeof a&&"undefined"==typeof n&&"undefined"==typeof i?t:{latitude:a,longitude:n,elevation:i}},getLat:function(e,t){return t===!0?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return t===!0?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var r={latitude:t===!0?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:t===!0?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},n=e[this.getKeys(e).elevation];return"undefined"!=typeof n&&(r.elevation=n),r},validate:function(e){var t=this.getKeys(e);if("undefined"==typeof t||"undefined"==typeof t.latitude||"undefined"===t.longitude)return!1;var r=e[t.latitude],n=e[t.longitude];return"undefined"==typeof r||!this.isDecimal(r)&&!this.isSexagesimal(r)?!1:"undefined"==typeof n||!this.isDecimal(n)&&!this.isSexagesimal(n)?!1:(r=this.useDecimal(r),n=this.useDecimal(n),r<this.minLat||r>this.maxLat||n<this.minLon||n>this.maxLon?!1:!0)},getDistance:function(e,t,r){r=Math.floor(r)||1;var a,i,o,s,l,u,c,f=this.coords(e),d=this.coords(t),p=6378137,g=6356752.314245,h=1/298.257223563,v=(d.longitude-f.longitude).toRad(),m=Math.atan((1-h)*Math.tan(parseFloat(f.latitude).toRad())),y=Math.atan((1-h)*Math.tan(parseFloat(d.latitude).toRad())),b=Math.sin(m),L=Math.cos(m),$=Math.sin(y),w=Math.cos(y),k=v,A=100;do{var C=Math.sin(k),S=Math.cos(k);if(u=Math.sqrt(w*C*w*C+(L*$-b*w*S)*(L*$-b*w*S)),0===u)return n.distance=0;a=b*$+L*w*S,i=Math.atan2(u,a),o=L*w*C/u,s=1-o*o,l=a-2*b*$/s,isNaN(l)&&(l=0);var x=h/16*s*(4+h*(4-3*s));c=k,k=v+(1-x)*h*o*(i+x*u*(l+x*a*(-1+2*l*l)))}while(Math.abs(k-c)>1e-12&&--A>0);if(0===A)return 0/0;var P=s*(p*p-g*g)/(g*g),D=1+P/16384*(4096+P*(-768+P*(320-175*P))),M=P/1024*(256+P*(-128+P*(74-47*P))),E=M*u*(l+M/4*(a*(-1+2*l*l)-M/6*l*(-3+4*u*u)*(-3+4*l*l))),O=g*D*(i-E);if(O=O.toFixed(3),"undefined"!=typeof this.elevation(e)&&"undefined"!=typeof this.elevation(t)){var T=Math.abs(this.elevation(e)-this.elevation(t));O=Math.sqrt(O*O+T*T)}return this.distance=Math.floor(Math.round(O/r)*r)},getDistanceSimple:function(e,t,r){r=Math.floor(r)||1;var a=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return n.distance=Math.floor(Math.round(a/r)*r)},getCenter:function(e){if(!e.length)return!1;var t,r,n=function(e){return Math.max.apply(Math,e)},a=function(e){return Math.min.apply(Math,e)},i={latitude:[],longitude:[]};for(var o in e)i.latitude.push(this.latitude(e[o])),i.longitude.push(this.longitude(e[o]));var s=a(i.latitude),l=a(i.longitude),u=n(i.latitude),c=n(i.longitude);t=((s+u)/2).toFixed(6),r=((l+c)/2).toFixed(6);var f=this.convertUnit("km",this.getDistance({latitude:s,longitude:l},{latitude:u,longitude:c}));return{latitude:t,longitude:r,distance:f}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),r={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};"undefined"!=typeof t&&(r.maxElev=0,r.minElev=1/0);for(var n=0,a=e.length;a>n;++n)r.maxLat=Math.max(this.latitude(e[n]),r.maxLat),r.minLat=Math.min(this.latitude(e[n]),r.minLat),r.maxLng=Math.max(this.longitude(e[n]),r.maxLng),r.minLng=Math.min(this.longitude(e[n]),r.minLng),t&&(r.maxElev=Math.max(this.elevation(e[n]),r.maxElev),r.minElev=Math.min(this.elevation(e[n]),r.minElev));return r},getBoundsOfDistance:function(e,t){var r,n,a=this.latitude(e),i=this.longitude(e),o=a.toRad(),s=i.toRad(),l=t/this.radius,u=o-l,c=o+l,f=this.maxLat.toRad(),d=this.minLat.toRad(),p=this.maxLon.toRad(),g=this.minLon.toRad();if(u>d&&f>c){var h=Math.asin(Math.sin(l)/Math.cos(o));r=s-h,g>r&&(r+=2*Math.PI),n=s+h,n>p&&(n-=2*Math.PI)}else u=Math.max(u,d),c=Math.min(c,f),r=g,n=p;return[{latitude:u.toDeg(),longitude:r.toDeg()},{latitude:c.toDeg(),longitude:n.toDeg()}]},isPointInside:function(e,t){for(var r=!1,n=-1,a=t.length,i=a-1;++n<a;i=n)(this.longitude(t[n])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[i])||this.longitude(t[i])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[n]))&&this.latitude(e)<(this.latitude(t[i])-this.latitude(t[n]))*(this.longitude(e)-this.longitude(t[n]))/(this.longitude(t[i])-this.longitude(t[n]))+this.latitude(t[n])&&(r=!r);return r},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,r){return this.getDistance(e,t)<r},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var r=this.longitude(t).toRad()-this.longitude(e).toRad(),n=Math.log(Math.tan(this.latitude(t).toRad()/2+Math.PI/4)/Math.tan(this.latitude(e).toRad()/2+Math.PI/4));return Math.abs(r)>Math.PI&&(r=r>0?-1*(2*Math.PI-r):2*Math.PI+r),(Math.atan2(r,n).toDeg()+360)%360},getBearing:function(e,t){t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e);var r=(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360;return r},getCompassDirection:function(e,t,r){var n,a;switch(a="circle"==r?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(a/22.5)){case 1:n={exact:"NNE",rough:"N"};break;case 2:n={exact:"NE",rough:"N"};break;case 3:n={exact:"ENE",rough:"E"};break;case 4:n={exact:"E",rough:"E"};break;case 5:n={exact:"ESE",rough:"E"};break;case 6:n={exact:"SE",rough:"E"};break;case 7:n={exact:"SSE",rough:"S"};break;case 8:n={exact:"S",rough:"S"};break;case 9:n={exact:"SSW",rough:"S"};break;case 10:n={exact:"SW",rough:"S"};break;case 11:n={exact:"WSW",rough:"W"};break;case 12:n={exact:"W",rough:"W"};break;case 13:n={exact:"WNW",rough:"W"};break;case 14:n={exact:"NW",rough:"W"};break;case 15:n={exact:"NNW",rough:"N"};break;default:n={exact:"N",rough:"N"}}return n.bearing=a,n},getDirection:function(){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){var r=[];for(var n in t){var a=this.getDistance(e,t[n]);r.push({key:n,latitude:this.latitude(t[n]),longitude:this.longitude(t[n]),distance:a})}return r.sort(function(e,t){return e.distance-t.distance})},findNearest:function(e,t,r,n){r=r||0,n=n||1;var a=this.orderByDistance(e,t);return 1===n?a[r]:a.splice(r,n)},getPathLength:function(e){for(var t,r=0,n=0,a=e.length;a>n;++n)t&&(r+=this.getDistance(this.coords(e[n]),t)),t=this.coords(e[n]);return r},getSpeed:function(e,t,r){var a=r&&r.unit||"km";"mph"==a?a="mi":"kmh"==a&&(a="km");var i=n.getDistance(e,t),o=1*t.time/1e3-1*e.time/1e3,s=i/o*3600,l=Math.round(s*this.measures[a]*1e4)/1e4;return l},convertUnit:function(e,t,r){if(0===t||"undefined"==typeof t){if(0===this.distance)return 0;t=this.distance}if(e=e||"m",r=null==r?4:r,"undefined"!=typeof this.measures[e])return this.round(t*this.measures[e],r);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map(function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var r in e)e[r]=t.useDecimal(e[r]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e})}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var r in e)e[r]=this.useDecimal(e[r]);return e}if(this.isDecimal(e))return parseFloat(e);if(this.isSexagesimal(e)===!0)return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),r=Math.abs(t[0]),n=60*("0."+t[1]),a=n.toString().split(".");return n=Math.floor(n),a=(60*("0."+a[1])).toFixed(2),this.sexagesimal[e]=r+"° "+n+"' "+a+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern),r=t.exec(e),n=0,a=0;r&&(n=parseFloat(r[2]/60),a=parseFloat(r[4]/3600)||0);var i=(parseFloat(r[1])+n+a).toFixed(8);return i=parseFloat("S"==r[7]||"W"==r[7]?-i:i),this.decimal[e]=i,i},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}}),"undefined"!=typeof module&&"undefined"!=typeof module.exports?e.geolib=module.exports=n:"function"==typeof define&&define.amd?define("geolib",[],function(){return n}):e.geolib=n}(this),function(e,t,r){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(e,r,n){n=n.ngAnimateChildren,t.isString(n)&&0===n.length?r.data("$$ngAnimateChildren",!0):e.$watch(n,function(e){r.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){return function(t){return e(function(){t()})}}]).config(["$provide","$animateProvider",function(n,a){function i(e){for(var t=0;t<e.length;t++){var r=e[t];if(1==r.nodeType)return r}}function o(e,t){return i(e)==i(t)}var s,l=t.noop,u=t.forEach,c=a.$$selectors,f=t.isArray,d=t.isString,p=t.isObject,g={running:!0};n.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,r,n,h,v,m,y,b,L,$){function w(e,t){var r=e.data("$$ngAnimateState")||{};return t&&(r.running=!0,r.structural=!0,e.data("$$ngAnimateState",r)),r.disabled||r.running&&r.structural}function k(e){var t,n=r.defer();return n.promise.$$cancelFn=function(){t&&t()},y.$$postDigest(function(){t=e(function(){n.resolve()})}),n.promise}function A(e){return p(e)?(e.tempClasses&&d(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e):void 0}function C(e,t,r){r=r||{};var n={};u(r,function(e,t){u(t.split(" "),function(t){n[t]=e})});var a=Object.create(null);u((e.attr("class")||"").split(/\s+/),function(e){a[e]=!0});var i=[],o=[];return u(t&&t.classes||[],function(e,t){var r=a[t],s=n[t]||{};!1===e?(r||"addClass"==s.event)&&o.push(t):!0===e&&(r&&"removeClass"!=s.event||i.push(t))}),0<i.length+o.length&&[i.join(" "),o.join(" ")]}function S(e){if(e){var t=[],r={};e=e.substr(1).split("."),(h.transitions||h.animations)&&t.push(n.get(c[""]));for(var a=0;a<e.length;a++){var i=e[a],o=c[i];o&&!r[i]&&(t.push(n.get(o)),r[i]=!0)}return t}}function x(e,r,n,a){function i(e,t){var r=e[t],n=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return r||n?("leave"==t&&(n=r,r=null),$.push({event:t,fn:r}),y.push({event:t,fn:n}),!0):void 0}function o(t,r,i){var o=[];u(t,function(e){e.fn&&o.push(e)});var s=0;u(o,function(t,u){var f=function(){e:{if(r){if((r[u]||l)(),++s<o.length)break e;r=null}i()}};switch(t.event){case"setClass":r.push(t.fn(e,c,d,f,a));break;case"animate":r.push(t.fn(e,n,a.from,a.to,f));break;case"addClass":r.push(t.fn(e,c||n,f,a));break;case"removeClass":r.push(t.fn(e,d||n,f,a));break;default:r.push(t.fn(e,f,a))}}),r&&0===r.length&&i()}var s=e[0];if(s){a&&(a.to=a.to||{},a.from=a.from||{});var c,d;f(n)&&(c=n[0],d=n[1],c?d?n=c+" "+d:(n=c,r="addClass"):(n=d,r="removeClass"));var p="setClass"==r,g=p||"addClass"==r||"removeClass"==r||"animate"==r,h=e.attr("class")+" "+n;if(j(h)){var v=l,m=[],y=[],b=l,L=[],$=[],h=(" "+h).replace(/\s+/g,".");return u(S(h),function(e){!i(e,r)&&p&&(i(e,"addClass"),i(e,"removeClass"))}),{node:s,event:r,className:n,isClassBased:g,isSetClassOperation:p,applyStyles:function(){a&&e.css(t.extend(a.from||{},a.to||{}))},before:function(e){v=e,o(y,m,function(){v=l,e()})},after:function(e){b=e,o($,L,function(){b=l,e()})},cancel:function(){m&&(u(m,function(e){(e||l)(!0)}),v(!0)),L&&(u(L,function(e){(e||l)(!0)}),b(!0))}}}}}function P(e,r,n,a,i,o,c,f){function d(t){var a="$animate:"+t;b&&b[a]&&0<b[a].length&&m(function(){n.triggerHandler(a,{event:e,className:r})})}function p(){d("before")}function g(){d("after")}function h(){h.hasBeenRun||(h.hasBeenRun=!0,o())}function v(){if(!v.hasBeenRun){y&&y.applyStyles(),v.hasBeenRun=!0,c&&c.tempClasses&&u(c.tempClasses,function(e){s.removeClass(n,e)});var t=n.data("$$ngAnimateState");t&&(y&&y.isClassBased?M(n,r):(m(function(){var t=n.data("$$ngAnimateState")||{};A==t.index&&M(n,r,e)}),n.data("$$ngAnimateState",t))),d("close"),f()}}var y=x(n,e,r,c);if(!y)return h(),p(),g(),v(),l;e=y.event,r=y.className;var b=t.element._data(y.node),b=b&&b.events;if(a||(a=i?i.parent():n.parent()),E(n,a))return h(),p(),g(),v(),l;a=n.data("$$ngAnimateState")||{};var L=a.active||{},$=a.totalActive||0,w=a.last;if(i=!1,$>0){if($=[],y.isClassBased)"setClass"==w.event?($.push(w),M(n,r)):L[r]&&(k=L[r],k.event==e?i=!0:($.push(k),M(n,r)));else if("leave"==e&&L["ng-leave"])i=!0;else{for(var k in L)$.push(L[k]);a={},M(n,!0)}0<$.length&&u($,function(e){e.cancel()})}if(!y.isClassBased||y.isSetClassOperation||"animate"==e||i||(i="addClass"==e==n.hasClass(r)),i)return h(),p(),g(),d("close"),f(),l;L=a.active||{},$=a.totalActive||0,"leave"==e&&n.one("$destroy",function(e){e=t.element(this);var r=e.data("$$ngAnimateState");r&&(r=r.active["ng-leave"])&&(r.cancel(),M(e,"ng-leave"))}),s.addClass(n,"ng-animate"),c&&c.tempClasses&&u(c.tempClasses,function(e){s.addClass(n,e)});var A=T++;return $++,L[r]=y,n.data("$$ngAnimateState",{last:y,active:L,index:A,totalActive:$}),p(),y.before(function(t){var a=n.data("$$ngAnimateState");t=t||!a||!a.active[r]||y.isClassBased&&a.active[r].event!=e,h(),!0===t?v():(g(),y.after(v))}),y.cancel}function D(e){(e=i(e))&&(e=t.isFunction(e.getElementsByClassName)?e.getElementsByClassName("ng-animate"):e.querySelectorAll(".ng-animate"),u(e,function(e){e=t.element(e),(e=e.data("$$ngAnimateState"))&&e.active&&u(e.active,function(e){e.cancel()})}))}function M(e,t){if(o(e,v))g.disabled||(g.running=!1,g.structural=!1);else if(t){var r=e.data("$$ngAnimateState")||{},n=!0===t;!n&&r.active&&r.active[t]&&(r.totalActive--,delete r.active[t]),(n||!r.totalActive)&&(s.removeClass(e,"ng-animate"),e.removeData("$$ngAnimateState"))}}function E(e,r){if(g.disabled)return!0;if(o(e,v))return g.running;var n,a,i;do{if(0===r.length)break;var s=o(r,v),l=s?g:r.data("$$ngAnimateState")||{};if(l.disabled)return!0;s&&(i=!0),!1!==n&&(s=r.data("$$ngAnimateChildren"),t.isDefined(s)&&(n=s)),a=a||l.running||l.last&&!l.last.isClassBased}while(r=r.parent());return!i||!n&&a}s=$,v.data("$$ngAnimateState",g);var O=y.$watch(function(){return L.totalPendingRequests},function(e,t){0===e&&(O(),y.$$postDigest(function(){y.$$postDigest(function(){g.running=!1})}))}),T=0,H=a.classNameFilter(),j=H?function(e){return H.test(e)}:function(){return!0};return{animate:function(e,r,n,a,o){return a=a||"ng-inline-animate",o=A(o)||{},o.from=n?r:null,o.to=n?n:r,k(function(r){return P("animate",a,t.element(i(e)),null,null,l,o,r)})},enter:function(r,n,a,o){return o=A(o),r=t.element(r),n=n&&t.element(n),a=a&&t.element(a),w(r,!0),e.enter(r,n,a),k(function(e){return P("enter","ng-enter",t.element(i(r)),n,a,l,o,e)})},leave:function(r,n){return n=A(n),r=t.element(r),D(r),w(r,!0),k(function(a){return P("leave","ng-leave",t.element(i(r)),null,null,function(){e.leave(r)},n,a)})},move:function(r,n,a,o){return o=A(o),r=t.element(r),n=n&&t.element(n),a=a&&t.element(a),D(r),w(r,!0),e.move(r,n,a),k(function(e){return P("move","ng-move",t.element(i(r)),n,a,l,o,e)})},addClass:function(e,t,r){return this.setClass(e,t,[],r)},removeClass:function(e,t,r){return this.setClass(e,[],t,r)},setClass:function(r,n,a,o){if(o=A(o),r=t.element(r),r=t.element(i(r)),w(r))return e.$$setClassImmediately(r,n,a,o);var s,l=r.data("$$animateClasses"),c=!!l;return l||(l={classes:{}}),s=l.classes,n=f(n)?n:n.split(" "),u(n,function(e){e&&e.length&&(s[e]=!0)}),a=f(a)?a:a.split(" "),u(a,function(e){e&&e.length&&(s[e]=!1)}),c?(o&&l.options&&(l.options=t.extend(l.options||{},o)),l.promise):(r.data("$$animateClasses",l={classes:s,options:o}),l.promise=k(function(t){var n=r.parent(),a=i(r),o=a.parentNode;if(o&&!o.$$NG_REMOVED&&!a.$$NG_REMOVED){a=r.data("$$animateClasses"),r.removeData("$$animateClasses");var o=r.data("$$ngAnimateState")||{},s=C(r,a,o.active);return s?P("setClass",s,r,n,null,function(){s[0]&&e.$$addClassImmediately(r,s[0]),s[1]&&e.$$removeClassImmediately(r,s[1])},a.options,t):t()}t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)M(t);else{var r=t.data("$$ngAnimateState")||{};r.disabled=!0,t.data("$$ngAnimateState",r)}break;case 1:g.disabled=!e;break;default:e=!g.disabled}return!!e}}}]),a.register("",["$window","$sniffer","$timeout","$$animateReflow",function(n,a,o,c){function p(){O||(O=c(function(){j=[],O=null,T={}}))}function g(e,t){O&&O(),j.push(t),O=c(function(){u(j,function(e){e()}),j=[],O=null,T={}})}function h(e,r){var n=i(e);e=t.element(n),B.push(e),n=Date.now()+r,I>=n||(o.cancel(N),I=n,N=o(function(){v(B),B=[]},r,!1))}function v(e){u(e,function(e){(e=e.data("$$ngAnimateCSS3Data"))&&u(e.closeAnimationFns,function(e){e()})})}function m(e,t){var r=t?T[t]:null;if(!r){var a=0,i=0,o=0,s=0;u(e,function(e){if(1==e.nodeType){e=n.getComputedStyle(e)||{},a=Math.max(y(e[x+"Duration"]),a),i=Math.max(y(e[x+"Delay"]),i),s=Math.max(y(e[D+"Delay"]),s);var t=y(e[D+"Duration"]);t>0&&(t*=parseInt(e[D+"IterationCount"],10)||1),o=Math.max(t,o)}}),r={total:0,transitionDelay:i,transitionDuration:a,animationDelay:s,animationDuration:o},t&&(T[t]=r)}return r}function y(e){var t=0;return e=d(e)?e.split(/\s*,\s*/):[],u(e,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function b(e,t,r,n){e=0<=["ng-enter","ng-leave","ng-move"].indexOf(r);var a,o=t.parent(),l=o.data("$$ngAnimateKey");l||(o.data("$$ngAnimateKey",++H),l=H),a=l+"-"+i(t).getAttribute("class");var o=a+" "+r,l=T[o]?++T[o].total:0,u={};if(l>0){var c=r+"-stagger",u=a+" "+c;(a=!T[u])&&s.addClass(t,c),u=m(t,u),a&&s.removeClass(t,c)}s.addClass(t,r);var c=t.data("$$ngAnimateCSS3Data")||{},f=m(t,o);return a=f.transitionDuration,f=f.animationDuration,e&&0===a&&0===f?(s.removeClass(t,r),!1):(r=n||e&&a>0,e=f>0&&0<u.animationDelay&&0===u.animationDuration,t.data("$$ngAnimateCSS3Data",{stagger:u,cacheKey:o,running:c.running||0,itemIndex:l,blockTransition:r,closeAnimationFns:c.closeAnimationFns||[]}),o=i(t),r&&($(o,!0),n&&t.css(n)),e&&(o.style[D+"PlayState"]="paused"),!0)}function L(e,t,r,n,a){function l(){t.off(O,c),s.removeClass(t,d),s.removeClass(t,p),S&&o.cancel(S),C(t,r);var e,n=i(t);for(e in g)n.style.removeProperty(g[e])}function c(e){e.stopPropagation();var t=e.originalEvent||e;e=t.$manualTimeStamp||t.timeStamp||Date.now(),t=parseFloat(t.elapsedTime.toFixed(3)),Math.max(e-x,0)>=A&&t>=k&&n()}var f=i(t);if(e=t.data("$$ngAnimateCSS3Data"),-1!=f.getAttribute("class").indexOf(r)&&e){var d="",p="";u(r.split(" "),function(e,t){var r=(t>0?" ":"")+e;d+=r+"-active",p+=r+"-pending"});var g=[],v=e.itemIndex,y=e.stagger,b=0;if(v>0){b=0,0<y.transitionDelay&&0===y.transitionDuration&&(b=y.transitionDelay*v);var L=0;0<y.animationDelay&&0===y.animationDuration&&(L=y.animationDelay*v,g.push(E+"animation-play-state")),b=Math.round(100*Math.max(b,L))/100}b||(s.addClass(t,d),e.blockTransition&&$(f,!1));var w=m(t,e.cacheKey+" "+d),k=Math.max(w.transitionDuration,w.animationDuration);if(0!==k){!b&&a&&0<Object.keys(a).length&&(w.transitionDuration||(t.css("transition",w.animationDuration+"s linear all"),g.push("transition")),t.css(a));var v=Math.max(w.transitionDelay,w.animationDelay),A=1e3*v;0<g.length&&(y=f.getAttribute("style")||"",";"!==y.charAt(y.length-1)&&(y+=";"),f.setAttribute("style",y+" "));var S,x=Date.now(),O=M+" "+P,v=1e3*(b+1.5*(v+k));return b>0&&(s.addClass(t,p),S=o(function(){S=null,0<w.transitionDuration&&$(f,!1),0<w.animationDuration&&(f.style[D+"PlayState"]=""),s.addClass(t,d),s.removeClass(t,p),a&&(0===w.transitionDuration&&t.css("transition",w.animationDuration+"s linear all"),t.css(a),g.push("transition"))},1e3*b,!1)),t.on(O,c),e.closeAnimationFns.push(function(){l(),n()}),e.running++,h(t,v),l}s.removeClass(t,d),C(t,r),n()}else n()}function $(e,t){e.style[x+"Property"]=t?"none":""}function w(e,t,r,n){return b(e,t,r,n)?function(e){e&&C(t,r)}:void 0}function k(e,t,r,n,a){return t.data("$$ngAnimateCSS3Data")?L(e,t,r,n,a):(C(t,r),void n())}function A(e,t,r,n,a){var i=w(e,t,r,a.from);if(i){var o=i;return g(t,function(){o=k(e,t,r,n,a.to)}),function(e){(o||l)(e)}}p(),n()}function C(e,t){s.removeClass(e,t);var r=e.data("$$ngAnimateCSS3Data");r&&(r.running&&r.running--,r.running&&0!==r.running||e.removeData("$$ngAnimateCSS3Data"))}function S(e,t){var r="";return e=f(e)?e:e.split(/\s+/),u(e,function(e,n){e&&0<e.length&&(r+=(n>0?" ":"")+e+t)}),r}var x,P,D,M,E="";e.ontransitionend===r&&e.onwebkittransitionend!==r?(E="-webkit-",x="WebkitTransition",P="webkitTransitionEnd transitionend"):(x="transition",P="transitionend"),e.onanimationend===r&&e.onwebkitanimationend!==r?(E="-webkit-",D="WebkitAnimation",M="webkitAnimationEnd animationend"):(D="animation",M="animationend");var O,T={},H=0,j=[],N=null,I=0,B=[];return{animate:function(e,t,r,n,a,i){return i=i||{},i.from=r,i.to=n,A("animate",e,t,a,i)},enter:function(e,t,r){return r=r||{},A("enter",e,"ng-enter",t,r)},leave:function(e,t,r){return r=r||{},A("leave",e,"ng-leave",t,r)},move:function(e,t,r){return r=r||{},A("move",e,"ng-move",t,r)},beforeSetClass:function(e,t,r,n,a){return a=a||{},t=S(r,"-remove")+" "+S(t,"-add"),(a=w("setClass",e,t,a.from))?(g(e,n),a):(p(),void n())},beforeAddClass:function(e,t,r,n){return n=n||{},(t=w("addClass",e,S(t,"-add"),n.from))?(g(e,r),t):(p(),void r())},beforeRemoveClass:function(e,t,r,n){return n=n||{},(t=w("removeClass",e,S(t,"-remove"),n.from))?(g(e,r),t):(p(),void r())},setClass:function(e,t,r,n,a){return a=a||{},r=S(r,"-remove"),t=S(t,"-add"),k("setClass",e,r+" "+t,n,a.to)},addClass:function(e,t,r,n){return n=n||{},k("addClass",e,S(t,"-add"),r,n.to)},removeClass:function(e,t,r,n){return n=n||{},k("removeClass",e,S(t,"-remove"),r,n.to)}}}])}])}(window,window.angular),function(e,t,r){"use strict";t.module("ngAria",["ng"]).provider("$aria",function(){function e(e,t,n){return function(a,i,o){var s=o.$normalize(t);r[s]&&!o[s]&&a.$watch(o[e],function(e){n&&(e=!e),i.attr(t,e)})}}var r={ariaHidden:!0,ariaChecked:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaMultiline:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0};this.config=function(e){r=t.extend(r,e)},this.$get=function(){return{config:function(e){return r[e]},$$watchExpr:e}}}).directive("ngShow",["$aria",function(e){return e.$$watchExpr("ngShow","aria-hidden",!0)}]).directive("ngHide",["$aria",function(e){return e.$$watchExpr("ngHide","aria-hidden",!1)}]).directive("ngModel",["$aria",function(e){function t(t,r,n){return e.config(r)&&!n.attr(t)}function r(e,t){return!t.attr("role")&&t.attr("type")===e&&"INPUT"!==t[0].nodeName}function n(e,t){var r=e.type,n=e.role;return"checkbox"===(r||n)||"menuitemcheckbox"===n?"checkbox":"radio"===(r||n)||"menuitemradio"===n?"radio":"range"===r||"progressbar"===n||"slider"===n?"range":"textbox"===(r||n)||"TEXTAREA"===t[0].nodeName?"multiline":""}return{restrict:"A",require:"?ngModel",priority:200,link:function(a,i,o,s){function l(){return s.$modelValue}function u(){return d?(d=!1,function(e){e=o.value==s.$viewValue,i.attr("aria-checked",e),i.attr("tabindex",0-!e)}):function(e){i.attr("aria-checked",o.value==s.$viewValue)}}function c(e){i.attr("aria-checked",!s.$isEmpty(s.$viewValue))}var f=n(o,i),d=t("tabindex","tabindex",i);switch(f){case"radio":case"checkbox":r(f,i)&&i.attr("role",f),t("aria-checked","ariaChecked",i)&&a.$watch(l,"radio"===f?u():c);break;case"range":r(f,i)&&i.attr("role","slider"),e.config("ariaValue")&&(o.min&&!i.attr("aria-valuemin")&&i.attr("aria-valuemin",o.min),o.max&&!i.attr("aria-valuemax")&&i.attr("aria-valuemax",o.max),i.attr("aria-valuenow")||a.$watch(l,function(e){i.attr("aria-valuenow",e)}));break;case"multiline":t("aria-multiline","ariaMultiline",i)&&i.attr("aria-multiline",!0)}d&&i.attr("tabindex",0),s.$validators.required&&t("aria-required","ariaRequired",i)&&a.$watch(function(){return s.$error.required},function(e){i.attr("aria-required",!!e)}),t("aria-invalid","ariaInvalid",i)&&a.$watch(function(){return s.$invalid},function(e){i.attr("aria-invalid",!!e)})}}}]).directive("ngDisabled",["$aria",function(e){return e.$$watchExpr("ngDisabled","aria-disabled")}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(e,t,r,n){t.attr("aria-live")||t.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(e,t){return{restrict:"A",compile:function(r,n){var a=t(n.ngClick,null,!0);return function(t,r,n){function i(e,t){return-1!==t.indexOf(e[0].nodeName)?!0:void 0}var o=["BUTTON","A","INPUT","TEXTAREA"];r.attr("role")||i(r,o)||r.attr("role","button"),e.config("tabindex")&&!r.attr("tabindex")&&r.attr("tabindex",0),!e.config("bindKeypress")||n.ngKeypress||i(r,o)||r.on("keypress",function(e){function r(){a(t,{$event:e})}32!==e.keyCode&&13!==e.keyCode||t.$apply(r)})}}}}]).directive("ngDblclick",["$aria",function(e){return function(t,r,n){e.config("tabindex")&&!r.attr("tabindex")&&r.attr("tabindex",0)}}])}(window,window.angular),function(e,t,r){"use strict";function n(e,r){r=r||{},t.forEach(r,function(e,t){delete r[t]});for(var n in e)!e.hasOwnProperty(n)||"$"===n.charAt(0)&&"$"===n.charAt(1)||(r[n]=e[n]);return r}var a=t.$$minErr("$resource"),i=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;t.module("ngResource",["ng"]).provider("$resource",function(){var e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(o,s){function l(t,r){this.template=t,this.defaults=d({},e.defaults,r),this.urlParams={}}function u(h,v,m,y){function b(e,t){var n={};return t=d({},v,t),f(t,function(t,o){g(t)&&(t=t());var s;if(t&&t.charAt&&"@"==t.charAt(0)){s=e;var l=t.substr(1);if(null==l||""===l||"hasOwnProperty"===l||!i.test("."+l))throw a("badmember",l);for(var l=l.split("."),u=0,c=l.length;c>u&&s!==r;u++){var f=l[u];s=null!==s?s[f]:r}}else s=t;n[o]=s}),n}function L(e){return e.resource}function $(e){n(e||{},this)}var w=new l(h,y);return m=d({},e.defaults.actions,m),$.prototype.toJSON=function(){var e=d({},this);return delete e.$promise,delete e.$resolved,e},f(m,function(e,i){var l=/^(POST|PUT|PATCH)$/i.test(e.method);$[i]=function(u,h,v,m){var y,k,A,C={};switch(arguments.length){case 4:A=m,k=v;case 3:case 2:if(!g(h)){C=u,y=h,k=v;break}if(g(u)){k=u,A=h;break}k=h,A=v;case 1:g(u)?k=u:l?y=u:C=u;break;case 0:break;default:throw a("badargs",arguments.length)}var S=this instanceof $,x=S?y:e.isArray?[]:new $(y),P={},D=e.interceptor&&e.interceptor.response||L,M=e.interceptor&&e.interceptor.responseError||r;return f(e,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(P[t]=p(e))}),l&&(P.data=y),w.setUrlParams(P,d({},b(y,e.params||{}),C),e.url),C=o(P).then(function(r){var o=r.data,s=x.$promise;if(o){if(t.isArray(o)!==!!e.isArray)throw a("badcfg",i,e.isArray?"array":"object",t.isArray(o)?"array":"object");e.isArray?(x.length=0,f(o,function(e){x.push("object"==typeof e?new $(e):e)})):(n(o,x),x.$promise=s)}return x.$resolved=!0,r.resource=x,r},function(e){return x.$resolved=!0,(A||c)(e),s.reject(e)}),C=C.then(function(e){var t=D(e);return(k||c)(t,e.headers),t},M),S?C:(x.$promise=C,x.$resolved=!1,x)},$.prototype["$"+i]=function(e,t,r){return g(e)&&(r=t,t=e,e={}),e=$[i].call(this,e,this,t,r),e.$promise||e}}),$.bind=function(e){return u(h,d({},v,e),m)},$}var c=t.noop,f=t.forEach,d=t.extend,p=t.copy,g=t.isFunction;return l.prototype={setUrlParams:function(e,r,n){var i,o,s=this,l=n||s.template,u=s.urlParams={};f(l.split(/\W/),function(e){if("hasOwnProperty"===e)throw a("badname");!/^\d+$/.test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(u[e]=!0)}),l=l.replace(/\\:/g,":"),r=r||{},f(s.urlParams,function(e,n){i=r.hasOwnProperty(n)?r[n]:s.defaults[n],t.isDefined(i)&&null!==i?(o=encodeURIComponent(i).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),l=l.replace(new RegExp(":"+n+"(\\W|$)","g"),function(e,t){return o+t})):l=l.replace(new RegExp("(/?):"+n+"(\\W|$)","g"),function(e,t,r){return"/"==r.charAt(0)?r:t+r})}),s.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),e.url=l.replace(/\/\\\./,"/."),f(r,function(t,r){s.urlParams[r]||(e.params=e.params||{},e.params[r]=t)})}},u}]})}(window,window.angular),function(e,t,r){"use strict";function n(e){var r=[];return l(r,t.noop).chars(e),r.join("")}function a(e){var t={};e=e.split(",");var r;for(r=0;r<e.length;r++)t[e[r]]=!0;return t}function i(e,r){function n(e,n,i,s){if(n=t.lowercase(n),w[n])for(;y.last()&&k[y.last()];)a("",y.last());$[n]&&y.last()==n&&a("",n),(s=L[n]||!!s)||y.push(n);var l={};i.replace(d,function(e,t,r,n,a){l[t]=o(r||n||a||"")}),r.start&&r.start(n,l,s)}function a(e,n){var a,i=0;if(n=t.lowercase(n))for(i=y.length-1;i>=0&&y[i]!=n;i--);if(i>=0){for(a=y.length-1;a>=i;a--)r.end&&r.end(y[a]);y.length=i}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var i,s,l,y=[],b=e;for(y.last=function(){return y[y.length-1]};e;){if(l="",s=!0,y.last()&&A[y.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(e,t){return t=t.replace(h,"$1").replace(m,"$1"),r.chars&&r.chars(o(t)),""}),a("",y.last())):(0===e.indexOf("<!--")?(i=e.indexOf("--",4),i>=0&&e.lastIndexOf("-->",i)===i&&(r.comment&&r.comment(e.substring(4,i)),e=e.substring(i+3),s=!1)):v.test(e)?(i=e.match(v))&&(e=e.replace(i[0],""),s=!1):g.test(e)?(i=e.match(f))&&(e=e.substring(i[0].length),i[0].replace(f,a),s=!1):p.test(e)&&((i=e.match(c))?(i[4]&&(e=e.substring(i[0].length),i[0].replace(c,n)),s=!1):(l+="<",e=e.substring(1))),s&&(i=e.indexOf("<"),l+=0>i?e:e.substring(0,i),e=0>i?"":e.substring(i),r.chars&&r.chars(o(l)))),e==b)throw u("badparse",e);b=e}a()}function o(e){return e?(P.innerHTML=e.replace(/</g,"&lt;"),P.textContent):""}function s(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,r){
var n=!1,a=t.bind(e,e.push);return{start:function(e,i,o){e=t.lowercase(e),!n&&A[e]&&(n=e),n||!0!==C[e]||(a("<"),a(e),t.forEach(i,function(n,i){var o=t.lowercase(i),l="img"===e&&"src"===o||"background"===o;!0!==x[o]||!0===S[o]&&!r(n,l)||(a(" "),a(i),a('="'),a(s(n)),a('"'))}),a(o?"/>":">"))},end:function(e){e=t.lowercase(e),n||!0!==C[e]||(a("</"),a(e),a(">")),e==n&&(n=!1)},chars:function(e){n||a(s(e))}}}var u=t.$$minErr("$sanitize"),c=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,d=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,g=/^<\//,h=/\x3c!--(.*?)--\x3e/g,v=/<!DOCTYPE([^>]*?)>/i,m=/<!\[CDATA\[(.*?)]]\x3e/g,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,L=a("area,br,col,hr,img,wbr");e=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r=a("rp,rt");var $=t.extend({},r,e),w=t.extend({},e,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),k=t.extend({},r,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));e=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var A=a("script,style"),C=t.extend({},L,w,k,$,e),S=a("background,cite,href,longdesc,src,usemap,xlink:href");e=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),r=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");var x=t.extend({},S,r,e),P=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(t){var r=[];return i(t,l(r,function(t,r){return!/^unsafe/.test(e(t,r))})),r.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,a=/^mailto:/;return function(i,o){function s(e){e&&p.push(n(e))}function l(e,r){p.push("<a "),t.isDefined(o)&&p.push('target="',o,'" '),p.push('href="',e.replace(/"/g,"&quot;"),'">'),s(r),p.push("</a>")}if(!i)return i;for(var u,c,f,d=i,p=[];u=d.match(r);)c=u[0],u[2]||u[4]||(c=(u[3]?"http://":"mailto:")+c),f=u.index,s(d.substr(0,f)),l(c,u[0].replace(a,"")),d=d.substring(f+u[0].length);return s(d),e(p.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,r){"use strict";function n(e,t){return F(new(F(function(){},{prototype:e})),t)}function a(e){return B(arguments,function(t){t!==e&&B(t,function(t,r){e.hasOwnProperty(r)||(e[r]=t)})}),e}function i(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function o(e){if(Object.keys)return Object.keys(e);var t=[];return B(e,function(e,r){t.push(r)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var r=e.length>>>0,n=Number(arguments[2])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=r);r>n;n++)if(n in e&&e[n]===t)return n;return-1}function l(e,t,r,n){var a,l=i(r,n),u={},c=[];for(var f in l)if(l[f].params&&(a=o(l[f].params),a.length))for(var d in a)s(c,a[d])>=0||(c.push(a[d]),u[a[d]]=e[a[d]]);return F({},u,t)}function u(e,t,r){if(!r){r=[];for(var n in e)r.push(n)}for(var a=0;a<r.length;a++){var i=r[a];if(e[i]!=t[i])return!1}return!0}function c(e,t){var r={};return B(e,function(e){r[e]=t[e]}),r}function f(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return B(r,function(r){r in e&&(t[r]=e[r])}),t}function d(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in e)-1==s(r,n)&&(t[n]=e[n]);return t}function p(e,t){var r=I(e),n=r?[]:{};return B(e,function(e,a){t(e,a)&&(n[r?n.length:a]=e)}),n}function g(e,t){var r=I(e)?[]:{};return B(e,function(e,n){r[n]=t(e,n)}),r}function h(e,t){var n=1,i=2,l={},u=[],c=l,f=F(e.when(l),{$$promises:l,$$values:l});this.study=function(l){function p(e,r){if(y[r]!==i){if(m.push(r),y[r]===n)throw m.splice(0,s(m,r)),new Error("Cyclic dependency: "+m.join(" -> "));if(y[r]=n,j(e))v.push(r,[function(){return t.get(e)}],u);else{var a=t.annotate(e);B(a,function(e){e!==r&&l.hasOwnProperty(e)&&p(l[e],e)}),v.push(r,e,a)}m.pop(),y[r]=i}}function g(e){return N(e)&&e.then&&e.$$promises}if(!N(l))throw new Error("'invocables' must be an object");var h=o(l||{}),v=[],m=[],y={};return B(l,p),l=m=y=null,function(n,i,o){function s(){--L||($||a(b,i.$$values),m.$$values=b,m.$$promises=m.$$promises||!0,delete m.$$inheritedValues,p.resolve(b))}function l(e){m.$$failure=e,p.reject(e)}function u(r,a,i){function u(e){f.reject(e),l(e)}function c(){if(!T(m.$$failure))try{f.resolve(t.invoke(a,o,b)),f.promise.then(function(e){b[r]=e,s()},u)}catch(e){u(e)}}var f=e.defer(),d=0;B(i,function(e){y.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(d++,y[e].then(function(t){b[e]=t,--d||c()},u))}),d||c(),y[r]=f.promise}if(g(n)&&o===r&&(o=i,i=n,n=null),n){if(!N(n))throw new Error("'locals' must be an object")}else n=c;if(i){if(!g(i))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else i=f;var p=e.defer(),m=p.promise,y=m.$$promises={},b=F({},n),L=1+v.length/3,$=!1;if(T(i.$$failure))return l(i.$$failure),m;i.$$inheritedValues&&a(b,d(i.$$inheritedValues,h)),F(y,i.$$promises),i.$$values?($=a(b,d(i.$$values,h)),m.$$inheritedValues=d(i.$$values,h),s()):(i.$$inheritedValues&&(m.$$inheritedValues=d(i.$$inheritedValues,h)),i.then(s,l));for(var w=0,k=v.length;k>w;w+=3)n.hasOwnProperty(v[w])?s():u(v[w],v[w+1],v[w+2]);return m}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function v(e,t,r){this.fromConfig=function(e,t,r){return T(e.template)?this.fromString(e.template,t):T(e.templateUrl)?this.fromUrl(e.templateUrl,t):T(e.templateProvider)?this.fromProvider(e.templateProvider,t,r):null},this.fromString=function(e,t){return H(e)?e(t):e},this.fromUrl=function(r,n){return H(r)&&(r=r(n)),null==r?null:e.get(r,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,n){return r.invoke(e,null,n||{params:t})}}function m(e,t,a){function i(t,r,n,a){if(v.push(t),g[t])return g[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(h[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return h[t]=new R.Param(t,r,n,a),h[t]}function o(e,t,r,n){var a=["",""],i=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return i;switch(r){case!1:a=["(",")"+(n?"?":"")];break;case!0:a=["?(",")?"];break;default:a=["("+r+"|",")?"]}return i+a[0]+t+a[1]}function s(a,i){var o,s,l,u,c;return o=a[2]||a[3],c=t.params[o],l=e.substring(d,a.index),s=i?a[4]:a[4]||("*"==a[1]?".*":null),u=R.type(s||"string")||n(R.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":r)}),{id:o,regexp:s,segment:l,type:u,cfg:c}}t=F({params:{}},N(t)?t:{});var l,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",d=0,p=this.segments=[],g=a?a.params:{},h=this.params=a?a.params.$$new():new R.ParamSet,v=[];this.source=e;for(var m,y,b;(l=u.exec(e))&&(m=s(l,!1),!(m.segment.indexOf("?")>=0));)y=i(m.id,m.type,m.cfg,"path"),f+=o(m.segment,y.type.pattern.source,y.squash,y.isOptional),p.push(m.segment),d=u.lastIndex;b=e.substring(d);var L=b.indexOf("?");if(L>=0){var $=this.sourceSearch=b.substring(L);if(b=b.substring(0,L),this.sourcePath=e.substring(0,d+L),$.length>0)for(d=0;l=c.exec($);)m=s(l,!0),y=i(m.id,m.type,m.cfg,"search"),d=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=o(b)+(t.strict===!1?"/?":"")+"$",p.push(b),this.regexp=new RegExp(f,t.caseInsensitive?"i":r),this.prefix=p[0],this.$$paramNames=v}function y(e){F(this,e)}function b(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function a(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function i(){return{strict:h,caseInsensitive:d}}function l(e){return H(e)||I(e)&&H(e[e.length-1])}function u(){for(;w.length;){var e=w.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(L[e.name],f.invoke(e.def))}}function c(e){F(this,e||{})}R=this;var f,d=!1,h=!0,v=!1,L={},$=!0,w=[],k={string:{encode:e,decode:a,is:function(e){return null==e||!T(e)||"string"==typeof e},pattern:/[^/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return T(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):r},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):r},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};b.$$getDefaultValue=function(e){if(!l(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return T(e)&&(d=e),d},this.strictMode=function(e){return T(e)&&(h=e),h},this.defaultSquashPolicy=function(e){if(!T(e))return v;if(e!==!0&&e!==!1&&!j(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return v=e,e},this.compile=function(e,t){return new m(e,F(i(),t))},this.isMatcher=function(e){if(!N(e))return!1;var t=!0;return B(m.prototype,function(r,n){H(r)&&(t=t&&T(e[n])&&H(e[n]))}),t},this.type=function(e,t,r){if(!T(t))return L[e];if(L.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return L[e]=new y(F({name:e},t)),r&&(w.push({name:e,def:r}),$||u()),this},B(k,function(e,t){L[t]=new y(F({name:t},e))}),L=n(L,{}),this.$get=["$injector",function(e){return f=e,$=!1,u(),B(k,function(e,t){L[t]||(L[t]=new y(e))}),this}],this.Param=function(e,t,n,a){function i(e){var t=N(e)?o(e):[],r=-1===s(t,"value")&&-1===s(t,"type")&&-1===s(t,"squash")&&-1===s(t,"array");return r&&(e={value:e}),e.$$fn=l(e.value)?e.value:function(){return e.value},e}function u(t,r,n){if(t.type&&r)throw new Error("Param '"+e+"' has two type configurations.");return r?r:t.type?t.type instanceof y?t.type:new y(t.type):"config"===n?L.any:L.string}function c(){var t={array:"search"===a?"auto":!1},r=e.match(/\[\]$/)?{array:!0}:{};return F(t,r,n).array}function d(e,t){var r=e.squash;if(!t||r===!1)return!1;if(!T(r)||null==r)return v;if(r===!0||j(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function h(e,t,n,a){var i,o,l=[{from:"",to:n||t?r:""},{from:null,to:n||t?r:""}];return i=I(e.replace)?e.replace:[],j(a)&&i.push({from:a,to:r}),o=g(i,function(e){return e.from}),p(l,function(e){return-1===s(o,e.from)}).concat(i)}function m(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(n.$$fn);if(null!==e&&e!==r&&!w.type.is(e))throw new Error("Default value ("+e+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return e}function b(e){function t(e){return function(t){return t.from===e}}function r(e){var r=g(p(w.replace,t(e)),function(e){return e.to});return r.length?r[0]:e}return e=r(e),T(e)?w.type.$normalize(e):m()}function $(){return"{Param:"+e+" "+t+" squash: '"+C+"' optional: "+A+"}"}var w=this;n=i(n),t=u(n,t,a);var k=c();t=k?t.$asArray(k,"search"===a):t,"string"!==t.name||k||"path"!==a||n.value!==r||(n.value="");var A=n.value!==r,C=d(n,A),S=h(n,k,A,C);F(this,{id:e,type:t,location:a,array:k,squash:C,replace:S,isOptional:A,value:b,dynamic:r,config:n,toString:$})},c.prototype={$$new:function(){return n(this,F(new c,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],r=this,n=o(c.prototype);r;)t.push(r),r=r.$$parent;return t.reverse(),B(t,function(t){B(o(t),function(t){-1===s(e,t)&&-1===s(n,t)&&e.push(t)})}),e},$$values:function(e){var t={},r=this;return B(r.$$keys(),function(n){t[n]=r[n].value(e&&e[n])}),t},$$equals:function(e,t){var r=!0,n=this;return B(n.$$keys(),function(a){var i=e&&e[a],o=t&&t[a];n[a].type.equals(i,o)||(r=!1)}),r},$$validates:function(e){var n,a,i,o,s,l=this.$$keys();for(n=0;n<l.length&&(a=this[l[n]],i=e[l[n]],i!==r&&null!==i||!a.isOptional);n++){if(o=a.type.$normalize(i),!a.type.is(o))return!1;if(s=a.type.encode(o),t.isString(s)&&!a.type.pattern.exec(s))return!1}return!0},$$parent:r},this.ParamSet=c}function L(e,n){function a(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function i(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function o(e,t,r){if(!r)return!1;var n=e.invoke(t,t,{$match:r});return T(n)?n:!0}function s(n,a,i,o){function s(e,t,r){return"/"===h?e:t?h.slice(0,-1)+e:r?h.slice(1)+e:e}function d(e){function t(e){var t=e(i,n);return t?(j(t)&&n.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){g&&n.url()===g,g=r;var a,o=u.length;for(a=0;o>a;a++)if(t(u[a]))return;c&&t(c)}}function p(){return l=l||a.$on("$locationChangeSuccess",d)}var g,h=o.baseHref(),v=n.url();return f||p(),{sync:function(){d()},listen:function(){return p()},update:function(e){return e?void(v=n.url()):void(n.url()!==v&&(n.url(v),n.replace()))},push:function(e,t,a){var i=e.format(t||{});null!==i&&t&&t["#"]&&(i+="#"+t["#"]),n.url(i),g=a&&a.$$avoidResync?n.url():r,a&&a.replace&&n.replace()},href:function(r,a,i){if(!r.validates(a))return null;var o=e.html5Mode();t.isObject(o)&&(o=o.enabled);var l=r.format(a);if(i=i||{},o||null===l||(l="#"+e.hashPrefix()+l),null!==l&&a&&a["#"]&&(l+="#"+a["#"]),l=s(l,o,i.absolute),!i.absolute||!l)return l;var u=!o&&l?"/":"",c=n.port();return c=80===c||443===c?"":":"+c,[n.protocol(),"://",n.host(),c,u,l].join("")}}}var l,u=[],c=null,f=!1;this.rule=function(e){if(!H(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(j(e)){var t=e;e=function(){return t}}else if(!H(e))throw new Error("'rule' must be a function");return c=e,this},this.when=function(e,t){var r,s=j(t);if(j(e)&&(e=n.compile(e)),!s&&!H(t)&&!I(t))throw new Error("invalid 'handler' in when()");var l={matcher:function(e,t){return s&&(r=n.compile(t),t=["$match",function(e){return r.format(e)}]),F(function(r,n){return o(r,t,e.exec(n.path(),n.search()))},{prefix:j(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(r=t,t=["$match",function(e){return i(r,e)}]),F(function(r,n){return o(r,t,e.exec(n.path()))},{prefix:a(e)})}},u={matcher:n.isMatcher(e),regex:e instanceof RegExp};for(var c in u)if(u[c])return this.rule(l[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===r&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function $(e,a){function i(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function d(e,t){if(!e)return r;var n=j(e),a=n?e:e.name,o=i(a);if(o){if(!t)throw new Error("No reference point given for path '"+a+"'");t=d(t);for(var s=a.split("."),l=0,u=s.length,c=t;u>l;l++)if(""!==s[l]||0!==l){if("^"!==s[l])break;if(!c.parent)throw new Error("Path '"+a+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;s=s.slice(l).join("."),a=c.name+(c.name&&s?".":"")+s}var f=C[a];return!f||!n&&(n||f!==e&&f.self!==e)?r:f}function p(e,t){S[e]||(S[e]=[]),S[e].push(t)}function h(e){for(var t=S[e]||[];t.length;)v(t.shift())}function v(t){t=n(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var r=t.name;if(!j(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(C.hasOwnProperty(r))throw new Error("State '"+r+"'' is already defined");var a=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")):j(t.parent)?t.parent:N(t.parent)&&j(t.parent.name)?t.parent.name:"";if(a&&!C[a])return p(a,t.self);for(var i in P)H(P[i])&&(t[i]=P[i](t,P.$delegates[i]));return C[r]=t,!t[x]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,r){A.$current.navigable==t&&u(e,r)||A.transitionTo(t,e,{inherit:!0,location:!1})}]),h(r),t}function m(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),r=A.$current.name.split("."),n=0,a=t.length;a>n;n++)"*"===t[n]&&(r[n]="*");return"**"===t[0]&&(r=r.slice(s(r,t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(s(r,t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length!=r.length?!1:r.join("")===t.join("")}function b(e,t){return j(e)&&!T(t)?P[e]:H(t)&&j(e)?(P[e]&&!P.$delegates[e]&&(P.$delegates[e]=P[e]),P[e]=t,this):this}function L(e,t){return N(e)?t=e:t.name=e,v(t),this}function $(e,a,i,s,f,p,h,v,b){function L(t,r,n,i){var o=e.$broadcast("$stateNotFound",t,r,n);if(o.defaultPrevented)return h.update(),D;if(!o.retry)return null;if(i.$retry)return h.update(),M;var s=A.transition=a.when(o.retry);return s.then(function(){return s!==A.transition?S:(t.options.$retry=!0,A.transitionTo(t.to,t.toParams,t.options))},function(){return D}),h.update(),s}function $(e,r,n,o,l,u){function d(){var r=[];return B(e.views,function(n,a){var o=n.resolve&&n.resolve!==e.resolve?n.resolve:{};o.$template=[function(){return i.load(a,{view:n,locals:l.globals,params:p,notify:u.notify})||""}],r.push(f.resolve(o,l.globals,l.resolve,e).then(function(r){if(H(n.controllerProvider)||I(n.controllerProvider)){var i=t.extend({},o,l.globals);r.$$controller=s.invoke(n.controllerProvider,null,i)}else r.$$controller=n.controller;r.$$state=e,r.$$controllerAs=n.controllerAs,l[a]=r}))}),a.all(r).then(function(){return l.globals})}var p=n?r:c(e.params.$$keys(),r),g={$stateParams:p};l.resolve=f.resolve(e.resolve,g,l.resolve,e);var h=[l.resolve.then(function(e){l.globals=e})];return o&&h.push(o),a.all(h).then(d).then(function(e){return l})}var S=a.reject(new Error("transition superseded")),P=a.reject(new Error("transition prevented")),D=a.reject(new Error("transition aborted")),M=a.reject(new Error("transition failed"));return k.locals={resolve:null,globals:{$stateParams:{}}},A={params:{},current:k.self,$current:k,transition:null},A.reload=function(e){return A.transitionTo(A.current,p,{reload:e||!0,inherit:!1,notify:!0})},A.go=function(e,t,r){return A.transitionTo(e,t,F({inherit:!0,relative:A.$current},r))},A.transitionTo=function(t,r,i){r=r||{},i=F({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},i||{});var o,u=A.$current,f=A.params,g=u.path,v=d(t,i.relative),m=r["#"];if(!T(v)){var y={to:t,toParams:r,options:i},b=L(y,u.self,f,i);if(b)return b;if(t=y.to,r=y.toParams,i=y.options,v=d(t,i.relative),!T(v)){if(!i.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+i.relative+"'")}}if(v[x])throw new Error("Cannot transition to abstract state '"+t+"'");if(i.inherit&&(r=l(p,r||{},A.$current,v)),!v.params.$$validates(r))return M;r=v.params.$$values(r),t=v;var C=t.path,D=0,E=C[D],O=k.locals,H=[];if(i.reload){if(j(i.reload)||N(i.reload)){if(N(i.reload)&&!i.reload.name)throw new Error("Invalid reload state object");var I=i.reload===!0?g[0]:d(i.reload);if(i.reload&&!I)throw new Error("No such reload state '"+(j(i.reload)?i.reload:i.reload.name)+"'");for(;E&&E===g[D]&&E!==I;)O=H[D]=E.locals,D++,E=C[D]}}else for(;E&&E===g[D]&&E.ownParams.$$equals(r,f);)O=H[D]=E.locals,D++,E=C[D];if(w(t,r,u,f,O,i))return m&&(r["#"]=m),A.params=r,q(A.params,p),i.location&&t.navigable&&t.navigable.url&&(h.push(t.navigable.url,r,{$$avoidResync:!0,replace:"replace"===i.location}),h.update(!0)),A.transition=null,a.when(A.current);if(r=c(t.params.$$keys(),r||{}),i.notify&&e.$broadcast("$stateChangeStart",t.self,r,u.self,f).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,r,u.self,f),h.update(),P;for(var B=a.when(O),R=D;R<C.length;R++,E=C[R])O=H[R]=n(O),B=$(E,r,E===t,B,O,i);var G=A.transition=B.then(function(){var n,a,o;if(A.transition!==G)return S;for(n=g.length-1;n>=D;n--)o=g[n],o.self.onExit&&s.invoke(o.self.onExit,o.self,o.locals.globals),o.locals=null;for(n=D;n<C.length;n++)a=C[n],a.locals=H[n],a.self.onEnter&&s.invoke(a.self.onEnter,a.self,a.locals.globals);return m&&(r["#"]=m),A.transition!==G?S:(A.$current=t,A.current=t.self,A.params=r,q(A.params,p),A.transition=null,i.location&&t.navigable&&h.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===i.location}),i.notify&&e.$broadcast("$stateChangeSuccess",t.self,r,u.self,f),h.update(!0),A.current)},function(n){return A.transition!==G?S:(A.transition=null,o=e.$broadcast("$stateChangeError",t.self,r,u.self,f,n),o.defaultPrevented||h.update(),a.reject(n))});return G},A.is=function(e,t,n){n=F({relative:A.$current},n||{});var a=d(e,n.relative);return T(a)?A.$current!==a?!1:t?u(a.params.$$values(t),p):!0:r},A.includes=function(e,t,n){if(n=F({relative:A.$current},n||{}),j(e)&&m(e)){if(!y(e))return!1;e=A.$current.name}var a=d(e,n.relative);return T(a)?T(A.$current.includes[a.name])?t?u(a.params.$$values(t),p,o(t)):!0:!1:r},A.href=function(e,t,n){n=F({lossy:!0,inherit:!0,absolute:!1,relative:A.$current},n||{});var a=d(e,n.relative);if(!T(a))return null;n.inherit&&(t=l(p,t||{},A.$current,a));var i=a&&n.lossy?a.navigable:a;return i&&i.url!==r&&null!==i.url?h.href(i.url,c(a.params.$$keys().concat("#"),t||{}),{absolute:n.absolute}):null},A.get=function(e,t){if(0===arguments.length)return g(o(C),function(e){return C[e].self});var r=d(e,t||A.$current);return r&&r.self?r.self:null},A}function w(e,t,r,n,a,i){function o(e,t,r){function n(t){return"search"!=e.params[t].location}var a=e.params.$$keys().filter(n),i=f.apply({},[e.params].concat(a)),o=new R.ParamSet(i);return o.$$equals(t,r)}return!i.reload&&e===r&&(a===r.locals||e.self.reloadOnSearch===!1&&o(r,n,t))?!0:void 0}var k,A,C={},S={},x="abstract",P={parent:function(e){if(T(e.parent)&&e.parent)return d(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?d(t[1]):k},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=F({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,r={params:e.params||{}};if(j(t))return"^"==t.charAt(0)?a.compile(t.substring(1),r):(e.parent.navigable||k).url.concat(t,r);if(!t||a.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new R.ParamSet;return B(e.params||{},function(e,r){t[r]||(t[r]=new R.Param(r,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?F(e.parent.params.$$new(),e.ownParams):new R.ParamSet},views:function(e){var t={};return B(T(e.views)?e.views:{"":e},function(r,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),t[n]=r}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?F({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};k=v({name:"",url:"^",views:null,"abstract":!0}),k.navigable=null,this.decorator=b,this.state=L,this.$get=$,$.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function e(e,t){return{load:function(r,n){var a,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=F(i,n),n.view&&(a=t.fromConfig(n.view,n.params,n.locals)),a&&n.notify&&e.$broadcast("$viewContentLoading",n),a}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function k(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){return r(function(){e[0].scrollIntoView()},0,!1)}}]}function A(e,r,n,a){function i(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(t){return null}}}function o(e,t){var r=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,t,r){var n=u.enter(e,null,t,r);n&&n.then&&n.then(r)},leave:function(e,t){var r=u.leave(e,t);r&&r.then&&r.then(t)}};if(l){var n=l&&l(t,e);return{enter:function(e,t,r){n.enter(e,null,t),r()},leave:function(e,t){n.leave(e),t()}}}return r()}var s=i(),l=s("$animator"),u=s("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,i,s){return function(r,i,l){function u(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),d&&(m.leave(d,function(){f=null}),f=d,d=null)}function c(o){var c,f=S(r,l,i,a),y=f&&e.$current&&e.$current.locals[f];if(o||y!==g){c=r.$new(),g=e.$current.locals[f];var b=s(c,function(e){m.enter(e,i,function(){p&&p.$emit("$viewContentAnimationEnded"),(t.isDefined(v)&&!v||r.$eval(v))&&n(e)}),u()});d=b,p=c,p.$emit("$viewContentLoaded"),p.$eval(h)}}var f,d,p,g,h=l.onload||"",v=l.autoscroll,m=o(l,r);r.$on("$stateChangeSuccess",function(){c(!1)}),r.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function C(e,t,r,n){return{restrict:"ECA",priority:-400,compile:function(a){var i=a.html();return function(a,o,s){var l=r.$current,u=S(a,s,o,n),c=l&&l.locals[u];if(c){o.data("$uiView",{name:u,state:c.$$state}),o.html(c.$template?c.$template:i);var f=e(o.contents());if(c.$$controller){c.$scope=a,c.$element=o;var d=t(c.$$controller,c);c.$$controllerAs&&(a[c.$$controllerAs]=d),o.data("$ngControllerController",d),o.children().data("$ngControllerController",d)}f(a)}}}}}function S(e,t,r,n){var a=n(t.uiView||t.name||"")(e),i=r.inheritedData("$uiView");return a.indexOf("@")>=0?a:a+"@"+(i?i.state.name:"")}function x(e,t){var r,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function P(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function D(e,r){var n=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(a,i,o,s){var l=x(o.uiSref,e.current.name),u=null,c=P(i)||e.$current,f="[object SVGAnimatedString]"===Object.prototype.toString.call(i.prop("href"))?"xlink:href":"href",d=null,p="A"===i.prop("tagName").toUpperCase(),g="FORM"===i[0].nodeName,h=g?"action":f,v=!0,m={relative:c,inherit:!0},y=a.$eval(o.uiSrefOpts)||{};t.forEach(n,function(e){e in y&&(m[e]=y[e])});var b=function(r){if(r&&(u=t.copy(r)),v){d=e.href(l.state,u,m);var n=s[1]||s[0];return n&&n.$$addStateInfo(l.state,u),null===d?(v=!1,!1):void o.$set(h,d)}};l.paramExpr&&(a.$watch(l.paramExpr,function(e,t){e!==u&&b(e)},!0),u=t.copy(a.$eval(l.paramExpr))),b(),g||i.bind("click",function(t){var n=t.which||t.button;if(!(n>1||t.ctrlKey||t.metaKey||t.shiftKey||i.attr("target"))){var a=r(function(){e.go(l.state,u,m)});t.preventDefault();var o=p&&!d?1:0;t.preventDefault=function(){o--<=0&&r.cancel(a)}}})}}}function M(e,t,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,n,a){function i(){o()?n.addClass(l):n.removeClass(l)}function o(){for(var e=0;e<u.length;e++)if(s(u[e].state,u[e].params))return!0;return!1}function s(t,r){return"undefined"!=typeof a.uiSrefActiveEq?e.is(t.name,r):e.includes(t.name,r)}var l,u=[];l=r(a.uiSrefActiveEq||a.uiSrefActive||"",!1)(t),this.$$addStateInfo=function(t,r){var a=e.get(t,P(n));u.push({state:a||{name:t},params:r}),i()},t.$on("$stateChangeSuccess",i)}]}}function E(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function O(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var T=t.isDefined,H=t.isFunction,j=t.isString,N=t.isObject,I=t.isArray,B=t.forEach,F=t.extend,q=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),h.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",h),v.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",v);var R;m.prototype.concat=function(e,t){var r={caseInsensitive:R.caseInsensitive(),strict:R.strictMode(),squash:R.defaultSquashPolicy()};return new m(this.sourcePath+e+this.sourceSearch,F(r,t),this)},m.prototype.toString=function(){return this.source},m.prototype.exec=function(e,t){function r(e){function t(e){return e.split("").reverse().join("")}function r(e){return e.replace(/\\-/g,"-")}var n=t(e).split(/-(?!\\)/),a=g(n,t);return g(a,r).reverse()}var n=this.regexp.exec(e);if(!n)return null;t=t||{};var a,i,o,s=this.parameters(),l=s.length,u=this.segments.length-1,c={};if(u!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(a=0;u>a;a++){o=s[a];var f=this.params[o],d=n[a+1];for(i=0;i<f.replace;i++)f.replace[i].from===d&&(d=f.replace[i].to);d&&f.array===!0&&(d=r(d)),c[o]=f.value(d)}for(;l>a;a++)o=s[a],c[o]=this.params[o].value(t[o]);return c},m.prototype.parameters=function(e){return T(e)?this.params[e]||null:this.$$paramNames},m.prototype.validates=function(e){return this.params.$$validates(e)},m.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var r=this.segments,n=this.parameters(),a=this.params;if(!this.validates(e))return null;var i,o=!1,s=r.length-1,l=n.length,u=r[0];for(i=0;l>i;i++){var c=s>i,f=n[i],d=a[f],p=d.value(e[f]),h=d.isOptional&&d.type.equals(d.value(),p),v=h?d.squash:!1,m=d.type.encode(p);if(c){var y=r[i+1];if(v===!1)null!=m&&(u+=I(m)?g(m,t).join("-"):encodeURIComponent(m)),u+=y;else if(v===!0){var b=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=y.match(b)[1]}else j(v)&&(u+=v+y)}else{if(null==m||h&&v!==!1)continue;I(m)||(m=[m]),m=g(m,encodeURIComponent).join("&"+f+"="),
u+=(o?"&":"?")+(f+"="+m),o=!0}}return u},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},y.prototype.$asArray=function(e,t){function n(e,t){function n(e,t){return function(){return e[t].apply(e,arguments)}}function a(e){return I(e)?e:T(e)?[e]:[]}function i(e){switch(e.length){case 0:return r;case 1:return"auto"===t?e[0]:e;default:return e}}function o(e){return!e}function s(e,t){return function(r){r=a(r);var n=g(r,e);return t===!0?0===p(n,o).length:i(n)}}function l(e){return function(t,r){var n=a(t),i=a(r);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!e(n[o],i[o]))return!1;return!0}}this.encode=s(n(e,"encode")),this.decode=s(n(e,"decode")),this.is=s(n(e,"is"),!0),this.equals=l(n(e,"equals")),this.pattern=e.pattern,this.$normalize=s(n(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new n(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",b),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),L.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",L),$.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",$),w.$inject=[],t.module("ui.router.state").provider("$view",w),t.module("ui.router.state").provider("$uiViewScroll",k),A.$inject=["$state","$injector","$uiViewScroll","$interpolate"],C.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",A),t.module("ui.router.state").directive("uiView",C),D.$inject=["$state","$timeout"],M.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",M).directive("uiSrefActiveEq",M),E.$inject=["$state"],O.$inject=["$state"],t.module("ui.router.state").filter("isState",E).filter("includedByState",O)}(window,window.angular),!function(e,t){"use strict";function r(e){return/^-?\d+\.?\d*$/.test(e.replace(/["']/g,""))}var n=t.isDefined,a=t.isUndefined,i=t.isNumber,o=t.isObject,s=t.isArray,l=t.extend,u=t.toJson,c=t.fromJson,f=t.module("LocalStorageModule",[]);f.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie={expiry:e,path:t},this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,f,d){var p,g=this,h=g.prefix,v=g.cookie,m=g.notify,y=g.storageType;f?f[0]&&(f=f[0]):f=document,"."!==h.substr(-1)&&(h=h?h+".":"");var b=function(e){return h+e},L=function(){try{var r=y in t&&null!==t[y],n=b("__"+Math.round(1e7*Math.random()));return r&&(p=t[y],p.setItem(n,""),p.removeItem(n)),r}catch(a){return y="cookie",e.$broadcast("LocalStorageModule.notification.error",a.message),!1}}(),$=function(t,r){if(a(r)?r=null:(o(r)||s(r)||i(+r||r))&&(r=u(r)),!L||"cookie"===g.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:r,storageType:"cookie"}),x(t,r);try{(o(r)||s(r))&&(r=u(r)),p&&p.setItem(b(t),r),m.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:r,storageType:g.storageType})}catch(n){return e.$broadcast("LocalStorageModule.notification.error",n.message),x(t,r)}return!0},w=function(t){if(!L||"cookie"===g.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),P(t);var n=p?p.getItem(b(t)):null;return n&&"null"!==n?"{"===n.charAt(0)||"["===n.charAt(0)||r(n)?c(n):n:null},k=function(t){if(!L||"cookie"===g.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:"cookie"}),D(t);try{p.removeItem(b(t)),m.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:g.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),D(t)}return!0},A=function(){if(!L)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=h.length,r=[];for(var n in p)if(n.substr(0,t)===h)try{r.push(n.substr(t))}catch(a){return e.$broadcast("LocalStorageModule.notification.error",a.Description),[]}return r},C=function(t){t=t||"";var r=h.slice(0,-1),n=new RegExp(r+"."+t);if(!L||"cookie"===g.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),M();var a=h.length;for(var i in p)if(n.test(i))try{k(i.substr(a))}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),M()}return!0},S=function(){try{return t.navigator.cookieEnabled||"cookie"in f&&(f.cookie.length>0||(f.cookie="test").indexOf.call(f.cookie,"test")>-1)}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),!1}}(),x=function(t,r){if(a(r))return!1;if((s(r)||o(r))&&(r=u(r)),!S)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var n="",i=new Date,l="";if(null===r?(i.setTime(i.getTime()+-864e5),n="; expires="+i.toGMTString(),r=""):0!==v.expiry&&(i.setTime(i.getTime()+24*v.expiry*60*60*1e3),n="; expires="+i.toGMTString()),t){var c="; path="+v.path;v.domain&&(l="; domain="+v.domain),f.cookie=b(t)+"="+encodeURIComponent(r)+n+c+l}}catch(d){return e.$broadcast("LocalStorageModule.notification.error",d.message),!1}return!0},P=function(t){if(!S)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=f.cookie&&f.cookie.split(";")||[],n=0;n<r.length;n++){for(var a=r[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(b(t)+"=")){var i=decodeURIComponent(a.substring(h.length+t.length+1,a.length));try{var o=JSON.parse(i);return c(o)}catch(s){return i}}}return null},D=function(e){x(e,null)},M=function(){for(var e=null,t=h.length,r=f.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);var a=e.substring(t,e.indexOf("="));D(a)}},E=function(){return y},O=function(e,t,r,a){a=a||t;var i=w(a);return null===i&&n(r)?i=r:o(i)&&o(r)&&(i=l(r,i)),d(t).assign(e,i),e.$watch(t,function(e){$(a,e)},o(e[t]))},T=function(){for(var e=0,r=t[y],n=0;n<r.length;n++)0===r.key(n).indexOf(h)&&e++;return e};return{isSupported:L,getStorageType:E,set:$,add:$,get:w,keys:A,remove:k,clearAll:C,bind:O,deriveKey:b,length:T,cookie:{isSupported:S,set:x,add:x,get:P,remove:D,clearAll:M}}}]})}(window,window.angular),angular.module("nemLogging",[]).service("nemSimpleLogger",["$log",function(e){var t,r,n,a,i;return n=["log","info","debug","warn","error"],t={log:1,info:2,debug:3,warn:4,error:5},i=function(e,t,r){return e>=t?r():void 0},a=function(t,r){return null!=e?e[t](r):console[t](r)},new(r=function(){function r(){var e;this.doLog=!0,e={},n.forEach(function(r){return function(n){return e[n]=function(e){return r.doLog?i(t[n],r.currentLevel,function(){return a(n,e)}):void 0}}}(this)),this.LEVELS=t,this.currentLevel=t.error,n.forEach(function(t){return function(r){return t[r]=e[r]}}(this))}return r.prototype.spawn=function(){return new r},r.prototype.setLog=function(t){return e=t},r}())}]),!function(angular){"use strict";angular.module("leaflet-directive",["nemLogging"]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletEvents",function(e,t,r,n,a){return{restrict:"EA",replace:!0,scope:{center:"=",lfCenter:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude></div></div>',controller:["$scope",function(t){this._leafletMap=e.defer(),this.getMap=function(){return this._leafletMap.promise},this.getLeafletScope=function(){return t}}],link:function(e,i,o,s){function l(){isNaN(o.width)?i.css("width",o.width):i.css("width",o.width+"px")}function u(){isNaN(o.height)?i.css("height",o.height):i.css("height",o.height+"px")}var c=n.isDefined,f=r.setDefaults(e.defaults,o.id),d=a.getAvailableMapEvents(),p=a.addEvents;e.mapId=o.id,t.setDirectiveControls({},o.id),c(o.width)&&(l(),e.$watch(function(){return i[0].getAttribute("width")},function(){l(),g.invalidateSize()})),c(o.height)&&(u(),e.$watch(function(){return i[0].getAttribute("height")},function(){u(),g.invalidateSize()}));var g=new L.Map(i[0],r.getMapCreationDefaults(o.id));if(s._leafletMap.resolve(g),c(o.center)||c(o.lfCenter)||g.setView([f.center.lat,f.center.lng],f.center.zoom),!c(o.tiles)&&!c(o.layers)){var h=L.tileLayer(f.tileLayer,f.tileLayerOptions);h.addTo(g),t.setTiles(h,o.id)}if(c(g.zoomControl)&&c(f.zoomControlPosition)&&g.zoomControl.setPosition(f.zoomControlPosition),c(g.zoomControl)&&f.zoomControl===!1&&g.zoomControl.removeFrom(g),c(g.zoomsliderControl)&&c(f.zoomsliderControl)&&f.zoomsliderControl===!1&&g.zoomsliderControl.removeFrom(g),!c(o.eventBroadcast)){var v="broadcast";p(g,d,"eventName",e,v)}g.whenReady(function(){t.setMap(g,o.id)}),e.$on("$destroy",function(){r.reset(),g.remove(),t.unresolveMap(o.id)}),e.$on("invalidateSize",function(){g.invalidateSize()})}}}]),angular.module("leaflet-directive").factory("leafletBoundsHelpers",["leafletLogger","leafletHelpers",function(e,t){function r(e){return angular.isDefined(e)&&angular.isDefined(e.southWest)&&angular.isDefined(e.northEast)&&angular.isNumber(e.southWest.lat)&&angular.isNumber(e.southWest.lng)&&angular.isNumber(e.northEast.lat)&&angular.isNumber(e.northEast.lng)}var n=t.isArray,a=t.isNumber,i=t.isFunction,o=t.isDefined,s=e;return{createLeafletBounds:function(e){return r(e)?L.latLngBounds([e.southWest.lat,e.southWest.lng],[e.northEast.lat,e.northEast.lng]):void 0},isValidBounds:r,createBoundsFromArray:function(e){return n(e)&&2===e.length&&n(e[0])&&n(e[1])&&2===e[0].length&&2===e[1].length&&a(e[0][0])&&a(e[0][1])&&a(e[1][0])&&a(e[1][1])?{northEast:{lat:e[0][0],lng:e[0][1]},southWest:{lat:e[1][0],lng:e[1][1]}}:void s.error("[AngularJS - Leaflet] The bounds array is not valid.")},createBoundsFromLeaflet:function(e){if(!(o(e)&&i(e.getNorthEast)&&i(e.getSouthWest)))return void s.error("[AngularJS - Leaflet] The leaflet bounds is not valid object.");var t=e.getNorthEast(),r=e.getSouthWest();return{northEast:{lat:t.lat,lng:t.lng},southWest:{lat:r.lat,lng:r.lng}}}}}]),angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","leafletLogger","leafletHelpers","leafletLayerHelpers","leafletMapDefaults",function(e,t,r,n,a){var i=r.isDefined,o=r.isObject,s=n.createLayer,l={},u=r.errorHeader+" [Controls] ",c=t,f=function(e,t,r){var n=a.getDefaults(r);if(!n.controls.layers.visible)return!1;var s=!1;return o(e)&&Object.keys(e).forEach(function(t){var r=e[t];i(r.layerOptions)&&r.layerOptions.showOnSelector===!1||(s=!0)}),o(t)&&Object.keys(t).forEach(function(e){var r=t[e];i(r.layerParams)&&r.layerParams.showOnSelector===!1||(s=!0)}),s},d=function(e){var t=a.getDefaults(e),r={collapsed:t.controls.layers.collapsed,position:t.controls.layers.position,autoZIndex:!1};angular.extend(r,t.controls.layers.options);var n;return n=t.controls.layers&&i(t.controls.layers.control)?t.controls.layers.control.apply(this,[[],[],r]):new L.control.layers([],[],r)},p={draw:{isPluginLoaded:function(){return angular.isDefined(L.Control.Draw)?!0:(c.error(u+" Draw plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Draw(e)}},scale:{isPluginLoaded:function(){return!0},checkValidParams:function(){return!0},createControl:function(e){return new L.control.scale(e)}},fullscreen:{isPluginLoaded:function(){return angular.isDefined(L.Control.Fullscreen)?!0:(c.error(u+" Fullscreen plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Fullscreen(e)}},search:{isPluginLoaded:function(){return angular.isDefined(L.Control.Search)?!0:(c.error(u+" Search plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Search(e)}},custom:{},minimap:{isPluginLoaded:function(){return angular.isDefined(L.Control.MiniMap)?!0:(c.error(u+" Minimap plugin is not loaded."),!1)},checkValidParams:function(e){return i(e.layer)?!0:(c.warn(u+' minimap "layer" option should be defined.'),!1)},createControl:function(e){var t=s(e.layer);return i(t)?new L.Control.MiniMap(t,e):void c.warn(u+' minimap control "layer" could not be created.')}}};return{layersControlMustBeVisible:f,isValidControlType:function(e){return-1!==Object.keys(p).indexOf(e)},createControl:function(e,t){return p[e].checkValidParams(t)?p[e].createControl(t):void 0},updateLayersControl:function(e,t,r,n,a,o){var s,u=l[t],c=f(n,a,t);if(i(u)&&r){for(s in o.baselayers)u.removeLayer(o.baselayers[s]);for(s in o.overlays)u.removeLayer(o.overlays[s]);e.removeControl(u),delete l[t]}if(c){u=d(t),l[t]=u;for(s in n){var p=i(n[s].layerOptions)&&n[s].layerOptions.showOnSelector===!1;!p&&i(o.baselayers[s])&&u.addBaseLayer(o.baselayers[s],n[s].name)}for(s in a){var g=i(a[s].layerParams)&&a[s].layerParams.showOnSelector===!1;!g&&i(o.overlays[s])&&u.addOverlay(o.overlays[s],a[s].name)}e.addControl(u)}return c}}}]),angular.module("leaflet-directive").service("leafletData",["leafletLogger","$q","leafletHelpers",function(e,t,r){var n=r.getDefer,a=r.getUnresolvedDefer,i=r.setResolvedDefer,o={},s=this,l=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},u=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];u.forEach(function(e){o[e]={}}),this.unresolveMap=function(e){var t=r.obtainEffectiveMapId(o.map,e);u.forEach(function(e){o[e][t]=void 0})},u.forEach(function(e){var t=l(e);s["set"+t]=function(t,r){var n=a(o[e],r);n.resolve(t),i(o[e],r)},s["get"+t]=function(t){var r=n(o[e],t);return r.promise}})}]),angular.module("leaflet-directive").service("leafletDirectiveControlsHelpers",["leafletLogger","leafletData","leafletHelpers",function(e,t,r){var n=r.isDefined,a=r.isString,i=r.isObject,o=r.errorHeader,s=e,l=o+"[leafletDirectiveControlsHelpers",u=function(e,r,o,u){var c=l+".extend] ",f={};if(!n(r))return void s.error(c+"thingToAddName cannot be undefined");if(a(r)&&n(o)&&n(u))f[r]={create:o,clean:u};else{if(!i(r)||n(o)||n(u))return void s.error(c+"incorrect arguments");f=r}t.getDirectiveControls().then(function(r){angular.extend(r,f),t.setDirectiveControls(r,e)})};return{extend:u}}]),angular.module("leaflet-directive").factory("leafletEvents",["leafletMapEvents","leafletMarkerEvents","leafletPathEvents","leafletIterators",function(e,t,r,n){var a=angular.extend({},e,{bindMarkerEvents:t.bindEvents,getAvailableMarkerEvents:t.getAvailableEvents},r),i=a.genDispatchMapEvent;return a.addEvents=function(e,t,r,a,o){n.each(t,function(t){var n={};n[r]=t,e.on(t,i(a,t,o),n)})},a}]),angular.module("leaflet-directive").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(e,t){var r=e,n=t,a=function(e,t){return this.lat=e,this.lng=t,this},i=function(e){return Array.isArray(e)&&2===e.length?e[1]:r.isDefined(e.type)&&"Point"===e.type?+e.coordinates[1]:+e.lat},o=function(e){return Array.isArray(e)&&2===e.length?e[0]:r.isDefined(e.type)&&"Point"===e.type?+e.coordinates[0]:+e.lng},s=function(e){if(r.isUndefined(e))return!1;if(r.isArray(e)){if(2===e.length&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0}else if(r.isDefined(e.type)&&"Point"===e.type&&r.isArray(e.coordinates)&&2===e.coordinates.length&&r.isNumber(e.coordinates[0])&&r.isNumber(e.coordinates[1]))return!0;var t=n.all(["lat","lng"],function(t){return r.isDefined(e[t])&&r.isNumber(e[t])});return t},l=function(e){if(e&&s(e)){var t=null;if(Array.isArray(e)&&2===e.length)t=new a(e[1],e[0]);else{if(!r.isDefined(e.type)||"Point"!==e.type)return e;t=new a(e.coordinates[1],e.coordinates[0])}return angular.extend(e,t)}};return{getLat:i,getLng:o,validateCoords:s,getCoords:l}}]),angular.module("leaflet-directive").service("leafletHelpers",["$q","$log",function(e,t){function r(e,r){var n,i;if(angular.isDefined(r))n=r;else if(0===Object.keys(e).length)n="main";else if(Object.keys(e).length>=1)for(i in e)e.hasOwnProperty(i)&&(n=i);else t.error(a+"- You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return n}function n(t,n){var a,i=r(t,n);return angular.isDefined(t[i])&&t[i].resolvedDefer!==!0?a=t[i].defer:(a=e.defer(),t[i]={defer:a,resolvedDefer:!1}),a}var a="[AngularJS - Leaflet] ",i=angular.copy,o=i,s=function(e,t){var r;return e&&angular.isObject(e)?null!==t&&angular.isString(t)?(r=e,t.split(".").forEach(function(e){r&&(r=r[e])}),r):t:void 0},l=function(e){return e.split(".").reduce(function(e,t){return e+'["'+t+'"]'})},u=function(e){return e.reduce(function(e,t){return e+"."+t})},c=function(e){return angular.isDefined(e)&&null!==e},f=function(e){return!c(e)},d=/([\:\-\_]+(.))/g,p=/^moz([A-Z])/,g=/^((?:x|data)[\:\-_])/i,h=function(e){return e.replace(d,function(e,t,r,n){return n?r.toUpperCase():r}).replace(p,"Moz$1")},v=function(e){return h(e.replace(g,""))};return{camelCase:h,directiveNormalize:v,copy:i,clone:o,errorHeader:a,getObjectValue:s,getObjectArrayPath:l,getObjectDotPath:u,defaultTo:function(e,t){return c(e)?e:t},isTruthy:function(e){return"true"===e||e===!0},isEmpty:function(e){return 0===Object.keys(e).length},isUndefinedOrEmpty:function(e){return angular.isUndefined(e)||null===e||0===Object.keys(e).length},isDefined:c,isUndefined:f,isNumber:angular.isNumber,isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isFunction:angular.isFunction,equals:angular.equals,isValidCenter:function(e){return angular.isDefined(e)&&angular.isNumber(e.lat)&&angular.isNumber(e.lng)&&angular.isNumber(e.zoom)},isValidPoint:function(e){return angular.isDefined(e)?angular.isArray(e)?2===e.length&&angular.isNumber(e[0])&&angular.isNumber(e[1]):angular.isNumber(e.lat)&&angular.isNumber(e.lng):!1},isSameCenterOnMap:function(e,t){var r=t.getCenter(),n=t.getZoom();return e.lat&&e.lng&&r.lat.toFixed(4)===e.lat.toFixed(4)&&r.lng.toFixed(4)===e.lng.toFixed(4)&&n===e.zoom?!0:!1},safeApply:function(e,t){var r=e.$root.$$phase;"$apply"===r||"$digest"===r?e.$eval(t):e.$evalAsync(t)},obtainEffectiveMapId:r,getDefer:function(e,t){var a,i=r(e,t);return a=angular.isDefined(e[i])&&e[i].resolvedDefer!==!1?e[i].defer:n(e,t)},getUnresolvedDefer:n,setResolvedDefer:function(e,t){var n=r(e,t);e[n].resolvedDefer=!0},rangeIsSupported:function(){var e=document.createElement("input");return e.setAttribute("type","range"),"range"===e.type},FullScreenControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.Fullscreen)}},MiniMapControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.MiniMap)}},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)},is:function(e){return this.isLoaded()?e instanceof L.AwesomeMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},DomMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.DomMarkers)&&angular.isDefined(L.DomMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.DomMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},PolylineDecoratorPlugin:{isLoaded:function(){return angular.isDefined(L.PolylineDecorator)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.PolylineDecorator:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},MakiMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.MakiMarkers)&&angular.isDefined(L.MakiMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.MakiMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},ExtraMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.ExtraMarkers)&&angular.isDefined(L.ExtraMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.ExtraMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(e){return this.isLoaded()?e instanceof L.Google:!1}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return angular.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(e){return this.isLoaded()?e instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(e){return this.isLoaded()?e instanceof L.GeoJSON.WFS:!1}},AGSBaseLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.basemapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.basemapLayer:!1}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(e){return this.isLoaded()?e instanceof lvector.AGS:!1}},AGSFeatureLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.featureLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.featureLayer:!1}},AGSTiledMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.tiledMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.tiledMapLayer:!1}},AGSDynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.dynamicMapLayer:!1}},AGSImageMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.imageMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.imageMapLayer:!1}},AGSClusteredLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.clusteredFeatureLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.clusteredFeatureLayer:!1}},AGSHeatmapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.heatmapFeatureLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.heatmapFeatureLayer:!1}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(e){return this.isLoaded()?e instanceof L.Yandex:!1}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(e){return this.isLoaded()?e instanceof L.TileLayer.GeoJSON:!1}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(e){return this.isLoaded()?e instanceof L.UtfGrid:(t.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(e){return e instanceof L.DivIcon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}},Icon:{is:function(e){return e instanceof L.Icon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]),angular.module("leaflet-directive").service("leafletIterators",["leafletLogger","leafletHelpers",function(e,t){var r,n=t,a=t.errorHeader+"leafletIterators: ",i=Object.keys,o=n.isFunction,s=n.isObject,l=e,u=Math.pow(2,53)-1,c=function(e){var t=null!==e&&e.length;return n.isNumber(t)&&t>=0&&u>=t},f=function(e){return e},d=function(e){return function(t){return null===t?void 0:t[e]}},p=function(e,t,r){if(void 0===t)return e;switch(null===r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)};case 4:return function(r,n,a,i){return e.call(t,r,n,a,i)}}return function(){return e.apply(t,arguments)}},g=function(e,t){return function(r){var n=arguments.length;if(2>n||null===r)return r;for(var a=1;n>a;a++)for(var i=arguments[a],o=e(i),s=o.length,l=0;s>l;l++){var u=o[l];t&&void 0!==r[u]||(r[u]=i[u])}return r}},h=null;r=h=g(i);var v,m=function(e,t){var r=i(t),n=r.length;if(null===e)return!n;for(var a=Object(e),o=0;n>o;o++){var s=r[o];if(t[s]!==a[s]||!(s in a))return!1}return!0},y=null;v=y=function(e){return e=r({},e),function(t){return m(t,e)}};var b,L=function(e,t,r){return null===e?f:o(e)?p(e,t,r):s(e)?v(e):d(e)},$=null;b=$=function(e,t,r){t=L(t,r);for(var n=!c(e)&&i(e),a=(n||e).length,o=0;a>o;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0};var w=function(e,t,r,i){return r||n.isDefined(e)&&n.isDefined(t)?n.isFunction(t)?!1:(i=n.defaultTo(t,"cb"),l.error(a+i+" is not a function"),!0):!0},k=function(e,t,r){if(!w(void 0,r,!0,"internalCb")&&!w(e,t))for(var n in e)e.hasOwnProperty(n)&&r(e[n],n)},A=function(e,t){k(e,t,function(e,r){t(e,r)})};return{each:A,forEach:A,every:b,all:$}}]),angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$q","leafletLogger","leafletHelpers","leafletIterators",function($rootScope,$q,leafletLogger,leafletHelpers,leafletIterators){function isValidLayerType(e){return isString(e.type)?-1===Object.keys(layerTypes).indexOf(e.type)?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[e.type].mustHaveUrl&&!isString(e.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[e.type].mustHaveData&&!isDefined(e.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[e.type].mustHaveLayer&&!isDefined(e.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have an layer defined"),!1):layerTypes[e.type].mustHaveBounds&&!isDefined(e.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have bounds defined"),!1):layerTypes[e.type].mustHaveKey&&!isDefined(e.key)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have key defined"),!1):!0:($log.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function createLayer(e){if(isValidLayerType(e)){if(!isString(e.name))return void $log.error("[AngularJS - Leaflet] A base layer must have a name");isObject(e.layerParams)||(e.layerParams={}),isObject(e.layerOptions)||(e.layerOptions={});for(var t in e.layerParams)e.layerOptions[t]=e.layerParams[t];var r={url:e.url,data:e.data,options:e.layerOptions,layer:e.layer,icon:e.icon,type:e.layerType,bounds:e.bounds,key:e.key,apiKey:e.apiKey,pluginOptions:e.pluginOptions,user:e.user};return layerTypes[e.type].createLayer(r)}}function safeAddLayer(e,t){t&&"function"==typeof t.addTo?t.addTo(e):e.addLayer(t)}function safeRemoveLayer(e,t,r){if(isDefined(r)&&isDefined(r.loadedDefer))if(angular.isFunction(r.loadedDefer)){var n=r.loadedDefer();$log.debug("Loaded Deferred",n);for(var a=n.length,i=function(){a--,0===a&&e.removeLayer(t)},o=0;o<n.length;o++)n[o].promise.then(i)}else r.loadedDefer.promise.then(function(){e.removeLayer(t)});else e.removeLayer(t)}var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isArray=leafletHelpers.isArray,isDefined=leafletHelpers.isDefined,errorHeader=leafletHelpers.errorHeader,$it=leafletIterators,$log=leafletLogger,utfGridCreateLayer=function(e){if(!Helpers.UTFGridPlugin.isLoaded())return void $log.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");var t=new L.UtfGrid(e.url,e.pluginOptions);return t.on("mouseover",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseover",e)}),t.on("mouseout",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseout",e)}),t.on("click",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridClick",e)}),t.on("mousemove",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMousemove",e)}),t},layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer(e.url,e.options)}},mapbox:{mustHaveKey:!0,createLayer:function(e){var t=3;isDefined(e.options.version)&&4===e.options.version&&(t=e.options.version);var r=3===t?"//{s}.tiles.mapbox.com/v3/"+e.key+"/{z}/{x}/{y}.png":"//api.tiles.mapbox.com/v4/"+e.key+"/{z}/{x}/{y}.png?access_token="+e.apiKey;return L.tileLayer(r,e.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(e){return Helpers.GeoJSONPlugin.isLoaded()?new L.TileLayer.GeoJSON(e.url,e.pluginOptions,e.options):void 0}},geoJSONShape:{mustHaveUrl:!1,createLayer:function(e){return new L.GeoJSON(e.data,e.options)}},geoJSONAwesomeMarker:{mustHaveUrl:!1,createLayer:function(e){return new L.geoJson(e.data,{pointToLayer:function(t,r){return L.marker(r,{icon:L.AwesomeMarkers.icon(e.icon)})}})}},utfGrid:{mustHaveUrl:!0,createLayer:utfGridCreateLayer},cartodbTiles:{mustHaveKey:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){return e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json",utfGridCreateLayer(e)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png",r=L.tileLayer(t,e.options);e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json";var n=utfGridCreateLayer(e);return L.layerGroup([r,n])}},wms:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wms(e.url,e.options)}},wmts:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wmts(e.url,e.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(e){var t=[];return $it.each(e.options.layers,function(e){t.push(createLayer(e))}),e.options.loadedDefer=function(){for(var t=[],r=0;r<e.options.layers.length;r++){var n=e.options.layers[r].layerOptions.loadedDefer;isDefined(n)&&t.push(n)}return t},L.layerGroup(t)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"SATELLITE";return Helpers.GoogleLayerPlugin.isLoaded()?new L.Google(t,e.options):void 0}},china:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"";return Helpers.ChinaLayerPlugin.isLoaded()?L.tileLayer.chinaProvider(t,e.options):void 0}},agsBase:{mustHaveLayer:!0,createLayer:function(e){return Helpers.AGSBaseLayerPlugin.isLoaded()?L.esri.basemapLayer(e.layer,e.options):void 0}},ags:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSLayerPlugin.isLoaded()){var t=angular.copy(e.options);angular.extend(t,{url:e.url});var r=new lvector.AGS(t);return r.onAdd=function(e){
this.setMap(e)},r.onRemove=function(){this.setMap(null)},r}}},agsFeature:{mustHaveUrl:!0,createLayer:function(e){if(!Helpers.AGSFeatureLayerPlugin.isLoaded())return void $log.warn(errorHeader+" The esri plugin is not loaded.");e.options.url=e.url;var t=L.esri.featureLayer(e.options),r=function(){isDefined(e.options.loadedDefer)&&e.options.loadedDefer.resolve()};return t.on("loading",function(){e.options.loadedDefer=$q.defer(),t.off("load",r),t.on("load",r)}),t}},agsTiled:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSTiledMapLayerPlugin.isLoaded()?(e.options.url=e.url,L.esri.tiledMapLayer(e.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsDynamic:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSDynamicMapLayerPlugin.isLoaded()?(e.options.url=e.url,L.esri.dynamicMapLayer(e.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsImage:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSImageMapLayerPlugin.isLoaded()?(e.options.url=e.url,L.esri.imageMapLayer(e.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsClustered:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSClusteredLayerPlugin.isLoaded()?Helpers.MarkerClusterPlugin.isLoaded()?L.esri.clusteredFeatureLayer(e.url,e.options):void $log.warn(errorHeader+" The markercluster plugin is not loaded."):void $log.warn(errorHeader+" The esri clustered layer plugin is not loaded.")}},agsHeatmap:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSHeatmapLayerPlugin.isLoaded()?Helpers.HeatLayerPlugin.isLoaded()?L.esri.heatmapFeatureLayer(e.url,e.options):void $log.warn(errorHeader+" The heatlayer plugin is not loaded."):void $log.warn(errorHeader+" The esri heatmap layer plugin is not loaded.")}},markercluster:{mustHaveUrl:!1,createLayer:function(e){return Helpers.MarkerClusterPlugin.isLoaded()?new L.MarkerClusterGroup(e.options):void $log.warn(errorHeader+" The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(e){return Helpers.BingLayerPlugin.isLoaded()?new L.BingLayer(e.key,e.options):void 0}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.WebGLHeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(e.options);return isDefined(e.data)&&t.setData(e.data),t}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.HeatLayerPlugin.isLoaded()){var t=new L.heatLayer;return isArray(e.data)&&t.setLatLngs(e.data),isObject(e.options)&&t.setOptions(e.options),t}}},yandex:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"map";return Helpers.YandexLayerPlugin.isLoaded()?new L.Yandex(t,e.options):void 0}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(e){return L.imageOverlay(e.url,e.bounds,e.options)}},iip:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.iip(e.url,e.options)}},custom:{createLayer:function(e){return e.layer instanceof L.Class?angular.copy(e.layer):void $log.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(e){return cartodb.createLayer(e.map,e.url)}}};return{createLayer:createLayer,safeAddLayer:safeAddLayer,safeRemoveLayer:safeRemoveLayer}}]),angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var e=function(e,t,r,n){if(e.innerHTML="",t.error)e.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"</div>";else if("arcgis"===r)for(var a=0;a<t.layers.length;a++){var i=t.layers[a];e.innerHTML+='<div class="info-title" data-layerid="'+i.layerId+'">'+i.layerName+"</div>";for(var o=0;o<i.legend.length;o++){var s=i.legend[o];e.innerHTML+='<div class="inline" data-layerid="'+i.layerId+'"><img src="data:'+s.contentType+";base64,"+s.imageData+'" /></div><div class="info-label" data-layerid="'+i.layerId+'">'+s.label+"</div>"}}else"image"===r&&(e.innerHTML='<img src="'+n+'"/>')},t=function(t,r,n,a){return function(){var i=L.DomUtil.create("div",r);return L.Browser.touch?L.DomEvent.on(i,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"mousewheel",L.DomEvent.stopPropagation)),e(i,t,n,a),i}},r=function(e,t){return function(){for(var r=L.DomUtil.create("div",t),n=0;n<e.colors.length;n++)r.innerHTML+='<div class="outline"><i style="background:'+e.colors[n]+'"></i></div><div class="info-label">'+e.labels[n]+"</div>";return L.Browser.touch?L.DomEvent.on(r,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(r),L.DomEvent.on(r,"mousewheel",L.DomEvent.stopPropagation)),r}};return{getOnAddLegend:t,getOnAddArrayLegend:r,updateLegend:e}}),angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(e,t){function r(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},nominatim:{server:" http://nominatim.openstreetmap.org/search"},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var n=t.isDefined,a=t.isObject,i=t.obtainEffectiveMapId,o={};return{reset:function(){o={}},getDefaults:function(e){var t=i(o,e);return o[t]},getMapCreationDefaults:function(e){var t=i(o,e),r=o[t],a={maxZoom:r.maxZoom,keyboard:r.keyboard,dragging:r.dragging,zoomControl:r.zoomControl,doubleClickZoom:r.doubleClickZoom,scrollWheelZoom:r.scrollWheelZoom,tap:r.tap,touchZoom:r.touchZoom,attributionControl:r.attributionControl,worldCopyJump:r.worldCopyJump,crs:r.crs};if(n(r.minZoom)&&(a.minZoom=r.minZoom),n(r.zoomAnimation)&&(a.zoomAnimation=r.zoomAnimation),n(r.fadeAnimation)&&(a.fadeAnimation=r.fadeAnimation),n(r.markerZoomAnimation)&&(a.markerZoomAnimation=r.markerZoomAnimation),r.map)for(var s in r.map)a[s]=r.map[s];return a},setDefaults:function(e,t){var s=r();n(e)&&(s.doubleClickZoom=n(e.doubleClickZoom)?e.doubleClickZoom:s.doubleClickZoom,s.scrollWheelZoom=n(e.scrollWheelZoom)?e.scrollWheelZoom:s.doubleClickZoom,s.tap=n(e.tap)?e.tap:s.tap,s.touchZoom=n(e.touchZoom)?e.touchZoom:s.doubleClickZoom,s.zoomControl=n(e.zoomControl)?e.zoomControl:s.zoomControl,s.zoomsliderControl=n(e.zoomsliderControl)?e.zoomsliderControl:s.zoomsliderControl,s.attributionControl=n(e.attributionControl)?e.attributionControl:s.attributionControl,s.tileLayer=n(e.tileLayer)?e.tileLayer:s.tileLayer,s.zoomControlPosition=n(e.zoomControlPosition)?e.zoomControlPosition:s.zoomControlPosition,s.keyboard=n(e.keyboard)?e.keyboard:s.keyboard,s.dragging=n(e.dragging)?e.dragging:s.dragging,n(e.controls)&&angular.extend(s.controls,e.controls),a(e.crs)?s.crs=e.crs:n(L.CRS[e.crs])&&(s.crs=L.CRS[e.crs]),n(e.center)&&angular.copy(e.center,s.center),n(e.tileLayerOptions)&&angular.copy(e.tileLayerOptions,s.tileLayerOptions),n(e.maxZoom)&&(s.maxZoom=e.maxZoom),n(e.minZoom)&&(s.minZoom=e.minZoom),n(e.zoomAnimation)&&(s.zoomAnimation=e.zoomAnimation),n(e.fadeAnimation)&&(s.fadeAnimation=e.fadeAnimation),n(e.markerZoomAnimation)&&(s.markerZoomAnimation=e.markerZoomAnimation),n(e.worldCopyJump)&&(s.worldCopyJump=e.worldCopyJump),n(e.map)&&(s.map=e.map),n(e.path)&&(s.path=e.path));var l=i(o,t);return o[l]=s,s}}}]),angular.module("leaflet-directive").service("leafletMarkersHelpers",["$rootScope","$timeout","leafletHelpers","leafletLogger","$compile","leafletGeoJsonHelpers",function(e,t,r,n,a,i){var o=r.isDefined,s=r.defaultTo,l=r.MarkerClusterPlugin,u=r.AwesomeMarkersPlugin,c=r.MakiMarkersPlugin,f=r.ExtraMarkersPlugin,d=r.DomMarkersPlugin,p=r.safeApply,g=r,h=r.isString,v=r.isNumber,m=r.isObject,y={},b=i,$=r.errorHeader,w=n,k=function(e){var t="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach(function(r){t+=r+": "+s(e[r],"undefined")+" \n"}),"[leafletMarker] : \n"+t},A=function(e,t){var r=t?console:w;r.debug(k(e))},C=function(t){if(o(t)&&o(t.type)&&"awesomeMarker"===t.type)return u.isLoaded()||w.error($+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(t);if(o(t)&&o(t.type)&&"makiMarker"===t.type)return c.isLoaded()||w.error($+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(t);if(o(t)&&o(t.type)&&"extraMarker"===t.type)return f.isLoaded()||w.error($+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(t);if(o(t)&&o(t.type)&&"div"===t.type)return new L.divIcon(t);if(o(t)&&o(t.type)&&"dom"===t.type){d.isLoaded()||w.error($+"The DomMarkers Plugin is not loaded.");var r=angular.isFunction(t.getMarkerScope)?t.getMarkerScope():e,n=a(t.template)(r),i=angular.copy(t);return i.element=n[0],new L.DomMarkers.icon(i)}if(o(t)&&o(t.type)&&"icon"===t.type)return t.icon;var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";return o(t)&&o(t.iconUrl)?new L.Icon(t):new L.Icon.Default({iconUrl:s,shadowUrl:l,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},S=function(e){o(y[e])&&y.splice(e,1)},x=function(){y={}},P=function(e,t,r){if(e.closePopup(),o(r)&&o(r.overlays))for(var n in r.overlays)if((r.overlays[n]instanceof L.LayerGroup||r.overlays[n]instanceof L.FeatureGroup)&&r.overlays[n].hasLayer(e))return void r.overlays[n].removeLayer(e);if(o(y))for(var a in y)y[a].hasLayer(e)&&y[a].removeLayer(e);t.hasLayer(e)&&t.removeLayer(e)},D=function(e,t){var r=e._popup._container.offsetHeight,n=new L.Point(e._popup._containerLeft,-r-e._popup._containerBottom),a=t.layerPointToContainerPoint(n);null!==a&&e._popup._adjustPan()},M=function(e,t){a(e._popup._contentNode)(t)},E=function(e,r,n){var a=e._popup._contentNode.innerText||e._popup._contentNode.textContent;a.length<1&&t(function(){E(e,r,n)});var i=e._popup._contentNode.offsetWidth;return e._popup._updateLayout(),e._popup._updatePosition(),e._popup.options.autoPan&&D(e,n),i},O=function(t,r,n){var a=angular.isFunction(r.getMessageScope)?r.getMessageScope():e,i=o(r.compileMessage)?r.compileMessage:!0;if(i){if(!o(t._popup)||!o(t._popup._contentNode))return w.error($+"Popup is invalid or does not have any content."),!1;M(t,a),E(t,r,n)}},T=function(t,r){var n=angular.isFunction(r.getMessageScope)?r.getMessageScope():e,i=angular.isFunction(r.getLabelScope)?r.getLabelScope():n,s=o(r.compileMessage)?r.compileMessage:!0;g.LabelPlugin.isLoaded()&&o(r.label)&&(o(r.label.options)&&r.label.options.noHide===!0&&t.showLabel(),s&&o(t.label)&&a(t.label._container)(i))},H=function(e,t,r,n,a,i,s){if(o(t)){if(!b.validateCoords(e))return w.warn("There are problems with lat-lng data, please verify your marker model"),void P(r,s,i);var l=e===t;if(o(e.iconAngle)&&t.iconAngle!==e.iconAngle&&r.setIconAngle(e.iconAngle),h(e.layer)||h(t.layer)&&(o(i.overlays[t.layer])&&i.overlays[t.layer].hasLayer(r)&&(i.overlays[t.layer].removeLayer(r),r.closePopup()),s.hasLayer(r)||s.addLayer(r)),(v(e.opacity)||v(parseFloat(e.opacity)))&&e.opacity!==t.opacity&&r.setOpacity(e.opacity),h(e.layer)&&t.layer!==e.layer){if(h(t.layer)&&o(i.overlays[t.layer])&&i.overlays[t.layer].hasLayer(r)&&i.overlays[t.layer].removeLayer(r),r.closePopup(),s.hasLayer(r)&&s.removeLayer(r),!o(i.overlays[e.layer]))return void w.error($+"You must use a name of an existing layer");var u=i.overlays[e.layer];if(!(u instanceof L.LayerGroup||u instanceof L.FeatureGroup))return void w.error($+'A marker can only be added to a layer of type "group" or "featureGroup"');u.addLayer(r),s.hasLayer(r)&&e.focus===!0&&r.openPopup()}if(e.draggable!==!0&&t.draggable===!0&&o(r.dragging)&&r.dragging.disable(),e.draggable===!0&&t.draggable!==!0&&(r.dragging?r.dragging.enable():L.Handler.MarkerDrag&&(r.dragging=new L.Handler.MarkerDrag(r),r.options.draggable=!0,r.dragging.enable())),m(e.icon)||m(t.icon)&&(r.setIcon(C()),r.closePopup(),r.unbindPopup(),h(e.message)&&r.bindPopup(e.message,e.popupOptions)),m(e.icon)&&m(t.icon)&&!angular.equals(e.icon,t.icon)){var c=!1;r.dragging&&(c=r.dragging.enabled()),r.setIcon(C(e.icon)),c&&r.dragging.enable(),r.closePopup(),r.unbindPopup(),h(e.message)&&r.bindPopup(e.message,e.popupOptions)}!h(e.message)&&h(t.message)&&(r.closePopup(),r.unbindPopup()),g.LabelPlugin.isLoaded()&&(o(e.label)&&o(e.label.message)?"label"in t&&"message"in t.label&&!angular.equals(e.label.message,t.label.message)?r.updateLabelContent(e.label.message):!angular.isFunction(r.getLabel)||angular.isFunction(r.getLabel)&&!o(r.getLabel())?(r.bindLabel(e.label.message,e.label.options),T(r,e)):T(r,e):(!("label"in e)||"message"in e.label)&&angular.isFunction(r.unbindLabel)&&r.unbindLabel()),h(e.message)&&!h(t.message)&&r.bindPopup(e.message,e.popupOptions),h(e.message)&&h(t.message)&&e.message!==t.message&&r.setPopupContent(e.message);var f=!1;e.focus!==!0&&t.focus===!0&&(r.closePopup(),f=!0),(e.focus===!0&&(!o(t.focus)||t.focus===!1)||l&&e.focus===!0)&&(r.openPopup(),f=!0),t.zIndexOffset!==e.zIndexOffset&&r.setZIndexOffset(e.zIndexOffset);var d=r.getLatLng(),p=h(e.layer)&&g.MarkerClusterPlugin.is(i.overlays[e.layer]);p?f?(e.lat!==t.lat||e.lng!==t.lng)&&(i.overlays[e.layer].removeLayer(r),r.setLatLng([e.lat,e.lng]),i.overlays[e.layer].addLayer(r)):d.lat!==e.lat||d.lng!==e.lng?(i.overlays[e.layer].removeLayer(r),r.setLatLng([e.lat,e.lng]),i.overlays[e.layer].addLayer(r)):e.lat!==t.lat||e.lng!==t.lng?(i.overlays[e.layer].removeLayer(r),r.setLatLng([e.lat,e.lng]),i.overlays[e.layer].addLayer(r)):m(e.icon)&&m(t.icon)&&!angular.equals(e.icon,t.icon)&&(i.overlays[e.layer].removeLayer(r),i.overlays[e.layer].addLayer(r)):(d.lat!==e.lat||d.lng!==e.lng)&&r.setLatLng([e.lat,e.lng])}};return{resetMarkerGroup:S,resetMarkerGroups:x,deleteMarker:P,manageOpenPopup:O,manageOpenLabel:T,createMarker:function(e){if(!o(e)||!b.validateCoords(e))return void w.error($+"The marker definition is not valid.");var t=b.getCoords(e);if(!o(t))return void w.error($+"Unable to get coordinates from markerData.");var r={icon:C(e.icon),title:o(e.title)?e.title:"",draggable:o(e.draggable)?e.draggable:!1,clickable:o(e.clickable)?e.clickable:!0,riseOnHover:o(e.riseOnHover)?e.riseOnHover:!1,zIndexOffset:o(e.zIndexOffset)?e.zIndexOffset:0,iconAngle:o(e.iconAngle)?e.iconAngle:0};for(var n in e)e.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(r[n]=e[n]);var a=new L.marker(t,r);return h(e.message)||a.unbindPopup(),a},addMarkerToGroup:function(e,t,r,n){return h(t)?l.isLoaded()?(o(y[t])||(y[t]=new L.MarkerClusterGroup(r),n.addLayer(y[t])),void y[t].addLayer(e)):void w.error($+"The MarkerCluster plugin is not loaded."):void w.error($+"The marker group you have specified is invalid.")},listenMarkerEvents:function(e,t,r,n,a){e.on("popupopen",function(){p(r,function(){(o(e._popup)||o(e._popup._contentNode))&&(t.focus=!0,O(e,t,a))})}),e.on("popupclose",function(){p(r,function(){t.focus=!1})}),e.on("add",function(){p(r,function(){"label"in t&&T(e,t)})})},updateMarker:H,addMarkerWatcher:function(e,t,r,n,a,i){var l=g.getObjectArrayPath("markers."+t);i=s(i,!0);var u=r.$watch(l,function(i,s){return o(i)?void H(i,s,e,t,r,n,a):(P(e,a,n),void u())},i)},string:k,log:A}}]),angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","leafletLogger","leafletHelpers",function(e,t,r){function n(e){return e.filter(function(e){return c(e)}).map(function(e){return a(e)})}function a(e){return l(e)?new L.LatLng(e[0],e[1]):new L.LatLng(e.lat,e.lng)}function i(e){return e.map(function(e){return n(e)})}function o(e,t){for(var r={},n=0;n<d.length;n++){var a=d[n];s(e[a])?r[a]=e[a]:s(t.path[a])&&(r[a]=t.path[a])}return r}var s=r.isDefined,l=r.isArray,u=r.isNumber,c=r.isValidPoint,f=t,d=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],p=function(e,t){for(var r={},n=0;n<d.length;n++){var a=d[n];s(t[a])&&(r[a]=t[a])}e.setStyle(t)},g=function(e){if(!l(e))return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!c(r))return!1}return!0},h={polyline:{isValid:function(e){var t=e.latlngs;return g(t)},createPath:function(e){return new L.Polyline([],e)},setPath:function(e,t){e.setLatLngs(n(t.latlngs)),p(e,t)}},multiPolyline:{isValid:function(e){var t=e.latlngs;if(!l(t))return!1;for(var r in t){var n=t[r];if(!g(n))return!1}return!0},createPath:function(e){return new L.multiPolyline([[[0,0],[1,1]]],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),p(e,t)}},polygon:{isValid:function(e){var t=e.latlngs;return g(t)},createPath:function(e){return new L.Polygon([],e)},setPath:function(e,t){e.setLatLngs(n(t.latlngs)),p(e,t)}},multiPolygon:{isValid:function(e){var t=e.latlngs;if(!l(t))return!1;for(var r in t){var n=t[r];if(!g(n))return!1}return!0},createPath:function(e){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),p(e,t)}},rectangle:{isValid:function(e){var t=e.latlngs;if(!l(t)||2!==t.length)return!1;for(var r in t){var n=t[r];if(!c(n))return!1}return!0},createPath:function(e){return new L.Rectangle([[0,0],[1,1]],e)},setPath:function(e,t){e.setBounds(new L.LatLngBounds(n(t.latlngs))),p(e,t)}},circle:{isValid:function(e){var t=e.latlngs;return c(t)&&u(e.radius)},createPath:function(e){return new L.Circle([0,0],1,e)},setPath:function(e,t){e.setLatLng(a(t.latlngs)),s(t.radius)&&e.setRadius(t.radius),p(e,t)}},circleMarker:{isValid:function(e){var t=e.latlngs;return c(t)&&u(e.radius)},createPath:function(e){return new L.CircleMarker([0,0],e)},setPath:function(e,t){e.setLatLng(a(t.latlngs)),s(t.radius)&&e.setRadius(t.radius),p(e,t)}}},v=function(e){var t={};return e.latlngs&&(t.latlngs=e.latlngs),e.radius&&(t.radius=e.radius),t};return{setPathOptions:function(e,t,r){s(t)||(t="polyline"),h[t].setPath(e,r)},createPath:function(e,t,r){s(t.type)||(t.type="polyline");var n=o(t,r),a=v(t);return h[t.type].isValid(a)?h[t.type].createPath(n):void f.error("[AngularJS - Leaflet] Invalid data passed to the "+t.type+" path")}}}]),angular.module("leaflet-directive").service("leafletWatchHelpers",function(){var e=function(e,t,r,n,a){var i=e[t](r,function(e,t){a(e,t),n.doWatch||i()},n.isDeep);return i},t=function(t,r,n,a){return e(t,"$watch",r,n,a)},r=function(t,r,n,a){return e(t,"$watchCollection",r,n,a)};return{maybeWatch:t,maybeWatchCollection:r}}),angular.module("leaflet-directive").service("leafletLogger",["nemSimpleLogger",function(e){return e.spawn()}]),angular.module("leaflet-directive").factory("nominatimService",["$q","$http","leafletHelpers","leafletMapDefaults",function(e,t,r,n){var a=r.isDefined;return{query:function(r,i){var o=n.getDefaults(i),s=o.nominatim.server,l=e.defer();return t.get(s,{params:{format:"json",limit:1,q:r}}).success(function(e){e.length>0&&a(e[0].boundingbox)?l.resolve(e[0]):l.reject("[Nominatim] Invalid address")}),l.promise}}}]),angular.module("leaflet-directive").directive("bounds",["leafletLogger","$timeout","$http","leafletHelpers","nominatimService","leafletBoundsHelpers",function(e,t,r,n,a,i){var o=e;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(e,r,s,l){var u=n.isDefined,c=i.createLeafletBounds,f=l[0].getLeafletScope(),d=l[0],p=n.errorHeader+" [Bounds] ",g=function(e){return 0===e._southWest.lat&&0===e._southWest.lng&&0===e._northEast.lat&&0===e._northEast.lng};d.getMap().then(function(r){f.$on("boundsChanged",function(e){var n=e.currentScope,a=r.getBounds();if(!g(a)&&!n.settingBoundsFromScope){n.settingBoundsFromLeaflet=!0;var i={northEast:{lat:a._northEast.lat,lng:a._northEast.lng},southWest:{lat:a._southWest.lat,lng:a._southWest.lng},options:a.options};angular.equals(n.bounds,i)||(n.bounds=i),t(function(){n.settingBoundsFromLeaflet=!1})}});var n;f.$watch("bounds",function(i){if(!e.settingBoundsFromLeaflet){if(u(i.address)&&i.address!==n)return e.settingBoundsFromScope=!0,a.query(i.address,s.id).then(function(e){var t=e.boundingbox,n=[[t[0],t[2]],[t[1],t[3]]];r.fitBounds(n)},function(e){o.error(p+" "+e+".")}),n=i.address,void t(function(){e.settingBoundsFromScope=!1});var l=c(i);l&&!r.getBounds().equals(l)&&(e.settingBoundsFromScope=!0,r.fitBounds(l,i.options),t(function(){e.settingBoundsFromScope=!1}))}},!0)})}}}]);var centerDirectiveTypes=["center","lfCenter"],centerDirectives={};centerDirectiveTypes.forEach(function(e){centerDirectives[e]=["leafletLogger","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletEvents",function(t,r,n,a,i,o,s,l){var u,c=o.isDefined,f=o.isNumber,d=o.isSameCenterOnMap,p=o.safeApply,g=o.isValidCenter,h=s.isValidBounds,v=o.isUndefinedOrEmpty,m=o.errorHeader,y=t,b=function(e,t){return c(e)&&h(e)&&v(t)};return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){u=r.defer(),this.getCenter=function(){return u.promise}},link:function(t,r,o,h){var v=h.getLeafletScope(),L=v[e];h.getMap().then(function(t){var r=i.getDefaults(o.id);if(-1!==o[e].search("-"))return y.error(m+' The "center" variable can\'t use a "-" on its key name: "'+o[e]+'".'),void t.setView([r.center.lat,r.center.lng],r.center.zoom);if(b(v.bounds,L))t.fitBounds(s.createLeafletBounds(v.bounds),v.bounds.options),L=t.getCenter(),p(v,function(r){angular.extend(r[e],{lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom(),autoDiscover:!1})}),p(v,function(e){var r=t.getBounds();e.bounds={northEast:{lat:r._northEast.lat,lng:r._northEast.lng},southWest:{lat:r._southWest.lat,lng:r._southWest.lng}}});else{if(!c(L))return y.error(m+' The "center" property is not defined in the main scope'),void t.setView([r.center.lat,r.center.lng],r.center.zoom);c(L.lat)&&c(L.lng)||c(L.autoDiscover)||angular.copy(r.center,L)}var h,$;if("yes"===o.urlHashCenter){var w=function(){var e,t=n.search();if(c(t.c)){var r=t.c.split(":");3===r.length&&(e={lat:parseFloat(r[0]),lng:parseFloat(r[1]),zoom:parseInt(r[2],10)})}return e};h=w(),v.$on("$locationChangeSuccess",function(r){var n=r.currentScope,a=w();c(a)&&!d(a,t)&&angular.extend(n[e],{lat:a.lat,lng:a.lng,zoom:a.zoom})})}v.$watch(e,function(e){return v.settingCenterFromLeaflet?void 0:(c(h)&&(angular.copy(h,e),h=void 0),g(e)||e.autoDiscover===!0?e.autoDiscover===!0?(f(e.zoom)||t.setView([r.center.lat,r.center.lng],r.center.zoom),void t.locate(f(e.zoom)&&e.zoom>r.center.zoom?{setView:!0,maxZoom:e.zoom}:c(r.maxZoom)?{setView:!0,maxZoom:r.maxZoom}:{setView:!0})):void($&&d(e,t)||(v.settingCenterFromScope=!0,t.setView([e.lat,e.lng],e.zoom),l.notifyCenterChangedToBounds(v,t),a(function(){v.settingCenterFromScope=!1}))):void y.warn(m+" invalid 'center'"))},!0),t.whenReady(function(){$=!0}),t.on("moveend",function(){u.resolve(),l.notifyCenterUrlHashChanged(v,t,o,n.search()),d(L,t)||v.settingCenterFromScope||(v.settingCenterFromLeaflet=!0,p(v,function(r){v.settingCenterFromScope||angular.extend(r[e],{lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom(),autoDiscover:!1}),l.notifyCenterChangedToBounds(v,t),a(function(){v.settingCenterFromLeaflet=!1})}))}),L.autoDiscover===!0&&t.on("locationerror",function(){y.warn(m+" The Geolocation API is unauthorized on this page."),g(L)?(t.setView([L.lat,L.lng],L.zoom),l.notifyCenterChangedToBounds(v,t)):(t.setView([r.center.lat,r.center.lng],r.center.zoom),l.notifyCenterChangedToBounds(v,t))})})}}}]}),centerDirectiveTypes.forEach(function(e){angular.module("leaflet-directive").directive(e,centerDirectives[e])}),angular.module("leaflet-directive").directive("controls",["leafletLogger","leafletHelpers","leafletControlHelpers",function(e,t,r){var n=e;return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(e,a,i,o){if(o){var s=r.createControl,l=r.isValidControlType,u=o.getLeafletScope(),c=t.isDefined,f=t.isArray,d={},p=t.errorHeader+" [Controls] ";o.getMap().then(function(e){u.$watchCollection("controls",function(t){for(var r in d)c(t[r])||(e.hasControl(d[r])&&e.removeControl(d[r]),delete d[r]);for(var a in t){var i,o=c(t[a].type)?t[a].type:a;if(!l(o))return void n.error(p+" Invalid control type: "+o+".");if("custom"!==o)i=s(o,t[a]),e.addControl(i),d[a]=i;else{var u=t[a];if(f(u))for(var g in u){var h=u[g];e.addControl(h),d[a]=c(d[a])?d[a].concat([h]):[h]}else e.addControl(u),d[a]=u}}})})}}}}]),angular.module("leaflet-directive").directive("decorations",["leafletLogger","leafletHelpers",function(e,t){var r=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,n,a,i){function o(e){return c(e)&&c(e.coordinates)&&(u.isLoaded()||r.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(e.coordinates)}function s(e,t){return c(e)&&c(t)&&c(t.coordinates)&&c(t.patterns)?(e.setPaths(t.coordinates),e.setPatterns(t.patterns),e):void 0}var l=i.getLeafletScope(),u=t.PolylineDecoratorPlugin,c=t.isDefined,f={};i.getMap().then(function(e){l.$watch("decorations",function(t){for(var r in f)c(t[r])&&angular.equals(t[r],f)||(e.removeLayer(f[r]),delete f[r]);for(var n in t){var a=t[n],i=o(a);c(i)&&(f[n]=i,e.addLayer(i),s(i,a))}},!0)})}}}]),angular.module("leaflet-directive").directive("eventBroadcast",["leafletLogger","$rootScope","leafletHelpers","leafletEvents","leafletIterators",function(e,t,r,n,a){var i=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,o,s){var l=r.isObject,u=r.isDefined,c=s.getLeafletScope(),f=c.eventBroadcast,d=n.getAvailableMapEvents(),p=n.addEvents;s.getMap().then(function(e){var t=[],r="broadcast";u(f.map)?l(f.map)?("emit"!==f.map.logic&&"broadcast"!==f.map.logic?i.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):r=f.map.logic,l(f.map.enable)&&f.map.enable.length>=0?a.each(f.map.enable,function(e){-1===t.indexOf(e)&&-1!==d.indexOf(e)&&t.push(e)}):i.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.")):i.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model."):t=d,p(e,t,"eventName",c,r)})}}}]),angular.module("leaflet-directive").directive("geojson",["leafletLogger","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators","leafletGeoJsonEvents",function(e,t,r,n,a,i,o,s){var l=a.maybeWatch,u=n.watchOptions,c=i.extend,f=n,d=o;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,a,i){var o=n.isDefined,p=i.getLeafletScope(),g={},h=!1;i.getMap().then(function(e){var t=p.geojsonWatchOptions||u,i=function(e,t){var r;return r=angular.isFunction(e.onEachFeature)?e.onEachFeature:function(r,i){n.LabelPlugin.isLoaded()&&o(r.properties.description)&&i.bindLabel(r.properties.description),s.bindEvents(i,null,r,p,t,{resetStyleOnMouseout:e.resetStyleOnMouseout,mapId:a.id})}},v=f.isDefined(a.geojsonNested)&&f.isTruthy(a.geojsonNested),m=function(){if(g){var t=function(t){o(t)&&e.hasLayer(t)&&e.removeLayer(t)};return v?void d.each(g,function(e){t(e)}):void t(g)}},y=function(t,n){var s=angular.copy(t);if(o(s)&&o(s.data)){var l=i(s,n);o(s.options)||(s.options={style:s.style,filter:s.filter,onEachFeature:l,pointToLayer:s.pointToLayer});var u=L.geoJson(s.data,s.options);n&&f.isString(n)?g[n]=u:g=u,u.addTo(e),h||(h=!0,r.setGeoJSON(g,a.id))}},b=function(e){if(m(),v){if(!e||!Object.keys(e).length)return;return void d.each(e,function(e,t){y(e,t)})}y(e)};c(a.id,"geojson",b,m),l(p,"geojson",t,function(e){b(e)})})}}}]),angular.module("leaflet-directive").directive("layercontrol",["$filter","leafletLogger","leafletData","leafletHelpers",function(e,t,r,n){var a=t;return{restrict:"E",scope:{icons:"=?",autoHideOpacity:"=?",showGroups:"=?",title:"@",baseTitle:"@",overlaysTitle:"@"},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(e,t,i){a.debug("[Angular Directive - Layers] layers",e,t);var o=n.safeApply,s=n.isDefined;angular.extend(e,{baselayer:"",oldGroup:"",layerProperties:{},groupProperties:{},rangeIsSupported:n.rangeIsSupported(),changeBaseLayer:function(t,a){n.safeApply(e,function(n){n.baselayer=t,r.getMap().then(function(a){r.getLayers().then(function(r){if(!a.hasLayer(r.baselayers[t])){for(var i in n.layers.baselayers)n.layers.baselayers[i].icon=n.icons.unradio,a.hasLayer(r.baselayers[i])&&a.removeLayer(r.baselayers[i]);a.addLayer(r.baselayers[t]),n.layers.baselayers[t].icon=e.icons.radio}})})}),a.preventDefault()},moveLayer:function(t,r,n){var a=Object.keys(e.layers.baselayers).length;if(r>=1+a&&r<=e.overlaysArray.length+a){var i;for(var s in e.layers.overlays)if(e.layers.overlays[s].index===r){i=e.layers.overlays[s];break}i&&o(e,function(){i.index=t.index,t.index=r})}n.stopPropagation(),n.preventDefault()},initIndex:function(t,r){var n=Object.keys(e.layers.baselayers).length;

t.index=s(t.index)?t.index:r+n+1},initGroup:function(t){e.groupProperties[t]=e.groupProperties[t]?e.groupProperties[t]:{}},toggleOpacity:function(t,r){if(r.visible){if(e.autoHideOpacity&&!e.layerProperties[r.name].opacityControl)for(var n in e.layerProperties)e.layerProperties[n].opacityControl=!1;e.layerProperties[r.name].opacityControl=!e.layerProperties[r.name].opacityControl}t.stopPropagation(),t.preventDefault()},toggleLegend:function(t){e.layerProperties[t.name].showLegend=!e.layerProperties[t.name].showLegend},showLegend:function(t){return t.legend&&e.layerProperties[t.name].showLegend},unsafeHTML:function(e){return i.trustAsHtml(e)},getOpacityIcon:function(t){return t.visible&&e.layerProperties[t.name].opacityControl?e.icons.close:e.icons.open},getGroupIcon:function(t){return t.visible?e.icons.check:e.icons.uncheck},changeOpacity:function(t){var n=e.layerProperties[t.name].opacity;r.getMap().then(function(a){r.getLayers().then(function(r){var i;for(var o in e.layers.overlays)if(e.layers.overlays[o]===t){i=r.overlays[o];break}a.hasLayer(i)&&(i.setOpacity&&i.setOpacity(n/100),i.getLayers&&i.eachLayer&&i.eachLayer(function(e){e.setOpacity&&e.setOpacity(n/100)}))})})},changeGroupVisibility:function(t){if(s(e.groupProperties[t])){var r=e.groupProperties[t].visible;for(var n in e.layers.overlays){var a=e.layers.overlays[n];a.group===t&&(a.visible=r)}}}});var l=t.get(0);L.Browser.touch?L.DomEvent.on(l,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(l),L.DomEvent.on(l,"mousewheel",L.DomEvent.stopPropagation))}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><h4 ng-if="title">{{ title }}</h4><div class="lf-baselayers"><h5 class="lf-title" ng-if="baseTitle">{{ baseTitle }}</h5><div class="lf-row" ng-repeat="(key, layer) in baselayersArray"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label></div></div><div class="lf-overlays"><h5 class="lf-title" ng-if="overlaysTitle">{{ overlaysTitle }}</h5><div class="lf-container"><div class="lf-row" ng-repeat="layer in (o = (overlaysArray | orderBy:\'index\':order))" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol-group" ng-if="showGroups &amp;&amp; layer.group &amp;&amp; layer.group != o[$index-1].group"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-change="changeGroupVisibility(layer.group)" ng-model="groupProperties[layer.group].visible"/> <i class="lf-icon lf-icon-check" ng-class="getGroupIcon(groupProperties[layer.group])"></i><div class="lf-text">{{ layer.group }}</div></label><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"></i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"></i> <i class="lf-icon lf-toggle-legend" ng-class="icons.toggleLegend" ng-if="layer.legend" ng-click="toggleLegend(layer)"></i> <i class="lf-icon lf-open" ng-class="getOpacityIcon(layer)" ng-click="toggleOpacity($event, layer)"></i></div><div class="lf-legend" ng-if="showLegend(layer)" ng-bind-html="unsafeHTML(layer.legend)"></div><div class="lf-opacity clearfix" ng-if="layer.visible &amp;&amp; layerProperties[layer.name].opacityControl"><label ng-if="rangeIsSupported" class="pull-left" style="width: 50%">0</label><label ng-if="rangeIsSupported" class="pull-left text-right" style="width: 50%">100</label><input ng-if="rangeIsSupported" class="clearfix" type="range" min="0" max="100" class="lf-opacity-control" ng-model="layerProperties[layer.name].opacity" ng-change="changeOpacity(layer)"/><h6 ng-if="!rangeIsSupported">Range is not supported in this browser</h6></div></div></div></div></div>',link:function(e,t,a,i){var o=n.isDefined,s=i.getLeafletScope(),l=s.layers;e.$watch("icons",function(){var t={uncheck:"fa fa-square-o",check:"fa fa-check-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up",toggleLegend:"fa fa-pencil-square-o"};o(e.icons)?(angular.extend(t,e.icons),angular.extend(e.icons,t)):e.icons=t}),a.order=!o(a.order)||"normal"!==a.order&&"reverse"!==a.order?"normal":a.order,e.order="normal"===a.order,e.orderNumber="normal"===a.order?-1:1,e.layers=l,i.getMap().then(function(t){s.$watch("layers.baselayers",function(n){var a={};r.getLayers().then(function(r){var i;for(i in n){var o=n[i];o.icon=e.icons[t.hasLayer(r.baselayers[i])?"radio":"unradio"],a[i]=o}e.baselayersArray=a})}),s.$watch("layers.overlays",function(t){var n=[],a={};r.getLayers().then(function(r){var i;for(i in t){var s=t[i];s.icon=e.icons[s.visible?"check":"uncheck"],n.push(s),o(e.layerProperties[s.name])||(e.layerProperties[s.name]={opacity:o(s.layerOptions.opacity)?100*s.layerOptions.opacity:100,opacityControl:!1,showLegend:!0}),o(s.group)&&(o(e.groupProperties[s.group])||(e.groupProperties[s.group]={visible:!1}),a[s.group]=o(a[s.group])?a[s.group]:{count:0,visibles:0},a[s.group].count++,s.visible&&a[s.group].visibles++),o(s.index)&&r.overlays[i].setZIndex&&r.overlays[i].setZIndex(t[i].index)}for(i in a)e.groupProperties[i].visible=a[i].visibles===a[i].count;e.overlaysArray=n})},!0)})}}}]),angular.module("leaflet-directive").directive("layers",["leafletLogger","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(e,t,r,n,a,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(e){e._leafletLayers=t.defer(),this.getLayers=function(){return e._leafletLayers.promise}}],link:function(e,t,o,s){var l=n.isDefined,u={},c=s.getLeafletScope(),f=c.layers,d=a.createLayer,p=a.safeAddLayer,g=a.safeRemoveLayer,h=i.updateLayersControl,v=!1;s.getMap().then(function(t){e._leafletLayers.resolve(u),r.setLayers(u,o.id),u.baselayers={},u.overlays={};var n=o.id,a=!1;for(var i in f.baselayers){var s=d(f.baselayers[i]);l(s)?(u.baselayers[i]=s,f.baselayers[i].top===!0&&(p(t,u.baselayers[i]),a=!0)):delete f.baselayers[i]}!a&&Object.keys(u.baselayers).length>0&&p(t,u.baselayers[Object.keys(f.baselayers)[0]]);for(i in f.overlays){"cartodb"===f.overlays[i].type;var m=d(f.overlays[i]);l(m)?(u.overlays[i]=m,f.overlays[i].visible===!0&&p(t,u.overlays[i])):delete f.overlays[i]}c.$watch("layers.baselayers",function(e,r){if(angular.equals(e,r))return v=h(t,n,v,e,f.overlays,u),!0;for(var a in u.baselayers)(!l(e[a])||e[a].doRefresh)&&(t.hasLayer(u.baselayers[a])&&t.removeLayer(u.baselayers[a]),delete u.baselayers[a],e[a]&&e[a].doRefresh&&(e[a].doRefresh=!1));for(var i in e)if(l(u.baselayers[i]))e[i].top!==!0||t.hasLayer(u.baselayers[i])?e[i].top===!1&&t.hasLayer(u.baselayers[i])&&t.removeLayer(u.baselayers[i]):p(t,u.baselayers[i]);else{var o=d(e[i]);l(o)&&(u.baselayers[i]=o,e[i].top===!0&&p(t,u.baselayers[i]))}var s=!1;for(var c in u.baselayers)if(t.hasLayer(u.baselayers[c])){s=!0;break}!s&&Object.keys(u.baselayers).length>0&&p(t,u.baselayers[Object.keys(u.baselayers)[0]]),v=h(t,n,v,e,f.overlays,u)},!0),c.$watch("layers.overlays",function(e,r){if(angular.equals(e,r))return v=h(t,n,v,f.baselayers,e,u),!0;for(var a in u.overlays)(!l(e[a])||e[a].doRefresh)&&(t.hasLayer(u.overlays[a])&&g(t,u.overlays[a],e[a].layerOptions),delete u.overlays[a],e[a]&&e[a].doRefresh&&(e[a].doRefresh=!1));for(var i in e){if(l(u.overlays[i]))e[i].visible&&!t.hasLayer(u.overlays[i])?p(t,u.overlays[i]):e[i].visible===!1&&t.hasLayer(u.overlays[i])&&g(t,u.overlays[i],e[i].layerOptions);else{var o=d(e[i]);if(!l(o))continue;u.overlays[i]=o,e[i].visible===!0&&p(t,u.overlays[i])}e[i].visible&&t._loaded&&e[i].data&&"heatmap"===e[i].type&&(u.overlays[i].setData(e[i].data),u.overlays[i].update())}v=h(t,n,v,f.baselayers,e,u)},!0)})}}}]),angular.module("leaflet-directive").directive("legend",["leafletLogger","$http","leafletHelpers","leafletLegendHelpers",function(e,t,r,n){var a=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,i,o,s){var l,u,c,f,d=r.isArray,p=r.isDefined,g=r.isFunction,h=s.getLeafletScope(),v=h.legend;h.$watch("legend",function(e){p(e)&&(l=e.legendClass?e.legendClass:"legend",u=e.position||"bottomright",f=e.type||"arcgis")},!0),s.getMap().then(function(e){h.$watch("legend",function(t){return p(t)?p(t.url)||"arcgis"!==f||d(t.colors)&&d(t.labels)&&t.colors.length===t.labels.length?p(t.url)?void a.info("[AngularJS - Leaflet] loading legend service."):(p(c)&&(c.removeFrom(e),c=null),c=L.control({position:u}),"arcgis"===f&&(c.onAdd=n.getOnAddArrayLegend(t,l)),void c.addTo(e)):void a.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set."):void(p(c)&&(c.removeFrom(e),c=null))}),h.$watch("legend.url",function(r){p(r)&&t.get(r).success(function(t){p(c)?n.updateLegend(c.getContainer(),t,f,r):(c=L.control({position:u}),c.onAdd=n.getOnAddLegend(t,l,f,r),c.addTo(e)),p(v.loadedData)&&g(v.loadedData)&&v.loadedData()}).error(function(){a.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]),angular.module("leaflet-directive").directive("markers",["leafletLogger","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletMarkerEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(e,t,r,n,a,i,o,s,l,u,c){var f=a.isDefined,d=a.errorHeader,p=a,g=a.isString,h=o.addMarkerWatcher,v=o.updateMarker,m=o.listenMarkerEvents,y=o.addMarkerToGroup,b=o.createMarker,$=o.deleteMarker,w=l,k=a.watchOptions,A=u.maybeWatch,C=c.extend,S=e,x=function(e,t,r){if(Object.keys(e).length){if(r&&g(r)){if(!e[r]||!Object.keys(e[r]).length)return;return e[r][t]}return e[t]}},P=function(e,t,r,n){return n&&g(n)?(f(t[n])||(t[n]={}),t[n][r]=e):t[r]=e,e},D=function(e,t,r,n,a,i){if(!g(e))return S.error(d+" A layername must be a string"),!1;if(!f(t))return S.error(d+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!f(t.overlays)||!f(t.overlays[e]))return S.error(d+' A marker can only be added to a layer of type "group"'),!1;var o=t.overlays[e];return o instanceof L.LayerGroup||o instanceof L.FeatureGroup?(o.addLayer(n),!a&&i.hasLayer(n)&&r.focus===!0&&n.openPopup(),!0):(S.error(d+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},M=function(e,t,r,n,a,i,o,l,u){for(var c in e)if(!u[c])if(-1===c.search("-")){var g=p.copy(e[c]),L=p.getObjectDotPath(l?[l,c]:[c]),$=x(a,c,l);if(f($)){var w=f(w)?t[c]:void 0;v(g,w,$,L,i,n,r)}else{var k=b(g),A=(g?g.layer:void 0)||l;if(!f(k)){S.error(d+" Received invalid data on the marker "+c+".");continue}if(P(k,a,c,l),f(g.message)&&k.bindPopup(g.message,g.popupOptions),f(g.group)){var C=f(g.groupOption)?g.groupOption:null;y(k,g.group,C,r)}if(p.LabelPlugin.isLoaded()&&f(g.label)&&f(g.label.message)&&k.bindLabel(g.label.message,g.label.options),f(g)&&(f(g.layer)||f(l))){var M=D(A,n,g,k,o.individual.doWatch,r);if(!M)continue}else f(g.group)||(r.addLayer(k),o.individual.doWatch||g.focus!==!0||k.openPopup());o.individual.doWatch&&h(k,L,i,n,r,o.individual.isDeep),m(k,g,i,o.individual.doWatch,r),s.bindEvents(k,L,g,i,A)}}else S.error('The marker can\'t use a "-" on his key name: "'+c+'".')},E=function(e,t,r,n,a){var i,o,s=!1,l=!1,u=f(t);for(var c in r)s||(S.debug(d+"[markers] destroy: "),s=!0),u&&(o=e[c],i=t[c],l=angular.equals(o,i)&&n),f(e)&&Object.keys(e).length&&f(e[c])&&Object.keys(e[c]).length&&!l||a&&p.isFunction(a)&&a(o,i,c)},O=function(e,t,r,n,a){E(e,t,r,!1,function(e,t,i){S.debug(d+"[marker] is deleting marker: "+i),$(r[i],n,a),delete r[i]})},T=function(e,t,r){var n={};return E(e,t,r,!0,function(e,t,r){S.debug(d+"[marker] is already rendered, marker: "+r),n[r]=e}),n};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,t,a,i){var o=i[0],s=o.getLeafletScope();o.getMap().then(function(e){var t,o={};t=f(i[1])?i[1].getLayers:function(){var e=r.defer();return e.resolve(),e.promise};var l=s.markersWatchOptions||k;f(a.watchMarkers)&&(l.doWatch=l.individual.doWatch=!f(a.watchMarkers)||p.isTruthy(a.watchMarkers));var u=f(a.markersNested)&&p.isTruthy(a.markersNested);t().then(function(t){var r=function(r,n){return u?void w.each(r,function(r,a){var i=f(i)?n[a]:void 0;O(r,i,o[a],e,t)}):void O(r,n,o,e,t)},i=function(n,a){r(n,a);var i=null;return u?void w.each(n,function(r,u){var c=f(c)?a[u]:void 0;i=T(n[u],c,o[u]),M(r,a,e,t,o,s,l,u,i)}):(i=T(n,a,o),void M(n,a,e,t,o,s,l,void 0,i))};C(a.id,"markers",i,r),n.setMarkers(o,a.id),A(s,"markers",l,function(e,t){i(e,t)})})})}}}]),angular.module("leaflet-directive").directive("maxbounds",["leafletLogger","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(e,t,r,n){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,a,i){var o=i.getLeafletScope(),s=r.isValidBounds,l=n.isNumber;i.getMap().then(function(e){o.$watch("maxbounds",function(t){if(!s(t))return void e.setMaxBounds();var n=r.createLeafletBounds(t);l(t.pad)&&(n=n.pad(t.pad)),e.setMaxBounds(n),a.center||a.lfCenter||e.fitBounds(n)})})}}}]),angular.module("leaflet-directive").directive("paths",["leafletLogger","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletEvents",function(e,t,r,n,a,i,o){var s=e;return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,l,u,c){var f=c[0],d=a.isDefined,p=a.isString,g=f.getLeafletScope(),h=g.paths,v=i.createPath,m=o.bindPathEvents,y=i.setPathOptions;f.getMap().then(function(e){var i,o=n.getDefaults(u.id);i=d(c[1])?c[1].getLayers:function(){var e=t.defer();return e.resolve(),e.promise},d(h)&&i().then(function(t){var n={};r.setPaths(n,u.id);var i=!d(u.watchPaths)||"true"===u.watchPaths,l=function(r,n){var a=g.$watch('paths["'+n+'"]',function(n,i){if(!d(n)){if(d(i.layer))for(var o in t.overlays){var s=t.overlays[o];s.removeLayer(r)}return e.removeLayer(r),void a()}y(r,n.type,n)},!0)};g.$watchCollection("paths",function(r){for(var u in n)d(r[u])||(e.removeLayer(n[u]),delete n[u]);for(var c in r)if(0!==c.search("\\$"))if(-1===c.search("-")){if(!d(n[c])){var f=r[c],h=v(c,r[c],o);if(d(h)&&d(f.message)&&h.bindPopup(f.message,f.popupOptions),a.LabelPlugin.isLoaded()&&d(f.label)&&d(f.label.message)&&h.bindLabel(f.label.message,f.label.options),d(f)&&d(f.layer)){if(!p(f.layer)){s.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!d(t)){s.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!d(t.overlays)||!d(t.overlays[f.layer])){s.error('[AngularJS - Leaflet] A path can only be added to a layer of type "group"');continue}var b=t.overlays[f.layer];if(!(b instanceof L.LayerGroup||b instanceof L.FeatureGroup)){s.error('[AngularJS - Leaflet] Adding a path to an overlay needs a overlay of the type "group" or "featureGroup"');continue}n[c]=h,b.addLayer(h),i?l(h,c):y(h,f.type,f)}else d(h)&&(n[c]=h,e.addLayer(h),i?l(h,c):y(h,f.type,f));m(h,c,f,g)}}else s.error('[AngularJS - Leaflet] The path name "'+c+'" is not valid. It must not include "-" and a number.')})})})}}}]),angular.module("leaflet-directive").directive("tiles",["leafletLogger","leafletData","leafletMapDefaults","leafletHelpers",function(e,t,r,n){var a=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,i,o,s){var l=n.isDefined,u=s.getLeafletScope(),c=u.tiles;return l(c)&&l(c.url)?void s.getMap().then(function(e){var n,a=r.getDefaults(o.id);u.$watch("tiles",function(r){var i=a.tileLayerOptions,s=a.tileLayer;return!l(r.url)&&l(n)?void e.removeLayer(n):l(n)?l(r.url)&&l(r.options)&&!angular.equals(r.options,i)?(e.removeLayer(n),i=a.tileLayerOptions,angular.copy(r.options,i),s=r.url,n=L.tileLayer(s,i),n.addTo(e),void t.setTiles(n,o.id)):void(l(r.url)&&n.setUrl(r.url)):(l(r.options)&&angular.copy(r.options,i),l(r.url)&&(s=r.url),n=L.tileLayer(s,i),n.addTo(e),void t.setTiles(n,o.id))},!0)}):void a.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),["markers","geojson"].forEach(function(e){angular.module("leaflet-directive").directive(e+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(t,r,n,a,i){var o=i.isDefined,s=i.errorHeader,l=i.isObject,u=i.watchOptions,c=t;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(t,r,n,a){var i=a[0],f=i.getLeafletScope();i.getMap().then(function(){o(t[e+"WatchOptions"])&&(l(t[e+"WatchOptions"])?angular.extend(u,t[e+"WatchOptions"]):c.error(s+"["+e+"WatchOptions] is not an object"),f[e+"WatchOptions"]=u)})}}}])}),angular.module("leaflet-directive").factory("leafletEventsHelpersFactory",["$rootScope","$q","leafletLogger","leafletHelpers",function(e,t,r,n){var a=n.safeApply,i=n.isDefined,o=n.isObject,s=n.isArray,l=n.errorHeader,u=r,c=function(e,t){this.rootBroadcastName=e,this.lObjectType=t};return c.prototype.getAvailableEvents=function(){return[]},c.prototype.genDispatchEvent=function(e,t,r,n,a,i,o,s){var l=this;return function(u){var c=l.rootBroadcastName+"."+e;l.fire(r,c,t,u,u.target||n,i,a,o,s)}},c.prototype.fire=function(t,r,n,o,s,l,u,c,f){a(t,function(){var a={leafletEvent:o,leafletObject:s,modelName:u,model:l};i(c)&&angular.extend(a,{layerName:c}),"emit"===n?t.$emit(r,a):e.$broadcast(r,a)})},c.prototype.bindEvents=function(e,t,r,n,a,c){var f=[],d="emit",p=this;if(i(n.eventBroadcast))if(o(n.eventBroadcast))if(i(n.eventBroadcast[p.lObjectType]))if(o(n.eventBroadcast[p.lObjectType])){i(n.eventBroadcast[this.lObjectType].logic)&&"emit"!==n.eventBroadcast[p.lObjectType].logic&&"broadcast"!==n.eventBroadcast[p.lObjectType].logic&&u.warn(l+"Available event propagation logic are: 'emit' or 'broadcast'.");var g=!1,h=!1;i(n.eventBroadcast[p.lObjectType].enable)&&s(n.eventBroadcast[p.lObjectType].enable)&&(g=!0),i(n.eventBroadcast[p.lObjectType].disable)&&s(n.eventBroadcast[p.lObjectType].disable)&&(h=!0),g&&h?u.warn(l+"can not enable and disable events at the same time"):g||h?g?n.eventBroadcast[this.lObjectType].enable.forEach(function(e){-1!==f.indexOf(e)?u.warn(l+"This event "+e+" is already enabled"):-1===p.getAvailableEvents().indexOf(e)?u.warn(l+"This event "+e+" does not exist"):f.push(e)}):(f=this.getAvailableEvents(),n.eventBroadcast[p.lObjectType].disable.forEach(function(e){var t=f.indexOf(e);-1===t?u.warn(l+"This event "+e+" does not exist or has been already disabled"):f.splice(t,1)})):u.warn(l+"must enable or disable events")}else u.warn(l+"event-broadcast."+[p.lObjectType]+" must be an object check your model.");else f=this.getAvailableEvents();else u.error(l+"event-broadcast must be an object check your model.");else f=this.getAvailableEvents();return f.forEach(function(i){e.on(i,p.genDispatchEvent(i,d,n,e,t,r,a,c))}),d},c}]).service("leafletEventsHelpers",["leafletEventsHelpersFactory",function(e){return new e}]),angular.module("leaflet-directive").factory("leafletGeoJsonEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents","leafletData",function(e,t,r,n,a,i,o){var s=n.safeApply,l=a,u=function(){l.call(this,"leafletDirectiveGeoJson","geojson")};return u.prototype=new l,u.prototype.genDispatchEvent=function(t,r,n,a,i,u,c,f){var d=l.prototype.genDispatchEvent.call(this,t,r,n,a,i,u,c),p=this;return function(r){"mouseout"===t&&(f.resetStyleOnMouseout&&o.getGeoJSON(f.mapId).then(function(e){var t=c?e[c]:e;t.resetStyle(r.target)}),s(n,function(){e.$broadcast(p.rootBroadcastName+".mouseout",r)})),d(r)}},u.prototype.getAvailableEvents=function(){return["click","dblclick","mouseover","mouseout"]},new u}]),angular.module("leaflet-directive").factory("leafletLabelEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory",function(e,t,r,n,a){var i=n,o=a,s=function(){o.call(this,"leafletDirectiveLabel","markers")};return s.prototype=new o,s.prototype.genDispatchEvent=function(e,t,r,n,a,i,s){var l=a.replace("markers.","");return o.prototype.genDispatchEvent.call(this,e,t,r,n,l,i,s)},s.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},s.prototype.genEvents=function(e,t,r,n,a,o,s){var l=this,u=this.getAvailableEvents(),c=i.getObjectArrayPath("markers."+a);u.forEach(function(e){n.label.on(e,l.genDispatchEvent(e,t,r,n.label,c,o,s))})},s.prototype.bindEvents=function(e,t,r,n,a){},new s}]),angular.module("leaflet-directive").factory("leafletMapEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpers",function(e,t,r,n,a){var i=n.isDefined,o=a.fire,s=function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},l=function(e,t,r){return function(n){var a="leafletDirectiveMap."+t;o(e,a,r,n,n.target,e)}},u=function(e){e.$broadcast("boundsChanged")},c=function(e,t,r,n){if(i(r.urlHashCenter)){var a=t.getCenter(),o=a.lat.toFixed(4)+":"+a.lng.toFixed(4)+":"+t.getZoom();i(n.c)&&n.c===o||e.$emit("centerUrlHash",o)}};return{getAvailableMapEvents:s,genDispatchMapEvent:l,notifyCenterChangedToBounds:u,notifyCenterUrlHashChanged:c}}]),angular.module("leaflet-directive").factory("leafletMarkerEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents",function(e,t,r,n,a,i){var o=n.safeApply,s=n.isDefined,l=n,u=i,c=a,f=function(){c.call(this,"leafletDirectiveMarker","markers")};return f.prototype=new c,f.prototype.genDispatchEvent=function(t,r,n,a,i,s,l){var u=c.prototype.genDispatchEvent.call(this,t,r,n,a,i,s,l);return function(r){"click"===t?o(n,function(){e.$broadcast("leafletDirectiveMarkersClick",i)}):"dragend"===t&&(o(n,function(){s.lat=a.getLatLng().lat,s.lng=a.getLatLng().lng}),s.message&&s.focus===!0&&a.openPopup()),u(r)}},f.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose","touchend","touchstart","touchmove","touchcancel","touchleave"]},f.prototype.bindEvents=function(e,t,r,n,a){var i=c.prototype.bindEvents.call(this,e,t,r,n,a);l.LabelPlugin.isLoaded()&&s(e.label)&&u.genEvents(t,i,n,e,r,a)},new f}]),angular.module("leaflet-directive").factory("leafletPathEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(e,t,r,n,a,i){var o=n.isDefined,s=n.isObject,l=n,u=n.errorHeader,c=a,f=i.fire,d=r,p=function(e,t,r,n,a,i,o){return function(s){var l="leafletDirectivePath."+e;f(r,l,t,s,s.target||n,i,a,o)}},g=function(e,t,r,n){var a,i,f=[],g="broadcast";if(o(n.eventBroadcast))if(s(n.eventBroadcast))if(o(n.eventBroadcast.path))if(s(n.eventBroadcast.paths))d.warn(u+"event-broadcast.path must be an object check your model.");else{void 0!==n.eventBroadcast.path.logic&&null!==n.eventBroadcast.path.logic&&("emit"!==n.eventBroadcast.path.logic&&"broadcast"!==n.eventBroadcast.path.logic?d.warn(u+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===n.eventBroadcast.path.logic&&(g="emit"));var v=!1,m=!1;if(void 0!==n.eventBroadcast.path.enable&&null!==n.eventBroadcast.path.enable&&"object"==typeof n.eventBroadcast.path.enable&&(v=!0),void 0!==n.eventBroadcast.path.disable&&null!==n.eventBroadcast.path.disable&&"object"==typeof n.eventBroadcast.path.disable&&(m=!0),v&&m)d.warn(u+"can not enable and disable events at the same time");else if(v||m)if(v)for(a=0;a<n.eventBroadcast.path.enable.length;a++)i=n.eventBroadcast.path.enable[a],-1!==f.indexOf(i)?d.warn(u+"This event "+i+" is already enabled"):-1===h().indexOf(i)?d.warn(u+"This event "+i+" does not exist"):f.push(i);else for(f=h(),a=0;a<n.eventBroadcast.path.disable.length;a++){i=n.eventBroadcast.path.disable[a];var y=f.indexOf(i);-1===y?d.warn(u+"This event "+i+" does not exist or has been already disabled"):f.splice(y,1)}else d.warn(u+"must enable or disable events")}else f=h();else d.error(u+"event-broadcast must be an object check your model.");else f=h();for(a=0;a<f.length;a++)i=f[a],e.on(i,p(i,g,n,f,t));l.LabelPlugin.isLoaded()&&o(e.label)&&c.genEvents(t,g,n,e,r)},h=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:h,bindPathEvents:g}}])}(angular),!function(e,t){"use strict";var r=window.angulartics||(window.angulartics={});r.waitForVendorCount=0,r.waitForVendorApi=function(e,t,n,a,i){i||r.waitForVendorCount++,a||(a=n,n=void 0),!Object.prototype.hasOwnProperty.call(window,e)||void 0!==n&&void 0===window[e][n]?setTimeout(function(){r.waitForVendorApi(e,t,n,a,!0)},t):(r.waitForVendorCount--,a(window[e]))},e.module("angulartics",[]).provider("$analytics",function(){var t={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},n=["pageTrack","eventTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],a={},i={},o=function(e){return function(){r.waitForVendorCount&&(a[e]||(a[e]=[]),a[e].push(arguments))}},s=function(t,r){return i[t]||(i[t]=[]),i[t].push(r),function(){var r=arguments;e.forEach(i[t],function(e){e.apply(this,r)},this)}},l={settings:t},u=function(e,t){t?setTimeout(e,t):e()},c={$get:function(){return l},api:l,settings:t,virtualPageviews:function(e){this.settings.pageTracking.autoTrackVirtualPages=e},firstPageview:function(e){this.settings.pageTracking.autoTrackFirstPage=e},withBase:function(t){this.settings.pageTracking.basePath=t?e.element(document).find("base").attr("href"):""},withAutoBase:function(e){this.settings.pageTracking.autoBasePath=e},developerMode:function(e){this.settings.developerMode=e}},f=function(r,n){l[r]=s(r,n);var i=t[r],o=i?i.bufferFlushDelay:null,c=null!==o?o:t.bufferFlushDelay;e.forEach(a[r],function(e,t){u(function(){n.apply(this,e)},t*c)})},d=function(e){return e.replace(/^./,function(e){return e.toUpperCase()})},p=function(e){var t="register"+d(e);c[t]=function(t){f(e,t)},l[e]=s(e,o(e))};return e.forEach(n,p),c}).run(["$rootScope","$window","$analytics","$injector",function(t,r,n,a){n.settings.pageTracking.autoTrackFirstPage&&a.invoke(["$location",function(e){var t=!0;if(a.has("$route")){var i=a.get("$route");for(var o in i.routes){t=!1;break}}else if(a.has("$state")){var s=a.get("$state");for(var l in s.get()){t=!1;break}}if(t)if(n.settings.pageTracking.autoBasePath&&(n.settings.pageTracking.basePath=r.location.pathname),n.settings.pageTracking.trackRelativePath){var u=n.settings.pageTracking.basePath+e.url();n.pageTrack(u,e)}else n.pageTrack(e.absUrl(),e)}]),n.settings.pageTracking.autoTrackVirtualPages&&a.invoke(["$location",function(e){n.settings.pageTracking.autoBasePath&&(n.settings.pageTracking.basePath=r.location.pathname+"#"),a.has("$route")&&t.$on("$routeChangeSuccess",function(t,r){if(!r||!(r.$$route||r).redirectTo){var a=n.settings.pageTracking.basePath+e.url();n.pageTrack(a,e)}}),a.has("$state")&&t.$on("$stateChangeSuccess",function(t,r){var a=n.settings.pageTracking.basePath+e.url();n.pageTrack(a,e)})}]),n.settings.developerMode&&e.forEach(n,function(e,t){"function"==typeof e&&(n[t]=function(){})})}]).directive("analyticsOn",["$analytics",function(t){function r(e){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(e.tagName.toLowerCase()+":"+(e.type||""))>=0}function n(e){return r(e),"click"}function a(e){return r(e)?e.innerText||e.value:e.id||e.name||e.tagName}function i(e){return"analytics"===e.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(e.substr(9))}function o(e){var t=e.slice(9);return"undefined"!=typeof t&&null!==t&&t.length>0?t.substring(0,1).toLowerCase()+t.substring(1):t}return{restrict:"A",link:function(r,s,l){var u=l.analyticsOn||n(s[0]),c={};e.forEach(l.$attr,function(e,t){i(t)&&(c[o(t)]=l[t],l.$observe(t,function(e){c[o(t)]=e}))}),e.element(s[0]).bind(u,function(n){var i=l.analyticsEvent||a(s[0]);c.eventType=n.type,(!l.analyticsIf||r.$eval(l.analyticsIf))&&(l.analyticsProperties&&e.extend(c,r.$eval(l.analyticsProperties)),t.eventTrack(i,c))})}}}])}(angular),function(){function e(e,t,r){return e.call.apply(e.bind,arguments)}function t(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function r(n,a,i){return r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:t,r.apply(null,arguments)}function n(e,t){this.D=e,this.m=t||e,this.F=this.m.document}function a(e,t,r){e=e.F.getElementsByTagName(t)[0],e||(e=document.documentElement),e.insertBefore(r,e.lastChild)}function i(e,t,r){t=t||[],r=r||[];for(var n=e.className.split(/\s+/),a=0;a<t.length;a+=1){for(var i=!1,o=0;o<n.length;o+=1)if(t[a]===n[o]){i=!0;break}i||n.push(t[a])}for(t=[],a=0;a<n.length;a+=1){for(i=!1,o=0;o<r.length;o+=1)if(n[a]===r[o]){i=!0;break}i||t.push(n[a])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(e,t){for(var r=e.className.split(/\s+/),n=0,a=r.length;a>n;n++)if(r[n]==t)return!0;return!1}function s(e){if("string"==typeof e.da)return e.da;var t=e.m.location.protocol;return"about:"==t&&(t=e.D.location.protocol),"https:"==t?"https:":"http:"}function l(e,t){var r=e.createElement("link",{rel:"stylesheet",href:t,media:"all"}),n=!1;r.onload=function(){n||(n=!0)},r.onerror=function(){n||(n=!0)},a(e,"head",r)}function u(e,t,r,n){var a=e.F.getElementsByTagName("head")[0];if(a){var i=e.createElement("script",{src:t}),o=!1;return i.onload=i.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,r&&r(null),i.onload=i.onreadystatechange=null,"HEAD"==i.parentNode.tagName&&a.removeChild(i))},a.appendChild(i),setTimeout(function(){o||(o=!0,r&&r(Error("Script load timeout")))},n||5e3),i}return null}function c(e){this.ca=e||"-"}function f(e,t){this.V=e,this.N=4,this.H="n";var r=(t||"n4").match(/^([nio])([1-9])$/i);r&&(this.H=r[1],this.N=parseInt(r[2],10))}function d(e){return e.H+e.N}function p(e){var t=4,r="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(r=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),r+t}function g(e,t){this.a=e,this.h=e.m.document.documentElement,this.J=t,this.f="wf",this.e=new c("-"),this.Z=!1!==t.events,this.u=!1!==t.classes}function h(e){e.u&&i(e.h,[e.e.d(e.f,"loading")]),m(e,"loading")}function v(e){if(e.u){var t=o(e.h,e.e.d(e.f,"active")),r=[],n=[e.e.d(e.f,"loading")];t||r.push(e.e.d(e.f,"inactive")),i(e.h,r,n)}m(e,"inactive")}function m(e,t,r){e.Z&&e.J[t]&&(r?e.J[t](r.getName(),d(r)):e.J[t]())}function y(){this.t={}}function b(e,t,r){var n,a=[];for(n in t)if(t.hasOwnProperty(n)){var i=e.t[n];i&&a.push(i(t[n],r))}return a}function L(e,t){this.a=e,this.q=t,this.j=this.a.createElement("span",{"aria-hidden":"true"},this.q);

}function $(e,t){var r,n=e.j;r=[];for(var a=t.V.split(/,\s*/),i=0;i<a.length;i++){var o=a[i].replace(/['"]/g,"");r.push(-1==o.indexOf(" ")?o:"'"+o+"'")}r=r.join(","),a="normal","o"===t.H?a="oblique":"i"===t.H&&(a="italic"),n.style.cssText="display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+r+";"+("font-style:"+a+";font-weight:"+(t.N+"00")+";")}function w(e){a(e.a,"body",e.j)}function k(e,t,r,n,a,i,o){this.O=e,this.ba=t,this.a=r,this.g=n,this.q=o||"BESbswy",this.s={},this.M=a||3e3,this.T=i||null,this.C=this.B=this.w=this.v=null,this.v=new L(this.a,this.q),this.w=new L(this.a,this.q),this.B=new L(this.a,this.q),this.C=new L(this.a,this.q),$(this.v,new f(this.g.getName()+",serif",d(this.g))),$(this.w,new f(this.g.getName()+",sans-serif",d(this.g))),$(this.B,new f("serif",d(this.g))),$(this.C,new f("sans-serif",d(this.g))),w(this.v),w(this.w),w(this.B),w(this.C)}function A(){if(null===U){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);U=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return U}function C(e,t,r){for(var n in G)if(G.hasOwnProperty(n)&&t===e.s[G[n]]&&r===e.s[G[n]])return!0;return!1}function S(e){var t,r=e.v.j.offsetWidth,n=e.w.j.offsetWidth;(t=r===e.s.serif&&n===e.s["sans-serif"])||(t=A()&&C(e,r,n)),t?R()-e.ea>=e.M?A()&&C(e,r,n)&&(null===e.T||e.T.hasOwnProperty(e.g.getName()))?P(e,e.O):P(e,e.ba):x(e):P(e,e.O)}function x(e){setTimeout(r(function(){S(this)},e),50)}function P(e,t){setTimeout(r(function(){this.v.remove(),this.w.remove(),this.B.remove(),this.C.remove(),t(this.g)},e),0)}function D(e,t,r){this.a=e,this.o=t,this.K=0,this.X=this.S=!1,this.M=r}function M(e){0==--e.K&&e.S&&(e.X?(e=e.o,e.u&&i(e.h,[e.e.d(e.f,"active")],[e.e.d(e.f,"loading"),e.e.d(e.f,"inactive")]),m(e,"active")):v(e.o))}function E(e){this.D=e,this.p=new y,this.U=0,this.P=this.Q=!0}function O(e,t,n,a,o){var s=0==--e.U;(e.P||e.Q)&&setTimeout(function(){var e=o||null,l=a||null||{};if(0===n.length&&s)v(t.o);else{t.K+=n.length,s&&(t.S=s);var u,c=[];for(u=0;u<n.length;u++){var f=n[u],p=l[f.getName()],g=t.o,h=f;g.u&&i(g.h,[g.e.d(g.f,h.getName(),d(h).toString(),"loading")]),m(g,"fontloading",h),g=null,g=new k(r(t.$,t),r(t.aa,t),t.a,f,t.M,e,p),c.push(g)}for(u=0;u<c.length;u++)c[u].start()}},0)}function T(e,t,r){var n=[],a=r.timeout;h(t);var n=b(e.p,r,e.a),i=new D(e.a,t,a);for(e.U=n.length,t=0,r=n.length;r>t;t++)n[t].load(function(t,r,n){O(e,i,t,r,n)})}function H(e,t,r){this.I=e?e:t+z,this.k=[],this.L=[],this.Y=r||""}function j(e){this.k=e,this.W=[],this.G={}}function N(e,t){this.a=e,this.c=t}function I(e,t){this.a=e,this.c=t,this.R=[]}function B(e,t){this.a=e,this.c=t}function F(e,t){this.a=e,this.c=t}function q(e,t){this.a=e,this.c=t}var R=Date.now||function(){return+new Date};n.prototype.createElement=function(e,t,r){if(e=this.F.createElement(e),t)for(var n in t)t.hasOwnProperty(n)&&("style"==n?e.style.cssText=t[n]:e.setAttribute(n,t[n]));return r&&e.appendChild(this.F.createTextNode(r)),e},c.prototype.d=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.ca)},f.prototype.getName=function(){return this.V},L.prototype.remove=function(){var e=this.j;e.parentNode&&e.parentNode.removeChild(e)};var G={ga:"serif",fa:"sans-serif"},U=null;k.prototype.start=function(){this.s.serif=this.B.j.offsetWidth,this.s["sans-serif"]=this.C.j.offsetWidth,this.ea=R(),S(this)},D.prototype.$=function(e){var t=this.o;t.u&&i(t.h,[t.e.d(t.f,e.getName(),d(e).toString(),"active")],[t.e.d(t.f,e.getName(),d(e).toString(),"loading"),t.e.d(t.f,e.getName(),d(e).toString(),"inactive")]),m(t,"fontactive",e),this.X=!0,M(this)},D.prototype.aa=function(e){var t=this.o;if(t.u){var r=o(t.h,t.e.d(t.f,e.getName(),d(e).toString(),"active")),n=[],a=[t.e.d(t.f,e.getName(),d(e).toString(),"loading")];r||n.push(t.e.d(t.f,e.getName(),d(e).toString(),"inactive")),i(t.h,n,a)}m(t,"fontinactive",e),M(this)},E.prototype.load=function(e){this.a=new n(this.D,e.context||this.D),this.Q=!1!==e.events,this.P=!1!==e.classes,T(this,new g(this.a,e),e)};var z="//fonts.googleapis.com/css";H.prototype.d=function(){if(0==this.k.length)throw Error("No fonts to load!");if(-1!=this.I.indexOf("kit="))return this.I;for(var e=this.k.length,t=[],r=0;e>r;r++)t.push(this.k[r].replace(/ /g,"+"));return e=this.I+"?family="+t.join("%7C"),0<this.L.length&&(e+="&subset="+this.L.join(",")),0<this.Y.length&&(e+="&text="+encodeURIComponent(this.Y)),e};var W={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},V={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},Z=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;j.prototype.parse=function(){for(var e=this.k.length,t=0;e>t;t++){var r=this.k[t].split(":"),n=r[0].replace(/\+/g," "),a=["n4"];if(2<=r.length){var i,o=r[1];if(i=[],o)for(var o=o.split(","),s=o.length,l=0;s>l;l++){var u;if(u=o[l],u.match(/^[\w-]+$/))if(u=Z.exec(u.toLowerCase()),null==u)u="";else{var c;if(c=u[1],null==c||""==c)c="4";else{var d=V[c];c=d?d:isNaN(c)?"4":c.substr(0,1)}u=u[2],u=[null==u||""==u?"n":J[u],c].join("")}else u="";u&&i.push(u)}0<i.length&&(a=i),3==r.length&&(r=r[2],i=[],r=r?r.split(","):i,0<r.length&&(r=W[r[0]])&&(this.G[n]=r))}for(this.G[n]||(r=W[n])&&(this.G[n]=r),r=0;r<a.length;r+=1)this.W.push(new f(n,a[r]))}};var _={Arimo:!0,Cousine:!0,Tinos:!0};N.prototype.load=function(e){for(var t=this.a,r=new H(this.c.api,s(t),this.c.text),n=this.c.families,a=n.length,i=0;a>i;i++){var o=n[i].split(":");3==o.length&&r.L.push(o.pop());var u="";2==o.length&&""!=o[1]&&(u=":"),r.k.push(o.join(u))}n=new j(n),n.parse(),l(t,r.d()),e(n.W,n.G,_)},I.prototype.A=function(e){var t=this.a;return s(this.a)+(this.c.api||"//f.fontdeck.com/s/css/js/")+(t.m.location.hostname||t.D.location.hostname)+"/"+e+".js"},I.prototype.load=function(e){var t=this.c.id,r=this.a.m,n=this;t?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[t]=function(t,r){for(var a=0,i=r.fonts.length;i>a;++a){var o=r.fonts[a];n.R.push(new f(o.name,p("font-weight:"+o.weight+";font-style:"+o.style)))}e(n.R)},u(this.a,this.A(t),function(t){t&&e([])})):e([])},B.prototype.A=function(e){return(this.c.api||"https://use.typekit.net")+"/"+e+".js"},B.prototype.load=function(e){var t=this.c.id,r=this.a.m;t?u(this.a,this.A(t),function(t){if(t)e([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var n=[],a=0;a<t.length;a+=2)for(var i=t[a],o=t[a+1],s=0;s<o.length;s++)n.push(new f(i,o[s]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}e(n)}},2e3):e([])},F.prototype.A=function(e,t){var r=s(this.a),n=(this.c.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return r+"//"+n+"/"+e+".js"+(t?"?v="+t:"")},F.prototype.load=function(e){var t=this.c.projectId,r=this.c.version;if(t){var n=this.a.m;u(this.a,this.A(t,r),function(r){if(r)e([]);else if(n["__mti_fntLst"+t]){r=n["__mti_fntLst"+t]();var a=[];if(r)for(var i=0;i<r.length;i++)a.push(new f(r[i].fontfamily));e(a)}else e([])}).id="__MonotypeAPIScript__"+t}else e([])},q.prototype.load=function(e){var t,r,n=this.c.urls||[],a=this.c.families||[],i=this.c.testStrings||{};for(t=0,r=n.length;r>t;t++)l(this.a,n[t]);for(n=[],t=0,r=a.length;r>t;t++){var o=a[t].split(":");if(o[1])for(var s=o[1].split(","),u=0;u<s.length;u+=1)n.push(new f(o[0],s[u]));else n.push(new f(o[0]))}e(n,i)};var Y=new E(window);Y.p.t.custom=function(e,t){return new q(t,e)},Y.p.t.fontdeck=function(e,t){return new I(t,e)},Y.p.t.monotype=function(e,t){return new F(t,e)},Y.p.t.typekit=function(e,t){return new B(t,e)},Y.p.t.google=function(e,t){return new N(t,e)};var K={load:r(Y.load,Y)};"function"==typeof define&&define.amd?define(function(){return K}):"undefined"!=typeof module&&module.exports?module.exports=K:(window.WebFont=K,window.WebFontConfig&&Y.load(window.WebFontConfig))}();