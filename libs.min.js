!function(e,t){"use strict";function r(){}var n=Object.create(r.prototype,{version:{value:"2.0.9"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,2}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},"in":{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:r.prototype},extend:{value:function(e,t){for(var r in e)("undefined"==typeof n.prototype[r]||t===!0)&&(n.prototype[r]=e[r])}}});"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),"undefined"==typeof Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return 180*this/Math.PI}),n.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:t,latitude:e.length>=2?1:t,elevation:e.length>=3?2:t};var r=function(t){var r;return t.every(function(t){return"object"!=typeof e?!0:e.hasOwnProperty(t)?function(){return r=t,!1}():!0}),r},n=r(["lng","lon","longitude"]),a=r(["lat","latitude"]),i=r(["alt","altitude","elevation","elev"]);return"undefined"==typeof a&&"undefined"==typeof n&&"undefined"==typeof i?t:{latitude:a,longitude:n,elevation:i}},getLat:function(e,t){return t===!0?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return t===!0?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var r={latitude:t===!0?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:t===!0?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},n=e[this.getKeys(e).elevation];return"undefined"!=typeof n&&(r.elevation=n),r},validate:function(e){var t=this.getKeys(e);if("undefined"==typeof t||"undefined"==typeof t.latitude||"undefined"===t.longitude)return!1;var r=e[t.latitude],n=e[t.longitude];return"undefined"==typeof r||!this.isDecimal(r)&&!this.isSexagesimal(r)?!1:"undefined"==typeof n||!this.isDecimal(n)&&!this.isSexagesimal(n)?!1:(r=this.useDecimal(r),n=this.useDecimal(n),r<this.minLat||r>this.maxLat||n<this.minLon||n>this.maxLon?!1:!0)},getDistance:function(e,t,r){r=Math.floor(r)||1;var a,i,o,l,s,u,c,f=this.coords(e),d=this.coords(t),p=6378137,g=6356752.314245,v=1/298.257223563,h=(d.longitude-f.longitude).toRad(),m=Math.atan((1-v)*Math.tan(parseFloat(f.latitude).toRad())),y=Math.atan((1-v)*Math.tan(parseFloat(d.latitude).toRad())),b=Math.sin(m),$=Math.cos(m),L=Math.sin(y),w=Math.cos(y),k=h,A=100;do{var C=Math.sin(k),x=Math.cos(k);if(u=Math.sqrt(w*C*w*C+($*L-b*w*x)*($*L-b*w*x)),0===u)return n.distance=0;a=b*L+$*w*x,i=Math.atan2(u,a),o=$*w*C/u,l=1-o*o,s=a-2*b*L/l,isNaN(s)&&(s=0);var S=v/16*l*(4+v*(4-3*l));c=k,k=h+(1-S)*v*o*(i+S*u*(s+S*a*(-1+2*s*s)))}while(Math.abs(k-c)>1e-12&&--A>0);if(0===A)return 0/0;var D=l*(p*p-g*g)/(g*g),M=1+D/16384*(4096+D*(-768+D*(320-175*D))),O=D/1024*(256+D*(-128+D*(74-47*D))),P=O*u*(s+O/4*(a*(-1+2*s*s)-O/6*s*(-3+4*u*u)*(-3+4*s*s))),E=g*M*(i-P);if(E=E.toFixed(3),"undefined"!=typeof this.elevation(e)&&"undefined"!=typeof this.elevation(t)){var H=Math.abs(this.elevation(e)-this.elevation(t));E=Math.sqrt(E*E+H*H)}return this.distance=Math.floor(Math.round(E/r)*r)},getDistanceSimple:function(e,t,r){r=Math.floor(r)||1;var a=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return n.distance=Math.floor(Math.round(a/r)*r)},getCenter:function(e){if(!e.length)return!1;var t,r,n=function(e){return Math.max.apply(Math,e)},a=function(e){return Math.min.apply(Math,e)},i={latitude:[],longitude:[]};for(var o in e)i.latitude.push(this.latitude(e[o])),i.longitude.push(this.longitude(e[o]));var l=a(i.latitude),s=a(i.longitude),u=n(i.latitude),c=n(i.longitude);t=((l+u)/2).toFixed(6),r=((s+c)/2).toFixed(6);var f=this.convertUnit("km",this.getDistance({latitude:l,longitude:s},{latitude:u,longitude:c}));return{latitude:t,longitude:r,distance:f}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),r={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};"undefined"!=typeof t&&(r.maxElev=0,r.minElev=1/0);for(var n=0,a=e.length;a>n;++n)r.maxLat=Math.max(this.latitude(e[n]),r.maxLat),r.minLat=Math.min(this.latitude(e[n]),r.minLat),r.maxLng=Math.max(this.longitude(e[n]),r.maxLng),r.minLng=Math.min(this.longitude(e[n]),r.minLng),t&&(r.maxElev=Math.max(this.elevation(e[n]),r.maxElev),r.minElev=Math.min(this.elevation(e[n]),r.minElev));return r},getBoundsOfDistance:function(e,t){var r,n,a=this.latitude(e),i=this.longitude(e),o=a.toRad(),l=i.toRad(),s=t/this.radius,u=o-s,c=o+s,f=this.maxLat.toRad(),d=this.minLat.toRad(),p=this.maxLon.toRad(),g=this.minLon.toRad();if(u>d&&f>c){var v=Math.asin(Math.sin(s)/Math.cos(o));r=l-v,g>r&&(r+=2*Math.PI),n=l+v,n>p&&(n-=2*Math.PI)}else u=Math.max(u,d),c=Math.min(c,f),r=g,n=p;return[{latitude:u.toDeg(),longitude:r.toDeg()},{latitude:c.toDeg(),longitude:n.toDeg()}]},isPointInside:function(e,t){for(var r=!1,n=-1,a=t.length,i=a-1;++n<a;i=n)(this.longitude(t[n])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[i])||this.longitude(t[i])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[n]))&&this.latitude(e)<(this.latitude(t[i])-this.latitude(t[n]))*(this.longitude(e)-this.longitude(t[n]))/(this.longitude(t[i])-this.longitude(t[n]))+this.latitude(t[n])&&(r=!r);return r},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,r){return this.getDistance(e,t)<r},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var r=this.longitude(t).toRad()-this.longitude(e).toRad(),n=Math.log(Math.tan(this.latitude(t).toRad()/2+Math.PI/4)/Math.tan(this.latitude(e).toRad()/2+Math.PI/4));return Math.abs(r)>Math.PI&&(r=r>0?-1*(2*Math.PI-r):2*Math.PI+r),(Math.atan2(r,n).toDeg()+360)%360},getBearing:function(e,t){t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e);var r=(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360;return r},getCompassDirection:function(e,t,r){var n,a;switch(a="circle"==r?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(a/22.5)){case 1:n={exact:"NNE",rough:"N"};break;case 2:n={exact:"NE",rough:"N"};break;case 3:n={exact:"ENE",rough:"E"};break;case 4:n={exact:"E",rough:"E"};break;case 5:n={exact:"ESE",rough:"E"};break;case 6:n={exact:"SE",rough:"E"};break;case 7:n={exact:"SSE",rough:"S"};break;case 8:n={exact:"S",rough:"S"};break;case 9:n={exact:"SSW",rough:"S"};break;case 10:n={exact:"SW",rough:"S"};break;case 11:n={exact:"WSW",rough:"W"};break;case 12:n={exact:"W",rough:"W"};break;case 13:n={exact:"WNW",rough:"W"};break;case 14:n={exact:"NW",rough:"W"};break;case 15:n={exact:"NNW",rough:"N"};break;default:n={exact:"N",rough:"N"}}return n.bearing=a,n},getDirection:function(){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){var r=[];for(var n in t){var a=this.getDistance(e,t[n]);r.push({key:n,latitude:this.latitude(t[n]),longitude:this.longitude(t[n]),distance:a})}return r.sort(function(e,t){return e.distance-t.distance})},findNearest:function(e,t,r,n){r=r||0,n=n||1;var a=this.orderByDistance(e,t);return 1===n?a[r]:a.splice(r,n)},getPathLength:function(e){for(var t,r=0,n=0,a=e.length;a>n;++n)t&&(r+=this.getDistance(this.coords(e[n]),t)),t=this.coords(e[n]);return r},getSpeed:function(e,t,r){var a=r&&r.unit||"km";"mph"==a?a="mi":"kmh"==a&&(a="km");var i=n.getDistance(e,t),o=1*t.time/1e3-1*e.time/1e3,l=i/o*3600,s=Math.round(l*this.measures[a]*1e4)/1e4;return s},convertUnit:function(e,t,r){if(0===t||"undefined"==typeof t){if(0===this.distance)return 0;t=this.distance}if(e=e||"m",r=null==r?4:r,"undefined"!=typeof this.measures[e])return this.round(t*this.measures[e],r);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map(function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var r in e)e[r]=t.useDecimal(e[r]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e})}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var r in e)e[r]=this.useDecimal(e[r]);return e}if(this.isDecimal(e))return parseFloat(e);if(this.isSexagesimal(e)===!0)return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),r=Math.abs(t[0]),n=60*("0."+t[1]),a=n.toString().split(".");return n=Math.floor(n),a=(60*("0."+a[1])).toFixed(2),this.sexagesimal[e]=r+"° "+n+"' "+a+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern),r=t.exec(e),n=0,a=0;r&&(n=parseFloat(r[2]/60),a=parseFloat(r[4]/3600)||0);var i=(parseFloat(r[1])+n+a).toFixed(8);return i=parseFloat("S"==r[7]||"W"==r[7]?-i:i),this.decimal[e]=i,i},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}}),"undefined"!=typeof module&&"undefined"!=typeof module.exports?e.geolib=module.exports=n:"function"==typeof define&&define.amd?define("geolib",[],function(){return n}):e.geolib=n}(this),function(e,t,r){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(e,r,n){n=n.ngAnimateChildren,t.isString(n)&&0===n.length?r.data("$$ngAnimateChildren",!0):e.$watch(n,function(e){r.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){return function(t){return e(function(){t()})}}]).config(["$provide","$animateProvider",function(n,a){function i(e){for(var t=0;t<e.length;t++){var r=e[t];if(1==r.nodeType)return r}}function o(e,t){return i(e)==i(t)}var l,s=t.noop,u=t.forEach,c=a.$$selectors,f=t.isArray,d=t.isString,p=t.isObject,g={running:!0};n.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,r,n,v,h,m,y,b,$,L){function w(e,t){var r=e.data("$$ngAnimateState")||{};return t&&(r.running=!0,r.structural=!0,e.data("$$ngAnimateState",r)),r.disabled||r.running&&r.structural}function k(e){var t,n=r.defer();return n.promise.$$cancelFn=function(){t&&t()},y.$$postDigest(function(){t=e(function(){n.resolve()})}),n.promise}function A(e){return p(e)?(e.tempClasses&&d(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e):void 0}function C(e,t,r){r=r||{};var n={};u(r,function(e,t){u(t.split(" "),function(t){n[t]=e})});var a=Object.create(null);u((e.attr("class")||"").split(/\s+/),function(e){a[e]=!0});var i=[],o=[];return u(t&&t.classes||[],function(e,t){var r=a[t],l=n[t]||{};!1===e?(r||"addClass"==l.event)&&o.push(t):!0===e&&(r&&"removeClass"!=l.event||i.push(t))}),0<i.length+o.length&&[i.join(" "),o.join(" ")]}function x(e){if(e){var t=[],r={};e=e.substr(1).split("."),(v.transitions||v.animations)&&t.push(n.get(c[""]));for(var a=0;a<e.length;a++){var i=e[a],o=c[i];o&&!r[i]&&(t.push(n.get(o)),r[i]=!0)}return t}}function S(e,r,n,a){function i(e,t){var r=e[t],n=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return r||n?("leave"==t&&(n=r,r=null),L.push({event:t,fn:r}),y.push({event:t,fn:n}),!0):void 0}function o(t,r,i){var o=[];u(t,function(e){e.fn&&o.push(e)});var l=0;u(o,function(t,u){var f=function(){e:{if(r){if((r[u]||s)(),++l<o.length)break e;r=null}i()}};switch(t.event){case"setClass":r.push(t.fn(e,c,d,f,a));break;case"animate":r.push(t.fn(e,n,a.from,a.to,f));break;case"addClass":r.push(t.fn(e,c||n,f,a));break;case"removeClass":r.push(t.fn(e,d||n,f,a));break;default:r.push(t.fn(e,f,a))}}),r&&0===r.length&&i()}var l=e[0];if(l){a&&(a.to=a.to||{},a.from=a.from||{});var c,d;f(n)&&(c=n[0],d=n[1],c?d?n=c+" "+d:(n=c,r="addClass"):(n=d,r="removeClass"));var p="setClass"==r,g=p||"addClass"==r||"removeClass"==r||"animate"==r,v=e.attr("class")+" "+n;if(j(v)){var h=s,m=[],y=[],b=s,$=[],L=[],v=(" "+v).replace(/\s+/g,".");return u(x(v),function(e){!i(e,r)&&p&&(i(e,"addClass"),i(e,"removeClass"))}),{node:l,event:r,className:n,isClassBased:g,isSetClassOperation:p,applyStyles:function(){a&&e.css(t.extend(a.from||{},a.to||{}))},before:function(e){h=e,o(y,m,function(){h=s,e()})},after:function(e){b=e,o(L,$,function(){b=s,e()})},cancel:function(){m&&(u(m,function(e){(e||s)(!0)}),h(!0)),$&&(u($,function(e){(e||s)(!0)}),b(!0))}}}}}function D(e,r,n,a,i,o,c,f){function d(t){var a="$animate:"+t;b&&b[a]&&0<b[a].length&&m(function(){n.triggerHandler(a,{event:e,className:r})})}function p(){d("before")}function g(){d("after")}function v(){v.hasBeenRun||(v.hasBeenRun=!0,o())}function h(){if(!h.hasBeenRun){y&&y.applyStyles(),h.hasBeenRun=!0,c&&c.tempClasses&&u(c.tempClasses,function(e){l.removeClass(n,e)});var t=n.data("$$ngAnimateState");t&&(y&&y.isClassBased?O(n,r):(m(function(){var t=n.data("$$ngAnimateState")||{};A==t.index&&O(n,r,e)}),n.data("$$ngAnimateState",t))),d("close"),f()}}var y=S(n,e,r,c);if(!y)return v(),p(),g(),h(),s;e=y.event,r=y.className;var b=t.element._data(y.node),b=b&&b.events;if(a||(a=i?i.parent():n.parent()),P(n,a))return v(),p(),g(),h(),s;a=n.data("$$ngAnimateState")||{};var $=a.active||{},L=a.totalActive||0,w=a.last;if(i=!1,L>0){if(L=[],y.isClassBased)"setClass"==w.event?(L.push(w),O(n,r)):$[r]&&(k=$[r],k.event==e?i=!0:(L.push(k),O(n,r)));else if("leave"==e&&$["ng-leave"])i=!0;else{for(var k in $)L.push($[k]);a={},O(n,!0)}0<L.length&&u(L,function(e){e.cancel()})}if(!y.isClassBased||y.isSetClassOperation||"animate"==e||i||(i="addClass"==e==n.hasClass(r)),i)return v(),p(),g(),d("close"),f(),s;$=a.active||{},L=a.totalActive||0,"leave"==e&&n.one("$destroy",function(e){e=t.element(this);var r=e.data("$$ngAnimateState");r&&(r=r.active["ng-leave"])&&(r.cancel(),O(e,"ng-leave"))}),l.addClass(n,"ng-animate"),c&&c.tempClasses&&u(c.tempClasses,function(e){l.addClass(n,e)});var A=H++;return L++,$[r]=y,n.data("$$ngAnimateState",{last:y,active:$,index:A,totalActive:L}),p(),y.before(function(t){var a=n.data("$$ngAnimateState");t=t||!a||!a.active[r]||y.isClassBased&&a.active[r].event!=e,v(),!0===t?h():(g(),y.after(h))}),y.cancel}function M(e){(e=i(e))&&(e=t.isFunction(e.getElementsByClassName)?e.getElementsByClassName("ng-animate"):e.querySelectorAll(".ng-animate"),u(e,function(e){e=t.element(e),(e=e.data("$$ngAnimateState"))&&e.active&&u(e.active,function(e){e.cancel()})}))}function O(e,t){if(o(e,h))g.disabled||(g.running=!1,g.structural=!1);else if(t){var r=e.data("$$ngAnimateState")||{},n=!0===t;!n&&r.active&&r.active[t]&&(r.totalActive--,delete r.active[t]),(n||!r.totalActive)&&(l.removeClass(e,"ng-animate"),e.removeData("$$ngAnimateState"))}}function P(e,r){if(g.disabled)return!0;if(o(e,h))return g.running;var n,a,i;do{if(0===r.length)break;var l=o(r,h),s=l?g:r.data("$$ngAnimateState")||{};if(s.disabled)return!0;l&&(i=!0),!1!==n&&(l=r.data("$$ngAnimateChildren"),t.isDefined(l)&&(n=l)),a=a||s.running||s.last&&!s.last.isClassBased}while(r=r.parent());return!i||!n&&a}l=L,h.data("$$ngAnimateState",g);var E=y.$watch(function(){return $.totalPendingRequests},function(e,t){0===e&&(E(),y.$$postDigest(function(){y.$$postDigest(function(){g.running=!1})}))}),H=0,T=a.classNameFilter(),j=T?function(e){return T.test(e)}:function(){return!0};return{animate:function(e,r,n,a,o){return a=a||"ng-inline-animate",o=A(o)||{},o.from=n?r:null,o.to=n?n:r,k(function(r){return D("animate",a,t.element(i(e)),null,null,s,o,r)})},enter:function(r,n,a,o){return o=A(o),r=t.element(r),n=n&&t.element(n),a=a&&t.element(a),w(r,!0),e.enter(r,n,a),k(function(e){return D("enter","ng-enter",t.element(i(r)),n,a,s,o,e)})},leave:function(r,n){return n=A(n),r=t.element(r),M(r),w(r,!0),k(function(a){return D("leave","ng-leave",t.element(i(r)),null,null,function(){e.leave(r)},n,a)})},move:function(r,n,a,o){return o=A(o),r=t.element(r),n=n&&t.element(n),a=a&&t.element(a),M(r),w(r,!0),e.move(r,n,a),k(function(e){return D("move","ng-move",t.element(i(r)),n,a,s,o,e)})},addClass:function(e,t,r){return this.setClass(e,t,[],r)},removeClass:function(e,t,r){return this.setClass(e,[],t,r)},setClass:function(r,n,a,o){if(o=A(o),r=t.element(r),r=t.element(i(r)),w(r))return e.$$setClassImmediately(r,n,a,o);var l,s=r.data("$$animateClasses"),c=!!s;return s||(s={classes:{}}),l=s.classes,n=f(n)?n:n.split(" "),u(n,function(e){e&&e.length&&(l[e]=!0)}),a=f(a)?a:a.split(" "),u(a,function(e){e&&e.length&&(l[e]=!1)}),c?(o&&s.options&&(s.options=t.extend(s.options||{},o)),s.promise):(r.data("$$animateClasses",s={classes:l,options:o}),s.promise=k(function(t){var n=r.parent(),a=i(r),o=a.parentNode;if(o&&!o.$$NG_REMOVED&&!a.$$NG_REMOVED){a=r.data("$$animateClasses"),r.removeData("$$animateClasses");var o=r.data("$$ngAnimateState")||{},l=C(r,a,o.active);return l?D("setClass",l,r,n,null,function(){l[0]&&e.$$addClassImmediately(r,l[0]),l[1]&&e.$$removeClassImmediately(r,l[1])},a.options,t):t()}t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)O(t);else{var r=t.data("$$ngAnimateState")||{};r.disabled=!0,t.data("$$ngAnimateState",r)}break;case 1:g.disabled=!e;break;default:e=!g.disabled}return!!e}}}]),a.register("",["$window","$sniffer","$timeout","$$animateReflow",function(n,a,o,c){function p(){E||(E=c(function(){j=[],E=null,H={}}))}function g(e,t){E&&E(),j.push(t),E=c(function(){u(j,function(e){e()}),j=[],E=null,H={}})}function v(e,r){var n=i(e);e=t.element(n),I.push(e),n=Date.now()+r,N>=n||(o.cancel(B),N=n,B=o(function(){h(I),I=[]},r,!1))}function h(e){u(e,function(e){(e=e.data("$$ngAnimateCSS3Data"))&&u(e.closeAnimationFns,function(e){e()})})}function m(e,t){var r=t?H[t]:null;if(!r){var a=0,i=0,o=0,l=0;u(e,function(e){if(1==e.nodeType){e=n.getComputedStyle(e)||{},a=Math.max(y(e[S+"Duration"]),a),i=Math.max(y(e[S+"Delay"]),i),l=Math.max(y(e[M+"Delay"]),l);var t=y(e[M+"Duration"]);t>0&&(t*=parseInt(e[M+"IterationCount"],10)||1),o=Math.max(t,o)}}),r={total:0,transitionDelay:i,transitionDuration:a,animationDelay:l,animationDuration:o},t&&(H[t]=r)}return r}function y(e){var t=0;return e=d(e)?e.split(/\s*,\s*/):[],u(e,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function b(e,t,r,n){e=0<=["ng-enter","ng-leave","ng-move"].indexOf(r);var a,o=t.parent(),s=o.data("$$ngAnimateKey");s||(o.data("$$ngAnimateKey",++T),s=T),a=s+"-"+i(t).getAttribute("class");var o=a+" "+r,s=H[o]?++H[o].total:0,u={};if(s>0){var c=r+"-stagger",u=a+" "+c;(a=!H[u])&&l.addClass(t,c),u=m(t,u),a&&l.removeClass(t,c)}l.addClass(t,r);var c=t.data("$$ngAnimateCSS3Data")||{},f=m(t,o);return a=f.transitionDuration,f=f.animationDuration,e&&0===a&&0===f?(l.removeClass(t,r),!1):(r=n||e&&a>0,e=f>0&&0<u.animationDelay&&0===u.animationDuration,t.data("$$ngAnimateCSS3Data",{stagger:u,cacheKey:o,running:c.running||0,itemIndex:s,blockTransition:r,closeAnimationFns:c.closeAnimationFns||[]}),o=i(t),r&&(L(o,!0),n&&t.css(n)),e&&(o.style[M+"PlayState"]="paused"),!0)}function $(e,t,r,n,a){function s(){t.off(E,c),l.removeClass(t,d),l.removeClass(t,p),x&&o.cancel(x),C(t,r);var e,n=i(t);for(e in g)n.style.removeProperty(g[e])}function c(e){e.stopPropagation();var t=e.originalEvent||e;e=t.$manualTimeStamp||t.timeStamp||Date.now(),t=parseFloat(t.elapsedTime.toFixed(3)),Math.max(e-S,0)>=A&&t>=k&&n()}var f=i(t);if(e=t.data("$$ngAnimateCSS3Data"),-1!=f.getAttribute("class").indexOf(r)&&e){var d="",p="";u(r.split(" "),function(e,t){var r=(t>0?" ":"")+e;d+=r+"-active",p+=r+"-pending"});var g=[],h=e.itemIndex,y=e.stagger,b=0;if(h>0){b=0,0<y.transitionDelay&&0===y.transitionDuration&&(b=y.transitionDelay*h);var $=0;0<y.animationDelay&&0===y.animationDuration&&($=y.animationDelay*h,g.push(P+"animation-play-state")),b=Math.round(100*Math.max(b,$))/100}b||(l.addClass(t,d),e.blockTransition&&L(f,!1));var w=m(t,e.cacheKey+" "+d),k=Math.max(w.transitionDuration,w.animationDuration);if(0!==k){!b&&a&&0<Object.keys(a).length&&(w.transitionDuration||(t.css("transition",w.animationDuration+"s linear all"),g.push("transition")),t.css(a));var h=Math.max(w.transitionDelay,w.animationDelay),A=1e3*h;0<g.length&&(y=f.getAttribute("style")||"",";"!==y.charAt(y.length-1)&&(y+=";"),f.setAttribute("style",y+" "));var x,S=Date.now(),E=O+" "+D,h=1e3*(b+1.5*(h+k));return b>0&&(l.addClass(t,p),x=o(function(){x=null,0<w.transitionDuration&&L(f,!1),0<w.animationDuration&&(f.style[M+"PlayState"]=""),l.addClass(t,d),l.removeClass(t,p),a&&(0===w.transitionDuration&&t.css("transition",w.animationDuration+"s linear all"),t.css(a),g.push("transition"))},1e3*b,!1)),t.on(E,c),e.closeAnimationFns.push(function(){s(),n()}),e.running++,v(t,h),s}l.removeClass(t,d),C(t,r),n()}else n()}function L(e,t){e.style[S+"Property"]=t?"none":""}function w(e,t,r,n){return b(e,t,r,n)?function(e){e&&C(t,r)}:void 0}function k(e,t,r,n,a){return t.data("$$ngAnimateCSS3Data")?$(e,t,r,n,a):(C(t,r),void n())}function A(e,t,r,n,a){var i=w(e,t,r,a.from);if(i){var o=i;return g(t,function(){o=k(e,t,r,n,a.to)}),function(e){(o||s)(e)}}p(),n()}function C(e,t){l.removeClass(e,t);var r=e.data("$$ngAnimateCSS3Data");r&&(r.running&&r.running--,r.running&&0!==r.running||e.removeData("$$ngAnimateCSS3Data"))}function x(e,t){var r="";return e=f(e)?e:e.split(/\s+/),u(e,function(e,n){e&&0<e.length&&(r+=(n>0?" ":"")+e+t)}),r}var S,D,M,O,P="";e.ontransitionend===r&&e.onwebkittransitionend!==r?(P="-webkit-",S="WebkitTransition",D="webkitTransitionEnd transitionend"):(S="transition",D="transitionend"),e.onanimationend===r&&e.onwebkitanimationend!==r?(P="-webkit-",M="WebkitAnimation",O="webkitAnimationEnd animationend"):(M="animation",O="animationend");var E,H={},T=0,j=[],B=null,N=0,I=[];return{animate:function(e,t,r,n,a,i){return i=i||{},i.from=r,i.to=n,A("animate",e,t,a,i)},enter:function(e,t,r){return r=r||{},A("enter",e,"ng-enter",t,r)},leave:function(e,t,r){return r=r||{},A("leave",e,"ng-leave",t,r)},move:function(e,t,r){return r=r||{},A("move",e,"ng-move",t,r)},beforeSetClass:function(e,t,r,n,a){return a=a||{},t=x(r,"-remove")+" "+x(t,"-add"),(a=w("setClass",e,t,a.from))?(g(e,n),a):(p(),void n())},beforeAddClass:function(e,t,r,n){return n=n||{},(t=w("addClass",e,x(t,"-add"),n.from))?(g(e,r),t):(p(),void r())},beforeRemoveClass:function(e,t,r,n){return n=n||{},(t=w("removeClass",e,x(t,"-remove"),n.from))?(g(e,r),t):(p(),void r())},setClass:function(e,t,r,n,a){return a=a||{},r=x(r,"-remove"),t=x(t,"-add"),k("setClass",e,r+" "+t,n,a.to)},addClass:function(e,t,r,n){return n=n||{},k("addClass",e,x(t,"-add"),r,n.to)},removeClass:function(e,t,r,n){return n=n||{},k("removeClass",e,x(t,"-remove"),r,n.to)}}}])}])}(window,window.angular),function(e,t,r){"use strict";t.module("ngAria",["ng"]).provider("$aria",function(){function e(e,t,n){return function(a,i,o){var l=o.$normalize(t);r[l]&&!o[l]&&a.$watch(o[e],function(e){n&&(e=!e),i.attr(t,e)})}}var r={ariaHidden:!0,ariaChecked:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaMultiline:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0};this.config=function(e){r=t.extend(r,e)},this.$get=function(){return{config:function(e){return r[e]},$$watchExpr:e}}}).directive("ngShow",["$aria",function(e){return e.$$watchExpr("ngShow","aria-hidden",!0)}]).directive("ngHide",["$aria",function(e){return e.$$watchExpr("ngHide","aria-hidden",!1)}]).directive("ngModel",["$aria",function(e){function t(t,r,n){return e.config(r)&&!n.attr(t)}function r(e,t){return!t.attr("role")&&t.attr("type")===e&&"INPUT"!==t[0].nodeName}function n(e,t){var r=e.type,n=e.role;return"checkbox"===(r||n)||"menuitemcheckbox"===n?"checkbox":"radio"===(r||n)||"menuitemradio"===n?"radio":"range"===r||"progressbar"===n||"slider"===n?"range":"textbox"===(r||n)||"TEXTAREA"===t[0].nodeName?"multiline":""}return{restrict:"A",require:"?ngModel",priority:200,link:function(a,i,o,l){function s(){return l.$modelValue}function u(){return d?(d=!1,function(e){e=o.value==l.$viewValue,i.attr("aria-checked",e),i.attr("tabindex",0-!e)}):function(e){i.attr("aria-checked",o.value==l.$viewValue)}}function c(e){i.attr("aria-checked",!l.$isEmpty(l.$viewValue))}var f=n(o,i),d=t("tabindex","tabindex",i);switch(f){case"radio":case"checkbox":r(f,i)&&i.attr("role",f),t("aria-checked","ariaChecked",i)&&a.$watch(s,"radio"===f?u():c);break;case"range":r(f,i)&&i.attr("role","slider"),e.config("ariaValue")&&(o.min&&!i.attr("aria-valuemin")&&i.attr("aria-valuemin",o.min),o.max&&!i.attr("aria-valuemax")&&i.attr("aria-valuemax",o.max),i.attr("aria-valuenow")||a.$watch(s,function(e){i.attr("aria-valuenow",e)}));break;case"multiline":t("aria-multiline","ariaMultiline",i)&&i.attr("aria-multiline",!0)}d&&i.attr("tabindex",0),l.$validators.required&&t("aria-required","ariaRequired",i)&&a.$watch(function(){return l.$error.required},function(e){i.attr("aria-required",!!e)}),t("aria-invalid","ariaInvalid",i)&&a.$watch(function(){return l.$invalid},function(e){i.attr("aria-invalid",!!e)})}}}]).directive("ngDisabled",["$aria",function(e){return e.$$watchExpr("ngDisabled","aria-disabled")}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(e,t,r,n){t.attr("aria-live")||t.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(e,t){return{restrict:"A",compile:function(r,n){var a=t(n.ngClick,null,!0);return function(t,r,n){function i(e,t){return-1!==t.indexOf(e[0].nodeName)?!0:void 0}var o=["BUTTON","A","INPUT","TEXTAREA"];r.attr("role")||i(r,o)||r.attr("role","button"),e.config("tabindex")&&!r.attr("tabindex")&&r.attr("tabindex",0),!e.config("bindKeypress")||n.ngKeypress||i(r,o)||r.on("keypress",function(e){function r(){a(t,{$event:e})}32!==e.keyCode&&13!==e.keyCode||t.$apply(r)})}}}}]).directive("ngDblclick",["$aria",function(e){return function(t,r,n){e.config("tabindex")&&!r.attr("tabindex")&&r.attr("tabindex",0)}}])}(window,window.angular),function(e,t,r){"use strict";function n(e,r){r=r||{},t.forEach(r,function(e,t){delete r[t]});for(var n in e)!e.hasOwnProperty(n)||"$"===n.charAt(0)&&"$"===n.charAt(1)||(r[n]=e[n]);return r}var a=t.$$minErr("$resource"),i=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;t.module("ngResource",["ng"]).provider("$resource",function(){var e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(o,l){function s(t,r){this.template=t,this.defaults=d({},e.defaults,r),this.urlParams={}}function u(v,h,m,y){function b(e,t){var n={};return t=d({},h,t),f(t,function(t,o){g(t)&&(t=t());var l;if(t&&t.charAt&&"@"==t.charAt(0)){l=e;var s=t.substr(1);if(null==s||""===s||"hasOwnProperty"===s||!i.test("."+s))throw a("badmember",s);for(var s=s.split("."),u=0,c=s.length;c>u&&l!==r;u++){var f=s[u];l=null!==l?l[f]:r}}else l=t;n[o]=l}),n}function $(e){return e.resource}function L(e){n(e||{},this)}var w=new s(v,y);return m=d({},e.defaults.actions,m),L.prototype.toJSON=function(){var e=d({},this);return delete e.$promise,delete e.$resolved,e},f(m,function(e,i){var s=/^(POST|PUT|PATCH)$/i.test(e.method);L[i]=function(u,v,h,m){var y,k,A,C={};switch(arguments.length){case 4:A=m,k=h;case 3:case 2:if(!g(v)){C=u,y=v,k=h;break}if(g(u)){k=u,A=v;break}k=v,A=h;case 1:g(u)?k=u:s?y=u:C=u;break;case 0:break;default:throw a("badargs",arguments.length)}var x=this instanceof L,S=x?y:e.isArray?[]:new L(y),D={},M=e.interceptor&&e.interceptor.response||$,O=e.interceptor&&e.interceptor.responseError||r;return f(e,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(D[t]=p(e))}),s&&(D.data=y),w.setUrlParams(D,d({},b(y,e.params||{}),C),e.url),C=o(D).then(function(r){var o=r.data,l=S.$promise;if(o){if(t.isArray(o)!==!!e.isArray)throw a("badcfg",i,e.isArray?"array":"object",t.isArray(o)?"array":"object");e.isArray?(S.length=0,f(o,function(e){S.push("object"==typeof e?new L(e):e)})):(n(o,S),S.$promise=l)}return S.$resolved=!0,r.resource=S,r},function(e){return S.$resolved=!0,(A||c)(e),l.reject(e)}),C=C.then(function(e){var t=M(e);return(k||c)(t,e.headers),t},O),x?C:(S.$promise=C,S.$resolved=!1,S)},L.prototype["$"+i]=function(e,t,r){return g(e)&&(r=t,t=e,e={}),e=L[i].call(this,e,this,t,r),e.$promise||e}}),L.bind=function(e){return u(v,d({},h,e),m)},L}var c=t.noop,f=t.forEach,d=t.extend,p=t.copy,g=t.isFunction;return s.prototype={setUrlParams:function(e,r,n){var i,o,l=this,s=n||l.template,u=l.urlParams={};f(s.split(/\W/),function(e){if("hasOwnProperty"===e)throw a("badname");!/^\d+$/.test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(s)&&(u[e]=!0)}),s=s.replace(/\\:/g,":"),r=r||{},f(l.urlParams,function(e,n){i=r.hasOwnProperty(n)?r[n]:l.defaults[n],t.isDefined(i)&&null!==i?(o=encodeURIComponent(i).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),s=s.replace(new RegExp(":"+n+"(\\W|$)","g"),function(e,t){return o+t})):s=s.replace(new RegExp("(/?):"+n+"(\\W|$)","g"),function(e,t,r){return"/"==r.charAt(0)?r:t+r})}),l.defaults.stripTrailingSlashes&&(s=s.replace(/\/+$/,"")||"/"),s=s.replace(/\/\.(?=\w+($|\?))/,"."),e.url=s.replace(/\/\\\./,"/."),f(r,function(t,r){l.urlParams[r]||(e.params=e.params||{},e.params[r]=t)})}},u}]})}(window,window.angular),function(e,t,r){"use strict";function n(e){var r=[];return s(r,t.noop).chars(e),r.join("")}function a(e){var t={};e=e.split(",");var r;for(r=0;r<e.length;r++)t[e[r]]=!0;return t}function i(e,r){function n(e,n,i,l){if(n=t.lowercase(n),w[n])for(;y.last()&&k[y.last()];)a("",y.last());L[n]&&y.last()==n&&a("",n),(l=$[n]||!!l)||y.push(n);var s={};i.replace(d,function(e,t,r,n,a){s[t]=o(r||n||a||"")}),r.start&&r.start(n,s,l)}function a(e,n){var a,i=0;if(n=t.lowercase(n))for(i=y.length-1;i>=0&&y[i]!=n;i--);if(i>=0){for(a=y.length-1;a>=i;a--)r.end&&r.end(y[a]);y.length=i}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var i,l,s,y=[],b=e;for(y.last=function(){return y[y.length-1]};e;){if(s="",l=!0,y.last()&&A[y.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(m,"$1"),r.chars&&r.chars(o(t)),""}),a("",y.last())):(0===e.indexOf("<!--")?(i=e.indexOf("--",4),i>=0&&e.lastIndexOf("-->",i)===i&&(r.comment&&r.comment(e.substring(4,i)),e=e.substring(i+3),l=!1)):h.test(e)?(i=e.match(h))&&(e=e.replace(i[0],""),l=!1):g.test(e)?(i=e.match(f))&&(e=e.substring(i[0].length),i[0].replace(f,a),l=!1):p.test(e)&&((i=e.match(c))?(i[4]&&(e=e.substring(i[0].length),i[0].replace(c,n)),l=!1):(s+="<",e=e.substring(1))),l&&(i=e.indexOf("<"),s+=0>i?e:e.substring(0,i),e=0>i?"":e.substring(i),r.chars&&r.chars(o(s)))),e==b)throw u("badparse",e);b=e}a()}function o(e){return e?(D.innerHTML=e.replace(/</g,"&lt;"),D.textContent):""}function l(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(e,r){
var n=!1,a=t.bind(e,e.push);return{start:function(e,i,o){e=t.lowercase(e),!n&&A[e]&&(n=e),n||!0!==C[e]||(a("<"),a(e),t.forEach(i,function(n,i){var o=t.lowercase(i),s="img"===e&&"src"===o||"background"===o;!0!==S[o]||!0===x[o]&&!r(n,s)||(a(" "),a(i),a('="'),a(l(n)),a('"'))}),a(o?"/>":">"))},end:function(e){e=t.lowercase(e),n||!0!==C[e]||(a("</"),a(e),a(">")),e==n&&(n=!1)},chars:function(e){n||a(l(e))}}}var u=t.$$minErr("$sanitize"),c=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,d=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,g=/^<\//,v=/\x3c!--(.*?)--\x3e/g,h=/<!DOCTYPE([^>]*?)>/i,m=/<!\[CDATA\[(.*?)]]\x3e/g,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,$=a("area,br,col,hr,img,wbr");e=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r=a("rp,rt");var L=t.extend({},r,e),w=t.extend({},e,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),k=t.extend({},r,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));e=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var A=a("script,style"),C=t.extend({},$,w,k,L,e),x=a("background,cite,href,longdesc,src,usemap,xlink:href");e=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),r=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");var S=t.extend({},x,r,e),D=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(t){var r=[];return i(t,s(r,function(t,r){return!/^unsafe/.test(e(t,r))})),r.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,a=/^mailto:/;return function(i,o){function l(e){e&&p.push(n(e))}function s(e,r){p.push("<a "),t.isDefined(o)&&p.push('target="',o,'" '),p.push('href="',e.replace(/"/g,"&quot;"),'">'),l(r),p.push("</a>")}if(!i)return i;for(var u,c,f,d=i,p=[];u=d.match(r);)c=u[0],u[2]||u[4]||(c=(u[3]?"http://":"mailto:")+c),f=u.index,l(d.substr(0,f)),s(c,u[0].replace(a,"")),d=d.substring(f+u[0].length);return l(d),e(p.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,r){"use strict";function n(e,t){return I(new(I(function(){},{prototype:e})),t)}function a(e){return N(arguments,function(t){t!==e&&N(t,function(t,r){e.hasOwnProperty(r)||(e[r]=t)})}),e}function i(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function o(e){if(Object.keys)return Object.keys(e);var t=[];return N(e,function(e,r){t.push(r)}),t}function l(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var r=e.length>>>0,n=Number(arguments[2])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=r);r>n;n++)if(n in e&&e[n]===t)return n;return-1}function s(e,t,r,n){var a,s=i(r,n),u={},c=[];for(var f in s)if(s[f].params&&(a=o(s[f].params),a.length))for(var d in a)l(c,a[d])>=0||(c.push(a[d]),u[a[d]]=e[a[d]]);return I({},u,t)}function u(e,t,r){if(!r){r=[];for(var n in e)r.push(n)}for(var a=0;a<r.length;a++){var i=r[a];if(e[i]!=t[i])return!1}return!0}function c(e,t){var r={};return N(e,function(e){r[e]=t[e]}),r}function f(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in e)-1==l(r,n)&&(t[n]=e[n]);return t}function d(e,t){var r=B(e),n=r?[]:{};return N(e,function(e,a){t(e,a)&&(n[r?n.length:a]=e)}),n}function p(e,t){var r=B(e)?[]:{};return N(e,function(e,n){r[n]=t(e,n)}),r}function g(e,t){var n=1,i=2,s={},u=[],c=s,d=I(e.when(s),{$$promises:s,$$values:s});this.study=function(s){function p(e,r){if(y[r]!==i){if(m.push(r),y[r]===n)throw m.splice(0,l(m,r)),new Error("Cyclic dependency: "+m.join(" -> "));if(y[r]=n,T(e))h.push(r,[function(){return t.get(e)}],u);else{var a=t.annotate(e);N(a,function(e){e!==r&&s.hasOwnProperty(e)&&p(s[e],e)}),h.push(r,e,a)}m.pop(),y[r]=i}}function g(e){return j(e)&&e.then&&e.$$promises}if(!j(s))throw new Error("'invocables' must be an object");var v=o(s||{}),h=[],m=[],y={};return N(s,p),s=m=y=null,function(n,i,o){function l(){--$||(L||a(b,i.$$values),m.$$values=b,m.$$promises=m.$$promises||!0,delete m.$$inheritedValues,p.resolve(b))}function s(e){m.$$failure=e,p.reject(e)}function u(r,a,i){function u(e){f.reject(e),s(e)}function c(){if(!E(m.$$failure))try{f.resolve(t.invoke(a,o,b)),f.promise.then(function(e){b[r]=e,l()},u)}catch(e){u(e)}}var f=e.defer(),d=0;N(i,function(e){y.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(d++,y[e].then(function(t){b[e]=t,--d||c()},u))}),d||c(),y[r]=f.promise}if(g(n)&&o===r&&(o=i,i=n,n=null),n){if(!j(n))throw new Error("'locals' must be an object")}else n=c;if(i){if(!g(i))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else i=d;var p=e.defer(),m=p.promise,y=m.$$promises={},b=I({},n),$=1+h.length/3,L=!1;if(E(i.$$failure))return s(i.$$failure),m;i.$$inheritedValues&&a(b,f(i.$$inheritedValues,v)),I(y,i.$$promises),i.$$values?(L=a(b,f(i.$$values,v)),m.$$inheritedValues=f(i.$$values,v),l()):(i.$$inheritedValues&&(m.$$inheritedValues=f(i.$$inheritedValues,v)),i.then(l,s));for(var w=0,k=h.length;k>w;w+=3)n.hasOwnProperty(h[w])?l():u(h[w],h[w+1],h[w+2]);return m}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function v(e,t,r){this.fromConfig=function(e,t,r){return E(e.template)?this.fromString(e.template,t):E(e.templateUrl)?this.fromUrl(e.templateUrl,t):E(e.templateProvider)?this.fromProvider(e.templateProvider,t,r):null},this.fromString=function(e,t){return H(e)?e(t):e},this.fromUrl=function(r,n){return H(r)&&(r=r(n)),null==r?null:e.get(r,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,n){return r.invoke(e,null,n||{params:t})}}function h(e,t,a){function i(t,r,n,a){if(h.push(t),g[t])return g[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(v[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return v[t]=new q.Param(t,r,n,a),v[t]}function o(e,t,r,n){var a=["",""],i=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return i;switch(r){case!1:a=["(",")"+(n?"?":"")];break;case!0:a=["?(",")?"];break;default:a=["("+r+"|",")?"]}return i+a[0]+t+a[1]}function l(a,i){var o,l,s,u,c;return o=a[2]||a[3],c=t.params[o],s=e.substring(d,a.index),l=i?a[4]:a[4]||("*"==a[1]?".*":null),u=q.type(l||"string")||n(q.type("string"),{pattern:new RegExp(l,t.caseInsensitive?"i":r)}),{id:o,regexp:l,segment:s,type:u,cfg:c}}t=I({params:{}},j(t)?t:{});var s,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",d=0,p=this.segments=[],g=a?a.params:{},v=this.params=a?a.params.$$new():new q.ParamSet,h=[];this.source=e;for(var m,y,b;(s=u.exec(e))&&(m=l(s,!1),!(m.segment.indexOf("?")>=0));)y=i(m.id,m.type,m.cfg,"path"),f+=o(m.segment,y.type.pattern.source,y.squash,y.isOptional),p.push(m.segment),d=u.lastIndex;b=e.substring(d);var $=b.indexOf("?");if($>=0){var L=this.sourceSearch=b.substring($);if(b=b.substring(0,$),this.sourcePath=e.substring(0,d+$),L.length>0)for(d=0;s=c.exec(L);)m=l(s,!0),y=i(m.id,m.type,m.cfg,"search"),d=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=o(b)+(t.strict===!1?"/?":"")+"$",p.push(b),this.regexp=new RegExp(f,t.caseInsensitive?"i":r),this.prefix=p[0],this.$$paramNames=h}function m(e){I(this,e)}function y(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function a(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function i(){return{strict:v,caseInsensitive:g}}function s(e){return H(e)||B(e)&&H(e[e.length-1])}function u(){for(;w.length;){var e=w.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend($[e.name],f.invoke(e.def))}}function c(e){I(this,e||{})}q=this;var f,g=!1,v=!0,b=!1,$={},L=!0,w=[],k={string:{encode:e,decode:a,is:function(e){return"string"==typeof e},pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return E(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):r},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):r},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,is:t.identity,equals:t.equals,pattern:/.*/}};y.$$getDefaultValue=function(e){if(!s(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return E(e)&&(g=e),g},this.strictMode=function(e){return E(e)&&(v=e),v},this.defaultSquashPolicy=function(e){if(!E(e))return b;if(e!==!0&&e!==!1&&!T(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return b=e,e},this.compile=function(e,t){return new h(e,I(i(),t))},this.isMatcher=function(e){if(!j(e))return!1;var t=!0;return N(h.prototype,function(r,n){H(r)&&(t=t&&E(e[n])&&H(e[n]))}),t},this.type=function(e,t,r){if(!E(t))return $[e];if($.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return $[e]=new m(I({name:e},t)),r&&(w.push({name:e,def:r}),L||u()),this},N(k,function(e,t){$[t]=new m(I({name:t},e))}),$=n($,{}),this.$get=["$injector",function(e){return f=e,L=!1,u(),N(k,function(e,t){$[t]||($[t]=new m(e))}),this}],this.Param=function(e,t,n,a){function i(e){var t=j(e)?o(e):[],r=-1===l(t,"value")&&-1===l(t,"type")&&-1===l(t,"squash")&&-1===l(t,"array");return r&&(e={value:e}),e.$$fn=s(e.value)?e.value:function(){return e.value},e}function u(t,r,n){if(t.type&&r)throw new Error("Param '"+e+"' has two type configurations.");return r?r:t.type?t.type instanceof m?t.type:new m(t.type):"config"===n?$.any:$.string}function c(){var t={array:"search"===a?"auto":!1},r=e.match(/\[\]$/)?{array:!0}:{};return I(t,r,n).array}function g(e,t){var r=e.squash;if(!t||r===!1)return!1;if(!E(r)||null==r)return b;if(r===!0||T(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function v(e,t,n,a){var i,o,s=[{from:"",to:n||t?r:""},{from:null,to:n||t?r:""}];return i=B(e.replace)?e.replace:[],T(a)&&i.push({from:a,to:r}),o=p(i,function(e){return e.from}),d(s,function(e){return-1===l(o,e.from)}).concat(i)}function h(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(n.$$fn);if(null!==e&&e!==r&&!w.type.is(e))throw new Error("Default value ("+e+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return e}function y(e){function t(e){return function(t){return t.from===e}}function r(e){var r=p(d(w.replace,t(e)),function(e){return e.to});return r.length?r[0]:e}return e=r(e),E(e)?w.type.$normalize(e):h()}function L(){return"{Param:"+e+" "+t+" squash: '"+C+"' optional: "+A+"}"}var w=this;n=i(n),t=u(n,t,a);var k=c();t=k?t.$asArray(k,"search"===a):t,"string"!==t.name||k||"path"!==a||n.value!==r||(n.value="");var A=n.value!==r,C=g(n,A),x=v(n,k,A,C);I(this,{id:e,type:t,location:a,array:k,squash:C,replace:x,isOptional:A,value:y,dynamic:r,config:n,toString:L})},c.prototype={$$new:function(){return n(this,I(new c,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],r=this,n=o(c.prototype);r;)t.push(r),r=r.$$parent;return t.reverse(),N(t,function(t){N(o(t),function(t){-1===l(e,t)&&-1===l(n,t)&&e.push(t)})}),e},$$values:function(e){var t={},r=this;return N(r.$$keys(),function(n){t[n]=r[n].value(e&&e[n])}),t},$$equals:function(e,t){var r=!0,n=this;return N(n.$$keys(),function(a){var i=e&&e[a],o=t&&t[a];n[a].type.equals(i,o)||(r=!1)}),r},$$validates:function(e){var n,a,i,o,l,s=this.$$keys();for(n=0;n<s.length&&(a=this[s[n]],i=e[s[n]],i!==r&&null!==i||!a.isOptional);n++){if(o=a.type.$normalize(i),!a.type.is(o))return!1;if(l=a.type.encode(o),t.isString(l)&&!a.type.pattern.exec(l))return!1}return!0},$$parent:r},this.ParamSet=c}function b(e,n){function a(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function i(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function o(e,t,r){if(!r)return!1;var n=e.invoke(t,t,{$match:r});return E(n)?n:!0}function l(n,a,i,o){function l(e,t,r){return"/"===v?e:t?v.slice(0,-1)+e:r?v.slice(1)+e:e}function d(e){function t(e){var t=e(i,n);return t?(T(t)&&n.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){var a=g&&n.url()===g;if(g=r,a)return!0;var o,l=u.length;for(o=0;l>o;o++)if(t(u[o]))return;c&&t(c)}}function p(){return s=s||a.$on("$locationChangeSuccess",d)}var g,v=o.baseHref(),h=n.url();return f||p(),{sync:function(){d()},listen:function(){return p()},update:function(e){return e?void(h=n.url()):void(n.url()!==h&&(n.url(h),n.replace()))},push:function(e,t,a){var i=e.format(t||{});null!==i&&t&&t["#"]&&(i+="#"+t["#"]),n.url(i),g=a&&a.$$avoidResync?n.url():r,a&&a.replace&&n.replace()},href:function(r,a,i){if(!r.validates(a))return null;var o=e.html5Mode();t.isObject(o)&&(o=o.enabled);var s=r.format(a);if(i=i||{},o||null===s||(s="#"+e.hashPrefix()+s),null!==s&&a&&a["#"]&&(s+="#"+a["#"]),s=l(s,o,i.absolute),!i.absolute||!s)return s;var u=!o&&s?"/":"",c=n.port();return c=80===c||443===c?"":":"+c,[n.protocol(),"://",n.host(),c,u,s].join("")}}}var s,u=[],c=null,f=!1;this.rule=function(e){if(!H(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(T(e)){var t=e;e=function(){return t}}else if(!H(e))throw new Error("'rule' must be a function");return c=e,this},this.when=function(e,t){var r,l=T(t);if(T(e)&&(e=n.compile(e)),!l&&!H(t)&&!B(t))throw new Error("invalid 'handler' in when()");var s={matcher:function(e,t){return l&&(r=n.compile(t),t=["$match",function(e){return r.format(e)}]),I(function(r,n){return o(r,t,e.exec(n.path(),n.search()))},{prefix:T(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return l&&(r=t,t=["$match",function(e){return i(r,e)}]),I(function(r,n){return o(r,t,e.exec(n.path()))},{prefix:a(e)})}},u={matcher:n.isMatcher(e),regex:e instanceof RegExp};for(var c in u)if(u[c])return this.rule(s[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===r&&(e=!0),f=e},this.$get=l,l.$inject=["$location","$rootScope","$injector","$browser"]}function $(e,a){function i(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function f(e,t){if(!e)return r;var n=T(e),a=n?e:e.name,o=i(a);if(o){if(!t)throw new Error("No reference point given for path '"+a+"'");t=f(t);for(var l=a.split("."),s=0,u=l.length,c=t;u>s;s++)if(""!==l[s]||0!==s){if("^"!==l[s])break;if(!c.parent)throw new Error("Path '"+a+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;l=l.slice(s).join("."),a=c.name+(c.name&&l?".":"")+l}var d=A[a];return!d||!n&&(n||d!==e&&d.self!==e)?r:d}function d(e,t){C[e]||(C[e]=[]),C[e].push(t)}function g(e){for(var t=C[e]||[];t.length;)v(t.shift())}function v(t){t=n(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var r=t.name;if(!T(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(A.hasOwnProperty(r))throw new Error("State '"+r+"'' is already defined");var a=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")):T(t.parent)?t.parent:j(t.parent)&&T(t.parent.name)?t.parent.name:"";if(a&&!A[a])return d(a,t.self);for(var i in S)H(S[i])&&(t[i]=S[i](t,S.$delegates[i]));return A[r]=t,!t[x]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,r){k.$current.navigable==t&&u(e,r)||k.transitionTo(t,e,{inherit:!0,location:!1})}]),g(r),t}function h(e){return e.indexOf("*")>-1}function m(e){for(var t=e.split("."),r=k.$current.name.split("."),n=0,a=t.length;a>n;n++)"*"===t[n]&&(r[n]="*");return"**"===t[0]&&(r=r.slice(l(r,t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(l(r,t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length!=r.length?!1:r.join("")===t.join("")}function y(e,t){return T(e)&&!E(t)?S[e]:H(t)&&T(e)?(S[e]&&!S.$delegates[e]&&(S.$delegates[e]=S[e]),S[e]=t,this):this}function b(e,t){return j(e)?t=e:t.name=e,v(t),this}function $(e,a,i,l,d,g,v){function y(t,r,n,i){var o=e.$broadcast("$stateNotFound",t,r,n);if(o.defaultPrevented)return v.update(),S;if(!o.retry)return null;if(i.$retry)return v.update(),D;var l=k.transition=a.when(o.retry);return l.then(function(){return l!==k.transition?$:(t.options.$retry=!0,k.transitionTo(t.to,t.toParams,t.options))},function(){return S}),v.update(),l}function b(e,r,n,o,s,u){var f=n?r:c(e.params.$$keys(),r),p={$stateParams:f};s.resolve=d.resolve(e.resolve,p,s.resolve,e);var g=[s.resolve.then(function(e){s.globals=e})];return o&&g.push(o),N(e.views,function(r,n){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return i.load(n,{view:r,locals:p,params:f,notify:u.notify})||""}],g.push(d.resolve(a,p,s.resolve,e).then(function(i){if(H(r.controllerProvider)||B(r.controllerProvider)){var o=t.extend({},a,p,i);i.$$controller=l.invoke(r.controllerProvider,null,o)}else i.$$controller=r.controller;i.$$state=e,i.$$controllerAs=r.controllerAs,s[n]=i}))}),a.all(g).then(function(){return s})}var $=a.reject(new Error("transition superseded")),C=a.reject(new Error("transition prevented")),S=a.reject(new Error("transition aborted")),D=a.reject(new Error("transition failed"));return w.locals={resolve:null,globals:{$stateParams:{}}},k={params:{},current:w.self,$current:w,transition:null},k.reload=function(e){return k.transitionTo(k.current,g,{reload:e||!0,inherit:!1,notify:!0})},k.go=function(e,t,r){return k.transitionTo(e,t,I({inherit:!0,relative:k.$current},r))},k.transitionTo=function(t,r,i){r=r||{},i=I({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},i||{});var o,u=k.$current,d=k.params,p=u.path,h=f(t,i.relative),m=r["#"];if(!E(h)){var A={to:t,toParams:r,options:i},S=y(A,u.self,d,i);if(S)return S;if(t=A.to,r=A.toParams,i=A.options,h=f(t,i.relative),!E(h)){if(!i.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+i.relative+"'")}}if(h[x])throw new Error("Cannot transition to abstract state '"+t+"'");if(i.inherit&&(r=s(g,r||{},k.$current,h)),!h.params.$$validates(r))return D;r=h.params.$$values(r),t=h;var M=t.path,O=0,P=M[O],H=w.locals,B=[],N=!1;if(i.reload){if(T(i.reload)||j(i.reload)){if(j(i.reload)&&!i.reload.name)throw new Error("Invalid reload state object");var q=i.reload===!0?p[0]:f(i.reload);if(i.reload&&!q)throw new Error("No such reload state '"+(T(i.reload)?i.reload:i.reload.name)+"'");for(N=!0;P&&P===p[O]&&P!==q;)H=B[O]=P.locals,O++,P=M[O]}}else for(;P&&P===p[O]&&P.ownParams.$$equals(r,d);)H=B[O]=P.locals,O++,P=M[O];if(!N&&L(t,u,H,i))return t.self.reloadOnSearch!==!1&&v.update(),k.transition=null,a.when(k.current);if(r=c(t.params.$$keys(),r||{}),i.notify&&e.$broadcast("$stateChangeStart",t.self,r,u.self,d).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,r,u.self,d),v.update(),C;for(var F=a.when(H),z=O;z<M.length;z++,P=M[z])H=B[z]=n(H),F=b(P,r,P===t,F,H,i);var G=k.transition=F.then(function(){var n,a,o;if(k.transition!==G)return $;for(n=p.length-1;n>=O;n--)o=p[n],o.self.onExit&&l.invoke(o.self.onExit,o.self,o.locals.globals),o.locals=null;for(n=O;n<M.length;n++)a=M[n],a.locals=B[n],a.self.onEnter&&l.invoke(a.self.onEnter,a.self,a.locals.globals);return m&&(r["#"]=m),k.transition!==G?$:(k.$current=t,k.current=t.self,k.params=r,R(k.params,g),k.transition=null,i.location&&t.navigable&&v.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===i.location}),i.notify&&e.$broadcast("$stateChangeSuccess",t.self,r,u.self,d),v.update(!0),k.current)},function(n){return k.transition!==G?$:(k.transition=null,o=e.$broadcast("$stateChangeError",t.self,r,u.self,d,n),o.defaultPrevented||v.update(),a.reject(n))});return G},k.is=function(e,t,n){n=I({relative:k.$current},n||{});var a=f(e,n.relative);return E(a)?k.$current!==a?!1:t?u(a.params.$$values(t),g):!0:r},k.includes=function(e,t,n){if(n=I({relative:k.$current},n||{}),T(e)&&h(e)){if(!m(e))return!1;e=k.$current.name}var a=f(e,n.relative);return E(a)?E(k.$current.includes[a.name])?t?u(a.params.$$values(t),g,o(t)):!0:!1:r},k.href=function(e,t,n){n=I({lossy:!0,inherit:!0,absolute:!1,relative:k.$current},n||{});var a=f(e,n.relative);if(!E(a))return null;n.inherit&&(t=s(g,t||{},k.$current,a));var i=a&&n.lossy?a.navigable:a;return i&&i.url!==r&&null!==i.url?v.href(i.url,c(a.params.$$keys().concat("#"),t||{}),{absolute:n.absolute}):null},k.get=function(e,t){if(0===arguments.length)return p(o(A),function(e){return A[e].self});var r=f(e,t||k.$current);return r&&r.self?r.self:null},k}function L(e,t,r,n){return e!==t||(r!==t.locals||n.reload)&&e.self.reloadOnSearch!==!1?void 0:!0}var w,k,A={},C={},x="abstract",S={parent:function(e){if(E(e.parent)&&e.parent)return f(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?f(t[1]):w},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=I({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,r={params:e.params||{}};if(T(t))return"^"==t.charAt(0)?a.compile(t.substring(1),r):(e.parent.navigable||w).url.concat(t,r);if(!t||a.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new q.ParamSet;return N(e.params||{},function(e,r){t[r]||(t[r]=new q.Param(r,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?I(e.parent.params.$$new(),e.ownParams):new q.ParamSet},views:function(e){var t={};return N(E(e.views)?e.views:{"":e},function(r,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),t[n]=r}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?I({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};w=v({name:"",url:"^",views:null,"abstract":!0}),w.navigable=null,this.decorator=y,this.state=b,this.$get=$,$.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function L(){function e(e,t){return{load:function(r,n){var a,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=I(i,n),n.view&&(a=t.fromConfig(n.view,n.params,n.locals)),a&&n.notify&&e.$broadcast("$viewContentLoading",n),a}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function w(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){return r(function(){e[0].scrollIntoView()},0,!1)}}]}function k(e,r,n,a){function i(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(t){return null}}}function o(e,t){var r=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,t,r){var n=u.enter(e,null,t,r);n&&n.then&&n.then(r)},leave:function(e,t){var r=u.leave(e,t);r&&r.then&&r.then(t)}};if(s){var n=s&&s(t,e);return{enter:function(e,t,r){n.enter(e,null,t),r()},leave:function(e,t){n.leave(e),t()}}}return r()}var l=i(),s=l("$animator"),u=l("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,i,l){return function(r,i,s){function u(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),d&&(m.leave(d,function(){f=null}),f=d,d=null)}function c(o){var c,f=C(r,s,i,a),y=f&&e.$current&&e.$current.locals[f];if(o||y!==g){c=r.$new(),g=e.$current.locals[f];var b=l(c,function(e){m.enter(e,i,function(){p&&p.$emit("$viewContentAnimationEnded"),(t.isDefined(h)&&!h||r.$eval(h))&&n(e)}),u()});d=b,p=c,p.$emit("$viewContentLoaded"),p.$eval(v)}}var f,d,p,g,v=s.onload||"",h=s.autoscroll,m=o(s,r);r.$on("$stateChangeSuccess",function(){c(!1)}),r.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function A(e,t,r,n){return{restrict:"ECA",priority:-400,compile:function(a){var i=a.html();return function(a,o,l){var s=r.$current,u=C(a,l,o,n),c=s&&s.locals[u];if(c){o.data("$uiView",{name:u,state:c.$$state}),o.html(c.$template?c.$template:i);var f=e(o.contents());if(c.$$controller){c.$scope=a,c.$element=o;var d=t(c.$$controller,c);c.$$controllerAs&&(a[c.$$controllerAs]=d),o.data("$ngControllerController",d),o.children().data("$ngControllerController",d)}f(a)}}}}}function C(e,t,r,n){var a=n(t.uiView||t.name||"")(e),i=r.inheritedData("$uiView");return a.indexOf("@")>=0?a:a+"@"+(i?i.state.name:"")}function x(e,t){var r,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function S(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function D(e,r){var n=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(a,i,o,l){var s=x(o.uiSref,e.current.name),u=null,c=S(i)||e.$current,f="[object SVGAnimatedString]"===Object.prototype.toString.call(i.prop("href"))?"xlink:href":"href",d=null,p="A"===i.prop("tagName").toUpperCase(),g="FORM"===i[0].nodeName,v=g?"action":f,h=!0,m={relative:c,inherit:!0},y=a.$eval(o.uiSrefOpts)||{};t.forEach(n,function(e){e in y&&(m[e]=y[e])});var b=function(r){if(r&&(u=t.copy(r)),h){d=e.href(s.state,u,m);var n=l[1]||l[0];return n&&n.$$addStateInfo(s.state,u),null===d?(h=!1,!1):void o.$set(v,d)}};s.paramExpr&&(a.$watch(s.paramExpr,function(e){e!==u&&b(e)},!0),u=t.copy(a.$eval(s.paramExpr))),b(),g||i.bind("click",function(t){var n=t.which||t.button;if(!(n>1||t.ctrlKey||t.metaKey||t.shiftKey||i.attr("target"))){var a=r(function(){e.go(s.state,u,m)});t.preventDefault();var o=p&&!d?1:0;t.preventDefault=function(){o--<=0&&r.cancel(a)}}})}}}function M(e,t,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,n,a){function i(){o()?n.addClass(s):n.removeClass(s)}function o(){for(var e=0;e<u.length;e++)if(l(u[e].state,u[e].params))return!0;return!1}function l(t,r){return"undefined"!=typeof a.uiSrefActiveEq?e.is(t.name,r):e.includes(t.name,r)}var s,u=[];s=r(a.uiSrefActiveEq||a.uiSrefActive||"",!1)(t),this.$$addStateInfo=function(t,r){var a=e.get(t,S(n));u.push({state:a||{name:t},params:r}),i()},t.$on("$stateChangeSuccess",i)}]}}function O(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function P(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var E=t.isDefined,H=t.isFunction,T=t.isString,j=t.isObject,B=t.isArray,N=t.forEach,I=t.extend,R=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),v.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",v);var q;h.prototype.concat=function(e,t){var r={caseInsensitive:q.caseInsensitive(),strict:q.strictMode(),squash:q.defaultSquashPolicy()};return new h(this.sourcePath+e+this.sourceSearch,I(r,t),this)},h.prototype.toString=function(){return this.source},h.prototype.exec=function(e,t){function r(e){function t(e){return e.split("").reverse().join("")}function r(e){return e.replace(/\\-/g,"-")}var n=t(e).split(/-(?!\\)/),a=p(n,t);return p(a,r).reverse()}var n=this.regexp.exec(e);if(!n)return null;t=t||{};var a,i,o,l=this.parameters(),s=l.length,u=this.segments.length-1,c={};if(u!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(a=0;u>a;a++){o=l[a];var f=this.params[o],d=n[a+1];for(i=0;i<f.replace;i++)f.replace[i].from===d&&(d=f.replace[i].to);d&&f.array===!0&&(d=r(d)),c[o]=f.value(d)}for(;s>a;a++)o=l[a],c[o]=this.params[o].value(t[o]);return c},h.prototype.parameters=function(e){return E(e)?this.params[e]||null:this.$$paramNames},h.prototype.validates=function(e){return this.params.$$validates(e)},h.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var r=this.segments,n=this.parameters(),a=this.params;if(!this.validates(e))return null;var i,o=!1,l=r.length-1,s=n.length,u=r[0];for(i=0;s>i;i++){var c=l>i,f=n[i],d=a[f],g=d.value(e[f]),v=d.isOptional&&d.type.equals(d.value(),g),h=v?d.squash:!1,m=d.type.encode(g);if(c){var y=r[i+1];if(h===!1)null!=m&&(u+=B(m)?p(m,t).join("-"):encodeURIComponent(m)),u+=y;else if(h===!0){var b=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=y.match(b)[1]}else T(h)&&(u+=h+y)}else{if(null==m||v&&h!==!1)continue;B(m)||(m=[m]),m=p(m,encodeURIComponent).join("&"+f+"="),u+=(o?"&":"?")+(f+"="+m),o=!0}}return u},m.prototype.is=function(){return!0},m.prototype.encode=function(e){return e},m.prototype.decode=function(e){return e},m.prototype.equals=function(e,t){return e==t},m.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},m.prototype.pattern=/.*/,m.prototype.toString=function(){return"{Type:"+this.name+"}"},m.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},m.prototype.$asArray=function(e,t){function n(e,t){function n(e,t){return function(){return e[t].apply(e,arguments);

}}function a(e){return B(e)?e:E(e)?[e]:[]}function i(e){switch(e.length){case 0:return r;case 1:return"auto"===t?e[0]:e;default:return e}}function o(e){return!e}function l(e,t){return function(r){r=a(r);var n=p(r,e);return t===!0?0===d(n,o).length:i(n)}}function s(e){return function(t,r){var n=a(t),i=a(r);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!e(n[o],i[o]))return!1;return!0}}this.encode=l(n(e,"encode")),this.decode=l(n(e,"decode")),this.is=l(n(e,"is"),!0),this.equals=s(n(e,"equals")),this.pattern=e.pattern,this.$normalize=l(n(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new n(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",y),t.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),b.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",b),$.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",$),L.$inject=[],t.module("ui.router.state").provider("$view",L),t.module("ui.router.state").provider("$uiViewScroll",w),k.$inject=["$state","$injector","$uiViewScroll","$interpolate"],A.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",k),t.module("ui.router.state").directive("uiView",A),D.$inject=["$state","$timeout"],M.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",M).directive("uiSrefActiveEq",M),O.$inject=["$state"],P.$inject=["$state"],t.module("ui.router.state").filter("isState",O).filter("includedByState",P)}(window,window.angular),!function(e,t){"use strict";function r(e){return/^-?\d+\.?\d*$/.test(e.replace(/["']/g,""))}var n=t.isDefined,a=t.isUndefined,i=t.isNumber,o=t.isObject,l=t.isArray,s=t.extend,u=t.toJson,c=t.fromJson,f=t.module("LocalStorageModule",[]);f.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie={expiry:e,path:t},this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,f,d){var p,g=this,v=g.prefix,h=g.cookie,m=g.notify,y=g.storageType;f?f[0]&&(f=f[0]):f=document,"."!==v.substr(-1)&&(v=v?v+".":"");var b=function(e){return v+e},$=function(){try{var r=y in t&&null!==t[y],n=b("__"+Math.round(1e7*Math.random()));return r&&(p=t[y],p.setItem(n,""),p.removeItem(n)),r}catch(a){return y="cookie",e.$broadcast("LocalStorageModule.notification.error",a.message),!1}}(),L=function(t,r){if(a(r)?r=null:(o(r)||l(r)||i(+r||r))&&(r=u(r)),!$||"cookie"===g.storageType)return $||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:r,storageType:"cookie"}),S(t,r);try{(o(r)||l(r))&&(r=u(r)),p&&p.setItem(b(t),r),m.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:r,storageType:g.storageType})}catch(n){return e.$broadcast("LocalStorageModule.notification.error",n.message),S(t,r)}return!0},w=function(t){if(!$||"cookie"===g.storageType)return $||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),D(t);var n=p?p.getItem(b(t)):null;return n&&"null"!==n?"{"===n.charAt(0)||"["===n.charAt(0)||r(n)?c(n):n:null},k=function(t){if(!$||"cookie"===g.storageType)return $||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:"cookie"}),M(t);try{p.removeItem(b(t)),m.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:g.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),M(t)}return!0},A=function(){if(!$)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=v.length,r=[];for(var n in p)if(n.substr(0,t)===v)try{r.push(n.substr(t))}catch(a){return e.$broadcast("LocalStorageModule.notification.error",a.Description),[]}return r},C=function(t){t=t||"";var r=v.slice(0,-1),n=new RegExp(r+"."+t);if(!$||"cookie"===g.storageType)return $||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),O();var a=v.length;for(var i in p)if(n.test(i))try{k(i.substr(a))}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),O()}return!0},x=function(){try{return t.navigator.cookieEnabled||"cookie"in f&&(f.cookie.length>0||(f.cookie="test").indexOf.call(f.cookie,"test")>-1)}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),!1}}(),S=function(t,r){if(a(r))return!1;if((l(r)||o(r))&&(r=u(r)),!x)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var n="",i=new Date,s="";if(null===r?(i.setTime(i.getTime()+-864e5),n="; expires="+i.toGMTString(),r=""):0!==h.expiry&&(i.setTime(i.getTime()+24*h.expiry*60*60*1e3),n="; expires="+i.toGMTString()),t){var c="; path="+h.path;h.domain&&(s="; domain="+h.domain),f.cookie=b(t)+"="+encodeURIComponent(r)+n+c+s}}catch(d){return e.$broadcast("LocalStorageModule.notification.error",d.message),!1}return!0},D=function(t){if(!x)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=f.cookie&&f.cookie.split(";")||[],n=0;n<r.length;n++){for(var a=r[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(b(t)+"=")){var i=decodeURIComponent(a.substring(v.length+t.length+1,a.length));try{var o=JSON.parse(i);return c(o)}catch(l){return i}}}return null},M=function(e){S(e,null)},O=function(){for(var e=null,t=v.length,r=f.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);var a=e.substring(t,e.indexOf("="));M(a)}},P=function(){return y},E=function(e,t,r,a){a=a||t;var i=w(a);return null===i&&n(r)?i=r:o(i)&&o(r)&&(i=s(r,i)),d(t).assign(e,i),e.$watch(t,function(e){L(a,e)},o(e[t]))},H=function(){for(var e=0,r=t[y],n=0;n<r.length;n++)0===r.key(n).indexOf(v)&&e++;return e};return{isSupported:$,getStorageType:P,set:L,add:L,get:w,keys:A,remove:k,clearAll:C,bind:E,deriveKey:b,length:H,cookie:{isSupported:x,set:S,add:S,get:D,remove:M,clearAll:O}}}]})}(window,window.angular),!function(angular){"use strict";angular.module("leaflet-directive",[]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletEvents",function(e,t,r,n,a){var i;return{restrict:"EA",replace:!0,scope:{center:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude></div></div>',controller:["$scope",function(t){i=e.defer(),this.getMap=function(){return i.promise},this.getLeafletScope=function(){return t}}],link:function(e,o,l){function s(){isNaN(l.width)?o.css("width",l.width):o.css("width",l.width+"px")}function u(){isNaN(l.height)?o.css("height",l.height):o.css("height",l.height+"px")}var c=n.isDefined,f=r.setDefaults(e.defaults,l.id),d=a.genDispatchMapEvent,p=a.getAvailableMapEvents();t.setDirectiveControls({},l.id),c(l.width)&&(s(),e.$watch(function(){return o[0].getAttribute("width")},function(){s(),g.invalidateSize()})),c(l.height)&&(u(),e.$watch(function(){return o[0].getAttribute("height")},function(){u(),g.invalidateSize()}));var g=new L.Map(o[0],r.getMapCreationDefaults(l.id));if(i.resolve(g),c(l.center)||g.setView([f.center.lat,f.center.lng],f.center.zoom),!c(l.tiles)&&!c(l.layers)){var v=L.tileLayer(f.tileLayer,f.tileLayerOptions);v.addTo(g),t.setTiles(v,l.id)}if(c(g.zoomControl)&&c(f.zoomControlPosition)&&g.zoomControl.setPosition(f.zoomControlPosition),c(g.zoomControl)&&f.zoomControl===!1&&g.zoomControl.removeFrom(g),c(g.zoomsliderControl)&&c(f.zoomsliderControl)&&f.zoomsliderControl===!1&&g.zoomsliderControl.removeFrom(g),!c(l.eventBroadcast))for(var h="broadcast",m=0;m<p.length;m++){var y=p[m];g.on(y,d(e,y,h),{eventName:y})}g.whenReady(function(){t.setMap(g,l.id)}),e.$on("$destroy",function(){g.remove(),t.unresolveMap(l.id)}),e.$on("invalidateSize",function(){g.invalidateSize()})}}}]),angular.module("leaflet-directive").factory("leafletBoundsHelpers",["$log","leafletHelpers",function(e,t){function r(e){return angular.isDefined(e)&&angular.isDefined(e.southWest)&&angular.isDefined(e.northEast)&&angular.isNumber(e.southWest.lat)&&angular.isNumber(e.southWest.lng)&&angular.isNumber(e.northEast.lat)&&angular.isNumber(e.northEast.lng)}var n=t.isArray,a=t.isNumber;return{createLeafletBounds:function(e){return r(e)?L.latLngBounds([e.southWest.lat,e.southWest.lng],[e.northEast.lat,e.northEast.lng]):void 0},isValidBounds:r,createBoundsFromArray:function(t){return n(t)&&2===t.length&&n(t[0])&&n(t[1])&&2===t[0].length&&2===t[1].length&&a(t[0][0])&&a(t[0][1])&&a(t[1][0])&&a(t[1][1])?{northEast:{lat:t[0][0],lng:t[0][1]},southWest:{lat:t[1][0],lng:t[1][1]}}:void e.error("[AngularJS - Leaflet] The bounds array is not valid.")}}}]),angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","$log","leafletHelpers","leafletMapDefaults",function(e,t,r,n){var a=r.isDefined,i=r.isObject,o={},l=function(e,t,r){var o=n.getDefaults(r);if(!o.controls.layers.visible)return!1;var l=!1;return i(e)&&Object.keys(e).forEach(function(t){var r=e[t];a(r.layerOptions)&&r.layerOptions.showOnSelector===!1||(l=!0)}),i(t)&&Object.keys(t).forEach(function(e){var r=t[e];a(r.layerParams)&&r.layerParams.showOnSelector===!1||(l=!0)}),l},s=function(e){var t=n.getDefaults(e),r={collapsed:t.controls.layers.collapsed,position:t.controls.layers.position,autoZIndex:!1};angular.extend(r,t.controls.layers.options);var i;return i=t.controls.layers&&a(t.controls.layers.control)?t.controls.layers.control.apply(this,[[],[],r]):new L.control.layers([],[],r)};return{layersControlMustBeVisible:l,updateLayersControl:function(e,t,r,n,i,u){var c,f=o[t],d=l(n,i,t);if(a(f)&&r){for(c in u.baselayers)f.removeLayer(u.baselayers[c]);for(c in u.overlays)f.removeLayer(u.overlays[c]);e.removeControl(f),delete o[t]}if(d){f=s(t),o[t]=f;for(c in n){var p=a(n[c].layerOptions)&&n[c].layerOptions.showOnSelector===!1;!p&&a(u.baselayers[c])&&f.addBaseLayer(u.baselayers[c],n[c].name)}for(c in i){var g=a(i[c].layerParams)&&i[c].layerParams.showOnSelector===!1;!g&&a(u.overlays[c])&&f.addOverlay(u.overlays[c],i[c].name)}e.addControl(f)}return d}}}]),angular.module("leaflet-directive").service("leafletData",["$log","$q","leafletHelpers",function(e,t,r){var n=r.getDefer,a=r.getUnresolvedDefer,i=r.setResolvedDefer,o={},l=this,s=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},u=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];u.forEach(function(e){o[e]={}}),this.unresolveMap=function(e){var t=r.obtainEffectiveMapId(o.map,e);u.forEach(function(e){o[e][t]=void 0})},u.forEach(function(e){var t=s(e);l["set"+t]=function(t,r){var n=a(o[e],r);n.resolve(t),i(o[e],r)},l["get"+t]=function(t){var r=n(o[e],t);return r.promise}})}]),angular.module("leaflet-directive").service("leafletDirectiveControlsHelpers",["$log","leafletData","leafletHelpers",function(e,t,r){var n=r.isDefined,a=r.isString,i=r.isObject,o=r.errorHeader,l=o+"[leafletDirectiveControlsHelpers",s=function(r,o,s,u){var c=l+".extend] ",f={};if(!n(o))return void e.error(c+"thingToAddName cannot be undefined");if(a(o)&&n(s)&&n(u))f[o]={create:s,clean:u};else{if(!i(o)||n(s)||n(u))return void e.error(c+"incorrect arguments");f=o}t.getDirectiveControls().then(function(e){angular.extend(e,f),t.setDirectiveControls(e,r)})};return{extend:s}}]),angular.module("leaflet-directive").factory("leafletEvents",["leafletMapEvents","leafletMarkerEvents","leafletPathEvents",function(e,t,r){var n={};return angular.extend(n,e,t,r),n}]),angular.module("leaflet-directive").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(e,t){var r=e,n=t,a=function(e,t){return this.lat=e,this.lng=t,this},i=function(e){return Array.isArray(e)&&2===e.length?e[1]:r.isDefined(e.type)&&"Point"===e.type?+e.coordinates[1]:+e.lat},o=function(e){return Array.isArray(e)&&2===e.length?e[0]:r.isDefined(e.type)&&"Point"===e.type?+e.coordinates[0]:+e.lng},l=function(e){if(r.isUndefined(e))return!1;if(r.isArray(e)){if(2===e.length&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0}else if(r.isDefined(e.type)&&"Point"===e.type&&r.isArray(e.coordinates)&&2===e.coordinates.length&&r.isNumber(e.coordinates[0])&&r.isNumber(e.coordinates[1]))return!0;var t=n.all(["lat","lng"],function(t){return r.isDefined(e[t])&&r.isNumber(e[t])});return t},s=function(e){if(e&&l(e)){var t=null;if(Array.isArray(e)&&2===e.length)t=new a(e[1],e[0]);else{if(!r.isDefined(e.type)||"Point"!==e.type)return e;t=new a(e.coordinates[1],e.coordinates[0])}return angular.extend(e,t)}};return{getLat:i,getLng:o,validateCoords:l,getCoords:s}}]),angular.module("leaflet-directive").factory("leafletHelpers",["$q","$log",function(e,t){function r(e,r){var n,i;if(angular.isDefined(r))n=r;else if(0===Object.keys(e).length)n="main";else if(Object.keys(e).length>=1)for(i in e)e.hasOwnProperty(i)&&(n=i);else 0===Object.keys(e).length?n="main":t.error(a+"- You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return n}function n(t,n){var a,i=r(t,n);return angular.isDefined(t[i])&&t[i].resolvedDefer!==!0?a=t[i].defer:(a=e.defer(),t[i]={defer:a,resolvedDefer:!1}),a}var a="[AngularJS - Leaflet] ",i=angular.copy,o=i,l=function(e,t){var r;return e&&angular.isObject(e)?null!==t&&angular.isString(t)?(r=e,t.split(".").forEach(function(e){r&&(r=r[e])}),r):t:void 0},s=function(e){return e.split(".").reduce(function(e,t){return e+'["'+t+'"]'})},u=function(e){return e.reduce(function(e,t){return e+"."+t})},c=function(e){return angular.isDefined(e)&&null!==e},f=function(e){return!c(e)};return{copy:i,clone:o,errorHeader:a,getObjectValue:l,getObjectArrayPath:s,getObjectDotPath:u,defaultTo:function(e,t){return c(e)?e:t},isTruthy:function(e){return"true"===e||e===!0},isEmpty:function(e){return 0===Object.keys(e).length},isUndefinedOrEmpty:function(e){return angular.isUndefined(e)||null===e||0===Object.keys(e).length},isDefined:c,isUndefined:f,isNumber:function(e){return angular.isNumber(e)},isString:function(e){return angular.isString(e)},isArray:function(e){return angular.isArray(e)},isObject:function(e){return angular.isObject(e)},isFunction:function(e){return angular.isFunction(e)},equals:function(e,t){return angular.equals(e,t)},isValidCenter:function(e){return angular.isDefined(e)&&angular.isNumber(e.lat)&&angular.isNumber(e.lng)&&angular.isNumber(e.zoom)},isValidPoint:function(e){return angular.isDefined(e)?angular.isArray(e)?2===e.length&&angular.isNumber(e[0])&&angular.isNumber(e[1]):angular.isNumber(e.lat)&&angular.isNumber(e.lng):!1},isSameCenterOnMap:function(e,t){var r=t.getCenter(),n=t.getZoom();return e.lat&&e.lng&&r.lat.toFixed(4)===e.lat.toFixed(4)&&r.lng.toFixed(4)===e.lng.toFixed(4)&&n===e.zoom?!0:!1},safeApply:function(e,t){var r=e.$root.$$phase;"$apply"===r||"$digest"===r?e.$eval(t):e.$evalAsync(t)},obtainEffectiveMapId:r,getDefer:function(e,t){var a,i=r(e,t);return a=angular.isDefined(e[i])&&e[i].resolvedDefer!==!1?e[i].defer:n(e,t)},getUnresolvedDefer:n,setResolvedDefer:function(e,t){var n=r(e,t);e[n].resolvedDefer=!0},FullScreenControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.Fullscreen)}},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)},is:function(e){return this.isLoaded()?e instanceof L.AwesomeMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},PolylineDecoratorPlugin:{isLoaded:function(){return angular.isDefined(L.PolylineDecorator)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.PolylineDecorator:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},MakiMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.MakiMarkers)&&angular.isDefined(L.MakiMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.MakiMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},ExtraMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.ExtraMarkers)&&angular.isDefined(L.ExtraMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.ExtraMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(e){return this.isLoaded()?e instanceof L.Google:!1}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return angular.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(e){return this.isLoaded()?e instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(e){return this.isLoaded()?e instanceof L.GeoJSON.WFS:!1}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(e){return this.isLoaded()?e instanceof lvector.AGS:!1}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(e){return this.isLoaded()?e instanceof L.Yandex:!1}},DynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.dynamicMapLayer:!1}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(e){return this.isLoaded()?e instanceof L.TileLayer.GeoJSON:!1}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(e){return this.isLoaded()?e instanceof L.UtfGrid:(t.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(e){return e instanceof L.DivIcon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}},Icon:{is:function(e){return e instanceof L.Icon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]),angular.module("leaflet-directive").service("leafletIterators",["$log","leafletHelpers",function(e,t){var r,n=t,a=t.errorHeader+"leafletIterators: ",i=Object.keys,o=n.isFunction,l=n.isObject,s=Math.pow(2,53)-1,u=function(e){var t=null!==e&&e.length;return n.isNumber(t)&&t>=0&&s>=t},c=function(e){return e},f=function(e){return function(t){return null===t?void 0:t[e]}},d=function(e,t,r){if(void 0===t)return e;switch(null===r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)};case 4:return function(r,n,a,i){return e.call(t,r,n,a,i)}}return function(){return e.apply(t,arguments)}},p=function(e,t){return function(r){var n=arguments.length;if(2>n||null===r)return r;for(var a=1;n>a;a++)for(var i=arguments[a],o=e(i),l=o.length,s=0;l>s;s++){var u=o[s];t&&void 0!==r[u]||(r[u]=i[u])}return r}},g=null;r=g=p(i);var v,h=function(e,t){var r=i(t),n=r.length;if(null===e)return!n;for(var a=Object(e),o=0;n>o;o++){var l=r[o];if(t[l]!==a[l]||!(l in a))return!1}return!0},m=null;v=m=function(e){return e=r({},e),function(t){return h(t,e)}};var y,b=function(e,t,r){return null===e?c:o(e)?d(e,t,r):l(e)?v(e):f(e)},$=null;y=$=function(e,t,r){t=b(t,r);for(var n=!u(e)&&i(e),a=(n||e).length,o=0;a>o;o++){var l=n?n[o]:o;if(!t(e[l],l,e))return!1}return!0};var L=function(t,r,i,o){return i||n.isDefined(t)&&n.isDefined(r)?n.isFunction(r)?!1:(o=n.defaultTo(r,"cb"),e.error(a+o+" is not a function"),!0):(e.error(a+"collection or cb undefined"),!0)},w=function(e,t,r){if(!L(void 0,r,!0,"internalCb")&&!L(e,t))for(var n in e)r(e[n],n)},k=function(e,t){w(e,t,function(e,r){t(e,r)})};return window._?window._:{each:k,every:y,all:$}}]),angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$log","leafletHelpers",function($rootScope,$log,leafletHelpers){function isValidLayerType(e){return isString(e.type)?-1===Object.keys(layerTypes).indexOf(e.type)?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[e.type].mustHaveUrl&&!isString(e.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[e.type].mustHaveData&&!isDefined(e.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[e.type].mustHaveLayer&&!isDefined(e.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have an layer defined"),!1):layerTypes[e.type].mustHaveBounds&&!isDefined(e.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have bounds defined"),!1):layerTypes[e.type].mustHaveKey&&!isDefined(e.key)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have key defined"),!1):!0:($log.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function createLayer(e){if(isValidLayerType(e)){if(!isString(e.name))return void $log.error("[AngularJS - Leaflet] A base layer must have a name");isObject(e.layerParams)||(e.layerParams={}),isObject(e.layerOptions)||(e.layerOptions={});for(var t in e.layerParams)e.layerOptions[t]=e.layerParams[t];var r={url:e.url,data:e.data,options:e.layerOptions,layer:e.layer,type:e.layerType,bounds:e.bounds,key:e.key,pluginOptions:e.pluginOptions,user:e.user};return layerTypes[e.type].createLayer(r)}}var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isArray=leafletHelpers.isArray,isDefined=leafletHelpers.isDefined,utfGridCreateLayer=function(e){if(!Helpers.UTFGridPlugin.isLoaded())return void $log.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");var t=new L.UtfGrid(e.url,e.pluginOptions);return t.on("mouseover",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseover",e)}),t.on("mouseout",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseout",e)}),t.on("click",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridClick",e)}),t},layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer(e.url,e.options)}},mapbox:{mustHaveKey:!0,createLayer:function(e){var t="//{s}.tiles.mapbox.com/v3/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(e){return Helpers.GeoJSONPlugin.isLoaded()?new L.TileLayer.GeoJSON(e.url,e.pluginOptions,e.options):void 0}},utfGrid:{mustHaveUrl:!0,createLayer:utfGridCreateLayer},cartodbTiles:{mustHaveKey:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){return e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json",utfGridCreateLayer(e)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png",r=L.tileLayer(t,e.options);e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json";var n=utfGridCreateLayer(e);return L.layerGroup([r,n])}},wms:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wms(e.url,e.options)}},wmts:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wmts(e.url,e.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(e){var t=[];return angular.forEach(e.options.layers,function(e){t.push(createLayer(e))}),L.layerGroup(t)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"SATELLITE";return Helpers.GoogleLayerPlugin.isLoaded()?new L.Google(t,e.options):void 0}},china:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"";return Helpers.ChinaLayerPlugin.isLoaded()?L.tileLayer.chinaProvider(t,e.options):void 0}},ags:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSLayerPlugin.isLoaded()){var t=angular.copy(e.options);angular.extend(t,{url:e.url});var r=new lvector.AGS(t);return r.onAdd=function(e){this.setMap(e)},r.onRemove=function(){this.setMap(null)},r}}},dynamic:{mustHaveUrl:!0,createLayer:function(e){return Helpers.DynamicMapLayerPlugin.isLoaded()?L.esri.dynamicMapLayer(e.url,e.options):void 0}},markercluster:{mustHaveUrl:!1,createLayer:function(e){return Helpers.MarkerClusterPlugin.isLoaded()?new L.MarkerClusterGroup(e.options):void $log.error("[AngularJS - Leaflet] The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(e){return Helpers.BingLayerPlugin.isLoaded()?new L.BingLayer(e.key,e.options):void 0}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.WebGLHeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(e.options);return isDefined(e.data)&&t.setData(e.data),t}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.HeatLayerPlugin.isLoaded()){var t=new L.heatLayer;return isArray(e.data)&&t.setLatLngs(e.data),isObject(e.options)&&t.setOptions(e.options),t}}},yandex:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"map";return Helpers.YandexLayerPlugin.isLoaded()?new L.Yandex(t,e.options):void 0}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(e){return L.imageOverlay(e.url,e.bounds,e.options)}},custom:{createLayer:function(e){return e.layer instanceof L.Class?angular.copy(e.layer):void $log.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(e){return cartodb.createLayer(e.map,e.url)}}};return{createLayer:createLayer}}]),angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var e=function(e,t,r,n){if(e.innerHTML="",t.error)e.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"</div>";else if("arcgis"===r)for(var a=0;a<t.layers.length;a++){var i=t.layers[a];e.innerHTML+='<div class="info-title" data-layerid="'+i.layerId+'">'+i.layerName+"</div>";for(var o=0;o<i.legend.length;o++){var l=i.legend[o];e.innerHTML+='<div class="inline" data-layerid="'+i.layerId+'"><img src="data:'+l.contentType+";base64,"+l.imageData+'" /></div><div class="info-label" data-layerid="'+i.layerId+'">'+l.label+"</div>"}}else"image"===r&&(e.innerHTML='<img src="'+n+'"/>')},t=function(t,r,n,a){return function(){var i=L.DomUtil.create("div",r);return L.Browser.touch?L.DomEvent.on(i,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"mousewheel",L.DomEvent.stopPropagation)),e(i,t,n,a),i}},r=function(e,t){return function(){for(var r=L.DomUtil.create("div",t),n=0;n<e.colors.length;n++)r.innerHTML+='<div class="outline"><i style="background:'+e.colors[n]+'"></i></div><div class="info-label">'+e.labels[n]+"</div>";return L.Browser.touch?L.DomEvent.on(r,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(r),L.DomEvent.on(r,"mousewheel",L.DomEvent.stopPropagation)),r}};return{getOnAddLegend:t,getOnAddArrayLegend:r,updateLegend:e}}),angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(e,t){function r(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var n=t.isDefined,a=t.isObject,i=t.obtainEffectiveMapId,o={};return{getDefaults:function(e){var t=i(o,e);return o[t]},getMapCreationDefaults:function(e){var t=i(o,e),r=o[t],a={maxZoom:r.maxZoom,keyboard:r.keyboard,dragging:r.dragging,zoomControl:r.zoomControl,doubleClickZoom:r.doubleClickZoom,scrollWheelZoom:r.scrollWheelZoom,tap:r.tap,touchZoom:r.touchZoom,attributionControl:r.attributionControl,worldCopyJump:r.worldCopyJump,crs:r.crs};if(n(r.minZoom)&&(a.minZoom=r.minZoom),n(r.zoomAnimation)&&(a.zoomAnimation=r.zoomAnimation),n(r.fadeAnimation)&&(a.fadeAnimation=r.fadeAnimation),n(r.markerZoomAnimation)&&(a.markerZoomAnimation=r.markerZoomAnimation),r.map)for(var l in r.map)a[l]=r.map[l];return a},setDefaults:function(e,t){var l=r();n(e)&&(l.doubleClickZoom=n(e.doubleClickZoom)?e.doubleClickZoom:l.doubleClickZoom,l.scrollWheelZoom=n(e.scrollWheelZoom)?e.scrollWheelZoom:l.doubleClickZoom,l.tap=n(e.tap)?e.tap:l.tap,l.touchZoom=n(e.touchZoom)?e.touchZoom:l.doubleClickZoom,l.zoomControl=n(e.zoomControl)?e.zoomControl:l.zoomControl,l.zoomsliderControl=n(e.zoomsliderControl)?e.zoomsliderControl:l.zoomsliderControl,l.attributionControl=n(e.attributionControl)?e.attributionControl:l.attributionControl,l.tileLayer=n(e.tileLayer)?e.tileLayer:l.tileLayer,l.zoomControlPosition=n(e.zoomControlPosition)?e.zoomControlPosition:l.zoomControlPosition,l.keyboard=n(e.keyboard)?e.keyboard:l.keyboard,l.dragging=n(e.dragging)?e.dragging:l.dragging,n(e.controls)&&angular.extend(l.controls,e.controls),a(e.crs)?l.crs=e.crs:n(L.CRS[e.crs])&&(l.crs=L.CRS[e.crs]),n(e.center)&&angular.copy(e.center,l.center),n(e.tileLayerOptions)&&angular.copy(e.tileLayerOptions,l.tileLayerOptions),n(e.maxZoom)&&(l.maxZoom=e.maxZoom),n(e.minZoom)&&(l.minZoom=e.minZoom),n(e.zoomAnimation)&&(l.zoomAnimation=e.zoomAnimation),n(e.fadeAnimation)&&(l.fadeAnimation=e.fadeAnimation),n(e.markerZoomAnimation)&&(l.markerZoomAnimation=e.markerZoomAnimation),n(e.worldCopyJump)&&(l.worldCopyJump=e.worldCopyJump),n(e.map)&&(l.map=e.map),n(e.path)&&(l.path=e.path));var s=i(o,t);return o[s]=l,l}}}]),angular.module("leaflet-directive").service("leafletMarkersHelpers",["$rootScope","leafletHelpers","$log","$compile","leafletGeoJsonHelpers",function(e,t,r,n,a){var i=t.isDefined,o=t.defaultTo,l=t.MarkerClusterPlugin,s=t.AwesomeMarkersPlugin,u=t.MakiMarkersPlugin,c=t.ExtraMarkersPlugin,f=t.safeApply,d=t,p=t.isString,g=t.isNumber,v=t.isObject,h={},m=a,y=t.errorHeader,b=function(e){var t="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach(function(r){t+=r+": "+o(e[r],"undefined")+" \n"}),"[leafletMarker] : \n"+t},$=function(e,t){var n=t?console:r;n.debug(b(e))},w=function(e){if(i(e)&&i(e.type)&&"awesomeMarker"===e.type)return s.isLoaded()||r.error(y+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(e);

if(i(e)&&i(e.type)&&"makiMarker"===e.type)return u.isLoaded()||r.error(y+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(e);if(i(e)&&i(e.type)&&"extraMarker"===e.type)return c.isLoaded()||r.error(y+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(e);if(i(e)&&i(e.type)&&"div"===e.type)return new L.divIcon(e);if(i(e)&&i(e.type)&&"icon"===e.type)return e.icon;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";return i(e)&&i(e.iconUrl)?new L.Icon(e):new L.Icon.Default({iconUrl:t,shadowUrl:n,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},k=function(e){i(h[e])&&h.splice(e,1)},A=function(){h={}},C=function(e,t,r){if(e.closePopup(),i(r)&&i(r.overlays))for(var n in r.overlays)if((r.overlays[n]instanceof L.LayerGroup||r.overlays[n]instanceof L.FeatureGroup)&&r.overlays[n].hasLayer(e))return void r.overlays[n].removeLayer(e);if(i(h))for(var a in h)h[a].hasLayer(e)&&h[a].removeLayer(e);t.hasLayer(e)&&t.removeLayer(e)},x=function(t,r){t.openPopup();var a=t.getPopup(),o=angular.isFunction(r.getMessageScope)?r.getMessageScope():e,l=i(r.compileMessage)?r.compileMessage:!0;if(i(a)){var s=function(e){e._updateLayout(),e._updatePosition()};if(l)if(n(a._contentNode)(o),i(a._contentNode)&&a._contentNode.innerHTML.indexOf("ngInclude")>-1)var u=o.$on("$includeContentLoaded",function(){s(a),u()});else s(a)}},S=function(t,r){var a=angular.isFunction(r.getMessageScope)?r.getMessageScope():e,o=angular.isFunction(r.getLabelScope)?r.getLabelScope():a,l=i(r.compileMessage)?r.compileMessage:!0;d.LabelPlugin.isLoaded()&&i(r.label)&&(i(r.label.options)&&r.label.options.noHide===!0&&t.showLabel(),l&&i(t.label)&&n(t.label._container)(o))};return{resetMarkerGroup:k,resetMarkerGroups:A,deleteMarker:C,manageOpenPopup:x,manageOpenLabel:S,createMarker:function(e){if(!i(e)||!m.validateCoords(e))return void r.error(y+"The marker definition is not valid.");var t=m.getCoords(e);if(!i(t))return void r.error(y+"Unable to get coordinates from markerData.");var n={icon:w(e.icon),title:i(e.title)?e.title:"",draggable:i(e.draggable)?e.draggable:!1,clickable:i(e.clickable)?e.clickable:!0,riseOnHover:i(e.riseOnHover)?e.riseOnHover:!1,zIndexOffset:i(e.zIndexOffset)?e.zIndexOffset:0,iconAngle:i(e.iconAngle)?e.iconAngle:0};for(var a in e)e.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=e[a]);var o=new L.marker(t,n);return p(e.message)||o.unbindPopup(),o},addMarkerToGroup:function(e,t,n,a){return p(t)?l.isLoaded()?(i(h[t])||(h[t]=new L.MarkerClusterGroup(n),a.addLayer(h[t])),void h[t].addLayer(e)):void r.error(y+"The MarkerCluster plugin is not loaded."):void r.error(y+"The marker group you have specified is invalid.")},listenMarkerEvents:function(e,t,r){e.on("popupopen",function(){f(r,function(){t.focus=!0,x(e,t)})}),e.on("popupclose",function(){f(r,function(){t.focus=!1})}),e.on("add",function(){f(r,function(){"label"in t&&S(e,t)})})},addMarkerWatcher:function(e,t,n,a,l,s){var u=d.getObjectArrayPath("markers."+t);s=o(s,!0);var c=n.$watch(u,function(t,n){if(!i(t))return C(e,l,a),void c();if(i(n)){if(!m.validateCoords(t))return r.warn("There are problems with lat-lng data, please verify your marker model"),void C(e,l,a);var o=t===n;if(i(t.iconAngle)&&n.iconAngle!==t.iconAngle&&e.setIconAngle(t.iconAngle),p(t.layer)||p(n.layer)&&(i(a.overlays[n.layer])&&a.overlays[n.layer].hasLayer(e)&&(a.overlays[n.layer].removeLayer(e),e.closePopup()),l.hasLayer(e)||l.addLayer(e)),(g(t.opacity)||g(parseFloat(t.opacity)))&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),p(t.layer)&&n.layer!==t.layer){if(p(n.layer)&&i(a.overlays[n.layer])&&a.overlays[n.layer].hasLayer(e)&&a.overlays[n.layer].removeLayer(e),e.closePopup(),l.hasLayer(e)&&l.removeLayer(e),!i(a.overlays[t.layer]))return void r.error(y+"You must use a name of an existing layer");var s=a.overlays[t.layer];if(!(s instanceof L.LayerGroup||s instanceof L.FeatureGroup))return void r.error(y+'A marker can only be added to a layer of type "group" or "featureGroup"');s.addLayer(e),l.hasLayer(e)&&t.focus===!0&&x(e,t)}if(t.draggable!==!0&&n.draggable===!0&&i(e.dragging)&&e.dragging.disable(),t.draggable===!0&&n.draggable!==!0&&(e.dragging?e.dragging.enable():L.Handler.MarkerDrag&&(e.dragging=new L.Handler.MarkerDrag(e),e.options.draggable=!0,e.dragging.enable())),v(t.icon)||v(n.icon)&&(e.setIcon(w()),e.closePopup(),e.unbindPopup(),p(t.message)&&e.bindPopup(t.message,t.popupOptions)),v(t.icon)&&v(n.icon)&&!angular.equals(t.icon,n.icon)){var u=!1;e.dragging&&(u=e.dragging.enabled()),e.setIcon(w(t.icon)),u&&e.dragging.enable(),e.closePopup(),e.unbindPopup(),p(t.message)&&e.bindPopup(t.message,t.popupOptions)}!p(t.message)&&p(n.message)&&(e.closePopup(),e.unbindPopup()),d.LabelPlugin.isLoaded()&&(i(t.label)&&i(t.label.message)?"label"in n&&"message"in n.label&&!angular.equals(t.label.message,n.label.message)?e.updateLabelContent(t.label.message):angular.isFunction(e.getLabel)?S(e,t):(e.bindLabel(t.label.message,t.label.options),S(e,t)):(!("label"in t)||"message"in t.label)&&angular.isFunction(e.unbindLabel)&&e.unbindLabel()),p(t.message)&&!p(n.message)&&e.bindPopup(t.message,t.popupOptions),p(t.message)&&p(n.message)&&t.message!==n.message&&e.setPopupContent(t.message);var f=!1;t.focus!==!0&&n.focus===!0&&(e.closePopup(),f=!0),(t.focus===!0&&(!i(n.focus)||n.focus===!1)||o&&t.focus===!0)&&(x(e,t),f=!0),n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset);var h=e.getLatLng(),b=p(t.layer)&&d.MarkerClusterPlugin.is(a.overlays[t.layer]);b?f?(t.lat!==n.lat||t.lng!==n.lng)&&(a.overlays[t.layer].removeLayer(e),e.setLatLng([t.lat,t.lng]),a.overlays[t.layer].addLayer(e)):h.lat!==t.lat||h.lng!==t.lng?(a.overlays[t.layer].removeLayer(e),e.setLatLng([t.lat,t.lng]),a.overlays[t.layer].addLayer(e)):t.lat!==n.lat||t.lng!==n.lng?(a.overlays[t.layer].removeLayer(e),e.setLatLng([t.lat,t.lng]),a.overlays[t.layer].addLayer(e)):v(t.icon)&&v(n.icon)&&!angular.equals(t.icon,n.icon)&&(a.overlays[t.layer].removeLayer(e),a.overlays[t.layer].addLayer(e)):(h.lat!==t.lat||h.lng!==t.lng)&&e.setLatLng([t.lat,t.lng])}},s)},string:b,log:$}}]),angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","$log","leafletHelpers",function(e,t,r){function n(e){return e.filter(function(e){return c(e)}).map(function(e){return a(e)})}function a(e){return s(e)?new L.LatLng(e[0],e[1]):new L.LatLng(e.lat,e.lng)}function i(e){return e.map(function(e){return n(e)})}function o(e,t){for(var r={},n=0;n<f.length;n++){var a=f[n];l(e[a])?r[a]=e[a]:l(t.path[a])&&(r[a]=t.path[a])}return r}var l=r.isDefined,s=r.isArray,u=r.isNumber,c=r.isValidPoint,f=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],d=function(e,t){for(var r={},n=0;n<f.length;n++){var a=f[n];l(t[a])&&(r[a]=t[a])}e.setStyle(t)},p=function(e){if(!s(e))return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!c(r))return!1}return!0},g={polyline:{isValid:function(e){var t=e.latlngs;return p(t)},createPath:function(e){return new L.Polyline([],e)},setPath:function(e,t){e.setLatLngs(n(t.latlngs)),d(e,t)}},multiPolyline:{isValid:function(e){var t=e.latlngs;if(!s(t))return!1;for(var r in t){var n=t[r];if(!p(n))return!1}return!0},createPath:function(e){return new L.multiPolyline([[[0,0],[1,1]]],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),d(e,t)}},polygon:{isValid:function(e){var t=e.latlngs;return p(t)},createPath:function(e){return new L.Polygon([],e)},setPath:function(e,t){e.setLatLngs(n(t.latlngs)),d(e,t)}},multiPolygon:{isValid:function(e){var t=e.latlngs;if(!s(t))return!1;for(var r in t){var n=t[r];if(!p(n))return!1}return!0},createPath:function(e){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),d(e,t)}},rectangle:{isValid:function(e){var t=e.latlngs;if(!s(t)||2!==t.length)return!1;for(var r in t){var n=t[r];if(!c(n))return!1}return!0},createPath:function(e){return new L.Rectangle([[0,0],[1,1]],e)},setPath:function(e,t){e.setBounds(new L.LatLngBounds(n(t.latlngs))),d(e,t)}},circle:{isValid:function(e){var t=e.latlngs;return c(t)&&u(e.radius)},createPath:function(e){return new L.Circle([0,0],1,e)},setPath:function(e,t){e.setLatLng(a(t.latlngs)),l(t.radius)&&e.setRadius(t.radius),d(e,t)}},circleMarker:{isValid:function(e){var t=e.latlngs;return c(t)&&u(e.radius)},createPath:function(e){return new L.CircleMarker([0,0],e)},setPath:function(e,t){e.setLatLng(a(t.latlngs)),l(t.radius)&&e.setRadius(t.radius),d(e,t)}}},v=function(e){var t={};return e.latlngs&&(t.latlngs=e.latlngs),e.radius&&(t.radius=e.radius),t};return{setPathOptions:function(e,t,r){l(t)||(t="polyline"),g[t].setPath(e,r)},createPath:function(e,r,n){l(r.type)||(r.type="polyline");var a=o(r,n),i=v(r);return g[r.type].isValid(i)?g[r.type].createPath(a):void t.error("[AngularJS - Leaflet] Invalid data passed to the "+r.type+" path")}}}]),angular.module("leaflet-directive").service("leafletWatchHelpers",function(){var e=function(e,t,r,n,a){var i=e[t](r,function(e,t){a(e,t),n.doWatch||i()},n.isDeep);return i},t=function(t,r,n,a){return e(t,"$watch",r,n,a)},r=function(t,r,n,a){return e(t,"$watchCollection",r,n,a)};return{maybeWatch:t,maybeWatchCollection:r}}),angular.module("leaflet-directive").directive("bounds",["$log","$timeout","leafletHelpers","leafletBoundsHelpers",function(e,t,r,n){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","center"],link:function(a,i,o,l){var s=r.isDefined,u=n.createLeafletBounds,c=l[0].getLeafletScope(),f=l[0],d=function(e){return 0===e._southWest.lat&&0===e._southWest.lng&&0===e._northEast.lat&&0===e._northEast.lng};f.getMap().then(function(r){c.$on("boundsChanged",function(e){var t=e.currentScope,n=r.getBounds();if(!d(n)&&!t.settingBoundsFromScope){var a={northEast:{lat:n._northEast.lat,lng:n._northEast.lng},southWest:{lat:n._southWest.lat,lng:n._southWest.lng}};angular.equals(t.bounds,a)||(t.bounds=a)}}),c.$watch("bounds",function(n){if(!s(n))return void e.error("[AngularJS - Leaflet] Invalid bounds");var i=u(n);i&&!r.getBounds().equals(i)&&(a.settingBoundsFromScope=!0,r.fitBounds(i),t(function(){a.settingBoundsFromScope=!1}))},!0)})}}}]),angular.module("leaflet-directive").directive("center",["$log","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletEvents",function(e,t,r,n,a,i,o,l){var s,u=i.isDefined,c=i.isNumber,f=i.isSameCenterOnMap,d=i.safeApply,p=i.isValidCenter,g=o.isValidBounds,v=i.isUndefinedOrEmpty,h=function(e,t){return u(e)&&g(e)&&v(t)};return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){s=t.defer(),this.getCenter=function(){return s.promise}},link:function(t,i,g,v){var m=v.getLeafletScope(),y=m.center;v.getMap().then(function(i){var v=a.getDefaults(g.id);if(-1!==g.center.search("-"))return e.error('The "center" variable can\'t use a "-" on his key name: "'+g.center+'".'),void i.setView([v.center.lat,v.center.lng],v.center.zoom);if(h(m.bounds,y))i.fitBounds(o.createLeafletBounds(m.bounds)),y=i.getCenter(),d(m,function(e){e.center={lat:i.getCenter().lat,lng:i.getCenter().lng,zoom:i.getZoom(),autoDiscover:!1},angular.extend(e.center,{lat:i.getCenter().lat,lng:i.getCenter().lng,zoom:i.getZoom(),autoDiscover:!1})}),d(m,function(e){var t=i.getBounds();e.bounds={northEast:{lat:t._northEast.lat,lng:t._northEast.lng},southWest:{lat:t._southWest.lat,lng:t._southWest.lng}}});else{if(!u(y))return e.error('The "center" property is not defined in the main scope'),void i.setView([v.center.lat,v.center.lng],v.center.zoom);u(y.lat)&&u(y.lng)||u(y.autoDiscover)||angular.copy(v.center,y)}var b,$;if("yes"===g.urlHashCenter){var L=function(){var e,t=r.search();if(u(t.c)){var n=t.c.split(":");3===n.length&&(e={lat:parseFloat(n[0]),lng:parseFloat(n[1]),zoom:parseInt(n[2],10)})}return e};b=L(),m.$on("$locationChangeSuccess",function(e){var t=e.currentScope,r=L();u(r)&&!f(r,i)&&(t.center={lat:r.lat,lng:r.lng,zoom:r.zoom})})}m.$watch("center",function(t){return u(b)&&(angular.copy(b,t),b=void 0),p(t)||t.autoDiscover===!0?t.autoDiscover===!0?(c(t.zoom)||i.setView([v.center.lat,v.center.lng],v.center.zoom),void i.locate(c(t.zoom)&&t.zoom>v.center.zoom?{setView:!0,maxZoom:t.zoom}:u(v.maxZoom)?{setView:!0,maxZoom:v.maxZoom}:{setView:!0})):void($&&f(t,i)||(m.settingCenterFromScope=!0,i.setView([t.lat,t.lng],t.zoom),l.notifyCenterChangedToBounds(m,i),n(function(){m.settingCenterFromScope=!1}))):void e.warn("[AngularJS - Leaflet] invalid 'center'")},!0),i.whenReady(function(){$=!0}),i.on("moveend",function(){s.resolve(),l.notifyCenterUrlHashChanged(m,i,g,r.search()),f(y,i)||t.settingCenterFromScope||d(m,function(e){m.settingCenterFromScope||angular.extend(e.center,{lat:i.getCenter().lat,lng:i.getCenter().lng,zoom:i.getZoom(),autoDiscover:!1}),l.notifyCenterChangedToBounds(m,i)})}),y.autoDiscover===!0&&i.on("locationerror",function(){e.warn("[AngularJS - Leaflet] The Geolocation API is unauthorized on this page."),p(y)?(i.setView([y.lat,y.lng],y.zoom),l.notifyCenterChangedToBounds(m,i)):(i.setView([v.center.lat,v.center.lng],v.center.zoom),l.notifyCenterChangedToBounds(m,i))})})}}}]),angular.module("leaflet-directive").directive("controls",["$log","leafletHelpers",function(e,t){return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(r,n,a,i){if(i){var o=t.isDefined,l=i.getLeafletScope(),s=l.controls;i.getMap().then(function(r){if(o(L.Control.Draw)&&o(s.draw)){o(s.edit)||(s.edit={featureGroup:new L.FeatureGroup},r.addLayer(s.edit.featureGroup));var n=new L.Control.Draw(s);r.addControl(n)}if(o(s.scale)){var a=new L.control.scale(s.scale);r.addControl(a)}if(o(s.fullscreen))if(t.FullScreenControlPlugin.isLoaded()){var i=new L.Control.Fullscreen(s.fullscreen);r.addControl(i)}else e.error("[AngularJS - Leaflet] Fullscreen plugin is not loaded.");if(o(s.custom))for(var l in s.custom)r.addControl(s.custom[l])})}}}}]),angular.module("leaflet-directive").directive("decorations",["$log","leafletHelpers",function(e,t){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(r,n,a,i){function o(t){return c(t)&&c(t.coordinates)&&(u.isLoaded()||e.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(t.coordinates)}function l(e,t){return c(e)&&c(t)&&c(t.coordinates)&&c(t.patterns)?(e.setPaths(t.coordinates),e.setPatterns(t.patterns),e):void 0}var s=i.getLeafletScope(),u=t.PolylineDecoratorPlugin,c=t.isDefined,f={};i.getMap().then(function(e){s.$watch("decorations",function(t){for(var r in f)c(t[r])&&angular.equals(t[r],f)||(e.removeLayer(f[r]),delete f[r]);for(var n in t){var a=t[n],i=o(a);c(i)&&(f[n]=i,e.addLayer(i),l(i,a))}},!0)})}}}]),angular.module("leaflet-directive").directive("eventBroadcast",["$log","$rootScope","leafletHelpers","leafletEvents",function(e,t,r,n){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(t,a,i,o){var l=r.isObject,s=r.isDefined,u=o.getLeafletScope(),c=u.eventBroadcast,f=n.getAvailableMapEvents(),d=n.genDispatchMapEvent;o.getMap().then(function(t){var r,n,a=[],i="broadcast";if(s(c.map))if(l(c.map))if("emit"!==c.map.logic&&"broadcast"!==c.map.logic?e.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):i=c.map.logic,l(c.map.enable)&&c.map.enable.length>=0)for(r=0;r<c.map.enable.length;r++)n=c.map.enable[r],-1===a.indexOf(n)&&-1!==f.indexOf(n)&&a.push(n);else e.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.");else e.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model.");else a=f;for(r=0;r<a.length;r++)n=a[r],t.on(n,d(u,n,i),{eventName:n})})}}}]),angular.module("leaflet-directive").directive("geojson",["$log","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators",function(e,t,r,n,a,i,o){var l=a.maybeWatchCollection,s=n.watchOptions,u=i.extend,c=n,f=o;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,a,i,o){var d=n.safeApply,p=n.isDefined,g=o.getLeafletScope(),v={},h=!1;o.getMap().then(function(e){var a=g.geojsonWatchOptions||s,o=function(e){var r,a=e.resetStyleOnMouseout;return r=angular.isFunction(e.onEachFeature)?e.onEachFeature:function(r,i){n.LabelPlugin.isLoaded()&&p(e.label)&&i.bindLabel(r.properties.description),i.on({mouseover:function(e){d(g,function(){t.$broadcast("leafletDirectiveMap.geojsonMouseover",r,e)})},mouseout:function(e){a&&v.resetStyle(e.target),d(g,function(){t.$broadcast("leafletDirectiveMap.geojsonMouseout",e)})},click:function(e){d(g,function(){t.$broadcast("leafletDirectiveMap.geojsonClick",r,e)})}})}},m=c.isDefined(i.geojsonNested)&&c.isTruthy(i.geojsonNested),y=function(){if(v){var t=function(t){p(t)&&e.hasLayer(t)&&e.removeLayer(t)};return m?void f.each(v,function(e){t(e)}):void t(v)}},b=function(t,n){var a=angular.copy(t);if(p(a)&&p(a.data)){var l=o(a);p(a.options)||(a.options={style:a.style,filter:a.filter,onEachFeature:l,pointToLayer:a.pointToLayer});var s=L.geoJson(a.data,a.options);n&&c.isString(n)?v[n]=s:v=s,s.addTo(e),h||(h=!0,r.setGeoJSON(v,i.id))}},$=function(e){if(y(),m){if(!e||!Object.keys(e).length)return;return void f.each(e,function(e,t){b(e,t)})}b(e)};u(i.id,"geojson",$,y),l(g,"geojson",a,function(e){$(e)})})}}}]),angular.module("leaflet-directive").directive("layercontrol",["$log","leafletData","leafletHelpers",function(e,t,r){return{restrict:"E",scope:{},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(n,a,i){e.debug("[Angular Directive - Layers] layers",n,a);var o=r.safeApply,l=r.isDefined;angular.extend(n,{baselayer:"",icons:{uncheck:"fa fa-check-square-o",check:"fa fa-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up"},changeBaseLayer:function(e,a){r.safeApply(n,function(r){r.baselayer=e,t.getMap().then(function(a){t.getLayers().then(function(t){if(!a.hasLayer(t.baselayers[e])){for(var i in r.layers.baselayers)r.layers.baselayers[i].icon=r.icons.unradio,a.hasLayer(t.baselayers[i])&&a.removeLayer(t.baselayers[i]);a.addLayer(t.baselayers[e]),r.layers.baselayers[e].icon=n.icons.radio}})})}),a.preventDefault()},moveLayer:function(e,t,r){var a=Object.keys(n.layers.baselayers).length;if(t>=1+a&&t<=n.overlaysArray.length+a){var i;for(var l in n.layers.overlays)if(n.layers.overlays[l].index===t){i=n.layers.overlays[l];break}i&&o(n,function(){i.index=e.index,e.index=t})}r.stopPropagation(),r.preventDefault()},initIndex:function(e,t){var r=Object.keys(n.layers.baselayers).length;e.index=l(e.index)?e.index:t+r+1},toggleOpacity:function(t,r){if(e.debug("Event",t),r.visible){var a=angular.element(t.currentTarget);a.toggleClass(n.icons.close+" "+n.icons.open),a=a.parents(".lf-row").find(".lf-opacity"),a.toggle("fast",function(){o(n,function(){r.opacityControl=!r.opacityControl})})}t.stopPropagation(),t.preventDefault()},unsafeHTML:function(e){return i.trustAsHtml(e)}});var s=a.get(0);L.Browser.touch?L.DomEvent.on(s,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(s),L.DomEvent.on(s,"mousewheel",L.DomEvent.stopPropagation))}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><div class="lf-baselayers"><div class="lf-row" ng-repeat="(key, layer) in layers.baselayers"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label></div></div><div class="lf-overlays"><div class="lf-container"><div class="lf-row" ng-repeat="layer in overlaysArray | orderBy:\'index\':order" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"></i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"></i> <i class="lf-icon lf-open" ng-class="layer.opacityControl? icons.close:icons.open" ng-click="toggleOpacity($event, layer)"></i></div></label><div class="lf-legend" ng-if="layer.legend" ng-bind-html="unsafeHTML(layer.legend)"></div><div class="lf-opacity" ng-show="layer.visible &amp;&amp; layer.opacityControl"><input type="text" class="lf-opacity-control" name="lf-opacity-control" data-key="{{layer.index}}" /></div></div></div></div></div>',link:function(n,a,i,o){var l=r.isDefined,s=o.getLeafletScope(),u=s.layers;i.order=!l(i.order)||"normal"!==i.order&&"reverse"!==i.order?"normal":i.order,n.order="normal"===i.order,n.orderNumber="normal"===i.order?-1:1,n.layers=u,o.getMap().then(function(r){s.$watch("layers.baselayers",function(e){t.getLayers().then(function(t){var a;for(a in e)e[a].icon=r.hasLayer(t.baselayers[a])?n.icons.radio:n.icons.unradio})}),s.$watch("layers.overlays",function(i){var o=[];t.getLayers().then(function(e){for(var t in i)i[t].icon=n.icons[i[t].visible?"uncheck":"check"],o.push(i[t]),l(i[t].index)&&e.overlays[t].setZIndex&&e.overlays[t].setZIndex(i[t].index)});var s=n.$watch(function(){return a.children().size()>1?(a.find(".lf-overlays").trigger("resize"),a.find(".lf-opacity").size()===Object.keys(u.overlays).length):void 0},function(i){i===!0&&(l(a.find(".lf-opacity-control").ionRangeSlider)?a.find(".lf-opacity-control").each(function(e,a){var i,o=Object.keys(u.baselayers).length;for(var s in n.overlaysArray)n.overlaysArray[s].index===e+o+1&&(i=n.overlaysArray[s]);var c=angular.element(a),f=l(i)&&l(i.layerOptions)?i.layerOptions.opacity:void 0;c.ionRangeSlider({min:0,from:l(f)?Math.ceil(100*f):100,step:1,max:100,prettify:!1,hasGrid:!1,hideMinMax:!0,onChange:function(e){t.getLayers().then(function(t){var n,a,i=e.input.data().key;for(var o in u.overlays)if(u.overlays[o].index===i){n=t.overlays[o],a=u.overlays[o];break}r.hasLayer(n)&&(a.layerOptions=l(a.layerOptions)?a.layerOptions:{},a.layerOptions.opacity=e.input.val()/100,n.setOpacity&&n.setOpacity(e.input.val()/100),n.getLayers&&n.eachLayer&&n.eachLayer(function(t){t.setOpacity&&t.setOpacity(e.input.val()/100)}))})}})}):e.warn("[AngularJS - Leaflet] Ion Slide Range Plugin is not loaded"),s())});n.overlaysArray=o},!0)})}}}]),angular.module("leaflet-directive").directive("layers",["$log","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(e,t,r,n,a,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(e){e._leafletLayers=t.defer(),this.getLayers=function(){return e._leafletLayers.promise}}],link:function(e,t,o,l){var s=n.isDefined,u={},c=l.getLeafletScope(),f=c.layers,d=a.createLayer,p=i.updateLayersControl,g=!1;l.getMap().then(function(t){e._leafletLayers.resolve(u),r.setLayers(u,o.id),u.baselayers={},u.overlays={};var n=o.id,a=!1;for(var i in f.baselayers){var l=d(f.baselayers[i]);s(l)?(u.baselayers[i]=l,f.baselayers[i].top===!0&&(t.addLayer(u.baselayers[i]),a=!0)):delete f.baselayers[i]}!a&&Object.keys(u.baselayers).length>0&&t.addLayer(u.baselayers[Object.keys(f.baselayers)[0]]);for(i in f.overlays){"cartodb"===f.overlays[i].type;var v=d(f.overlays[i]);s(v)?(u.overlays[i]=v,f.overlays[i].visible===!0&&t.addLayer(u.overlays[i])):delete f.overlays[i]}c.$watch("layers.baselayers",function(e){for(var r in u.baselayers)s(e[r])||(t.hasLayer(u.baselayers[r])&&t.removeLayer(u.baselayers[r]),delete u.baselayers[r]);for(var a in e)if(s(u.baselayers[a]))e[a].top!==!0||t.hasLayer(u.baselayers[a])?e[a].top===!1&&t.hasLayer(u.baselayers[a])&&t.removeLayer(u.baselayers[a]):t.addLayer(u.baselayers[a]);else{var i=d(e[a]);s(i)&&(u.baselayers[a]=i,e[a].top===!0&&t.addLayer(u.baselayers[a]))}var o=!1;for(var l in u.baselayers)if(t.hasLayer(u.baselayers[l])){o=!0;break}!o&&Object.keys(u.baselayers).length>0&&t.addLayer(u.baselayers[Object.keys(u.baselayers)[0]]),g=p(t,n,g,e,f.overlays,u)},!0),c.$watch("layers.overlays",function(e){for(var r in u.overlays)s(e[r])||(t.hasLayer(u.overlays[r])&&t.removeLayer(u.overlays[r]),delete u.overlays[r]);for(var a in e){if(!s(u.overlays[a])){var i=d(e[a]);if(!s(i))continue;u.overlays[a]=i,e[a].visible===!0&&t.addLayer(u.overlays[a])}e[a].visible&&!t.hasLayer(u.overlays[a])?t.addLayer(u.overlays[a]):e[a].visible===!1&&t.hasLayer(u.overlays[a])&&t.removeLayer(u.overlays[a]),e[a].visible&&t._loaded&&e[a].data&&"heatmap"===e[a].type&&(u.overlays[a].setData(e[a].data),u.overlays[a].update())}g=p(t,n,g,f.baselayers,e,u)},!0)})}}}]),angular.module("leaflet-directive").directive("legend",["$log","$http","leafletHelpers","leafletLegendHelpers",function(e,t,r,n){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(a,i,o,l){var s,u,c,f,d=r.isArray,p=r.isDefined,g=r.isFunction,v=l.getLeafletScope(),h=v.legend;v.$watch("legend",function(e){p(e)&&(s=e.legendClass?e.legendClass:"legend",u=e.position||"bottomright",f=e.type||"arcgis")},!0),l.getMap().then(function(r){v.$watch("legend",function(t){return p(t)?p(t.url)||"arcgis"!==f||d(t.colors)&&d(t.labels)&&t.colors.length===t.labels.length?p(t.url)?void e.info("[AngularJS - Leaflet] loading legend service."):(p(c)&&(c.removeFrom(r),c=null),c=L.control({position:u}),"arcgis"===f&&(c.onAdd=n.getOnAddArrayLegend(t,s)),void c.addTo(r)):void e.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set."):void(p(c)&&(c.removeFrom(r),c=null))}),v.$watch("legend.url",function(a){p(a)&&t.get(a).success(function(e){p(c)?n.updateLegend(c.getContainer(),e,f,a):(c=L.control({position:u}),c.onAdd=n.getOnAddLegend(e,s,f,a),c.addTo(r)),p(h.loadedData)&&g(h.loadedData)&&h.loadedData()}).error(function(){e.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]),angular.module("leaflet-directive").directive("markers",["$log","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(e,t,r,n,a,i,o,l,s,u,c){var f=a.isDefined,d=a.errorHeader,p=a,g=a.isString,v=o.addMarkerWatcher,h=o.listenMarkerEvents,m=o.addMarkerToGroup,y=l.bindMarkerEvents,b=o.createMarker,$=o.deleteMarker,w=s,k=a.watchOptions,A=u.maybeWatch,C=c.extend,x=function(t,r,n,a,i,l){if(!g(t))return e.error(d+" A layername must be a string"),!1;if(!f(r))return e.error(d+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!f(r.overlays)||!f(r.overlays[t]))return e.error(d+' A marker can only be added to a layer of type "group"'),!1;var s=r.overlays[t];return s instanceof L.LayerGroup||s instanceof L.FeatureGroup?(s.addLayer(a),!i&&l.hasLayer(a)&&n.focus===!0&&o.manageOpenPopup(a,n),!0):(e.error(d+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},S=function(t,r,n,a,i,l,s){for(var u in t)if(-1===u.search("-")){if(!f(a[u])){var c=p.copy(t[u]),g=b(c),$=(c?c.layer:void 0)||s;if(!f(g)){e.error(d+" Received invalid data on the marker "+u+".");continue}if(a[u]=g,f(c.message)&&g.bindPopup(c.message,c.popupOptions),f(c.group)){var L=f(c.groupOption)?c.groupOption:null;m(g,c.group,L,r)}if(p.LabelPlugin.isLoaded()&&f(c.label)&&f(c.label.message)&&g.bindLabel(c.label.message,c.label.options),f(c)&&(f(c.layer)||f(s))){var w=x($,n,c,g,l.individual.doWatch,r);if(!w)continue}else f(c.group)||(r.addLayer(g),l.individual.doWatch||c.focus!==!0||o.manageOpenPopup(g,c));var k=p.getObjectDotPath(s?[s,u]:[u]);l.individual.doWatch&&v(g,k,i,n,r,l.individual.doWatch),h(g,c,i,l.individual.doWatch),y(g,k,c,i,$)}}else e.error('The marker can\'t use a "-" on his key name: "'+u+'".')},D=function(t,r,n,a,i){var o=!1,l=!1,s=f(r);for(var u in n)o||(e.debug(d+"[markers] destroy: "),o=!0),s&&(l=!angular.equals(t[u],r[u])),f(t)&&Object.keys(t).length&&f(t[u])&&Object.keys(t[u]).length&&!l||($(n[u],a,i),delete n[u])};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,t,a,i){var o=i[0],l=o.getLeafletScope();o.getMap().then(function(e){var t,o={};t=f(i[1])?i[1].getLayers:function(){var e=r.defer();return e.resolve(),e.promise};var s=l.markersWatchOptions||k;f(a.watchMarkers)&&(s.doWatch=s.individual.doWatch=!f(a.watchMarkers)||p.isTruthy(a.watchMarkers));var u=f(a.markersNested)&&p.isTruthy(a.markersNested);

t().then(function(t){var r=function(r,n){D(r,n,o,e,t)},i=function(n,a){return r(n,a),u?void w.each(n,function(r,n){S(r,e,t,o,l,s,n)}):void S(n,e,t,o,l,s)};C(a.id,"markers",i,r),n.setMarkers(o,a.id),A(l,"markers",s,function(e,t){i(e,t)})})})}}}]),angular.module("leaflet-directive").directive("maxbounds",["$log","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(e,t,r,n){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,a,i){var o=i.getLeafletScope(),l=r.isValidBounds,s=n.isNumber;i.getMap().then(function(e){o.$watch("maxbounds",function(t){if(!l(t))return void e.setMaxBounds();var n=r.createLeafletBounds(t);s(t.pad)&&(n=n.pad(t.pad)),e.setMaxBounds(n),a.center||e.fitBounds(n)})})}}}]),angular.module("leaflet-directive").directive("paths",["$log","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletEvents",function(e,t,r,n,a,i,o){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(l,s,u,c){var f=c[0],d=a.isDefined,p=a.isString,g=f.getLeafletScope(),v=g.paths,h=i.createPath,m=o.bindPathEvents,y=i.setPathOptions;f.getMap().then(function(i){var o,l=n.getDefaults(u.id);o=d(c[1])?c[1].getLayers:function(){var e=t.defer();return e.resolve(),e.promise},d(v)&&o().then(function(t){var n={};r.setPaths(n,u.id);var o=!d(u.watchPaths)||"true"===u.watchPaths,s=function(e,r){var n=g.$watch('paths["'+r+'"]',function(r,a){if(!d(r)){if(d(a.layer))for(var o in t.overlays){var l=t.overlays[o];l.removeLayer(e)}return i.removeLayer(e),void n()}y(e,r.type,r)},!0)};g.$watchCollection("paths",function(r){for(var u in n)d(r[u])||(i.removeLayer(n[u]),delete n[u]);for(var c in r)if(0!==c.search("\\$"))if(-1===c.search("-")){if(!d(n[c])){var f=r[c],v=h(c,r[c],l);if(d(v)&&d(f.message)&&v.bindPopup(f.message),a.LabelPlugin.isLoaded()&&d(f.label)&&d(f.label.message)&&v.bindLabel(f.label.message,f.label.options),d(f)&&d(f.layer)){if(!p(f.layer)){e.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!d(t)){e.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!d(t.overlays)||!d(t.overlays[f.layer])){e.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');continue}var b=t.overlays[f.layer];if(!(b instanceof L.LayerGroup||b instanceof L.FeatureGroup)){e.error('[AngularJS - Leaflet] Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"');continue}n[c]=v,b.addLayer(v),o?s(v,c):y(v,f.type,f)}else d(v)&&(n[c]=v,i.addLayer(v),o?s(v,c):y(v,f.type,f));m(v,c,f,g)}}else e.error('[AngularJS - Leaflet] The path name "'+c+'" is not valid. It must not include "-" and a number.')})})})}}}]),angular.module("leaflet-directive").directive("tiles",["$log","leafletData","leafletMapDefaults","leafletHelpers",function(e,t,r,n){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(a,i,o,l){var s=n.isDefined,u=l.getLeafletScope(),c=u.tiles;return s(c)||s(c.url)?void l.getMap().then(function(e){var n,a=r.getDefaults(o.id);u.$watch("tiles",function(r){var i=a.tileLayerOptions,l=a.tileLayer;return!s(r.url)&&s(n)?void e.removeLayer(n):s(n)?s(r.url)&&s(r.options)&&!angular.equals(r.options,i)?(e.removeLayer(n),i=a.tileLayerOptions,angular.copy(r.options,i),l=r.url,n=L.tileLayer(l,i),n.addTo(e),void t.setTiles(n,o.id)):void(s(r.url)&&n.setUrl(r.url)):(s(r.options)&&angular.copy(r.options,i),s(r.url)&&(l=r.url),n=L.tileLayer(l,i),n.addTo(e),void t.setTiles(n,o.id))},!0)}):void e.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),["markers","geojson"].forEach(function(e){angular.module("leaflet-directive").directive(e+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(t,r,n,a,i){var o=i.isDefined,l=i.errorHeader,s=i.isObject,u=i.watchOptions;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(r,n,a,i){var c=i[0],f=c.getLeafletScope();c.getMap().then(function(){o(r[e+"WatchOptions"])&&(s(r[e+"WatchOptions"])?angular.extend(u,r[e+"WatchOptions"]):t.error(l+"["+e+"WatchOptions] is not an object"),f[e+"WatchOptions"]=u)})}}}])}),angular.module("leaflet-directive").factory("leafletEventsHelpers",["$rootScope","$q","$log","leafletHelpers",function(e,t,r,n){var a=n.safeApply,i=n.isDefined,o=function(t,r,n,o,l,s,u,c){a(t,function(){var a={leafletEvent:o,leafletObject:l,modelName:u,model:s};i(c)&&angular.extend(a,{layerName:c}),"emit"===n?t.$emit(r,a):e.$broadcast(r,a)})};return{fire:o}}]),angular.module("leaflet-directive").factory("leafletLabelEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpers",function(e,t,r,n,a){var i=n,o=a.fire,l=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},s=function(e,t,r,n,a,i,l){return function(a){var s="leafletDirectiveLabel."+e,u=scope_watch_name.replace("markers.","");o(r,s,t,a,n,i,u,l)}},u=function(e,t,r,n,a,o,u){for(var c=l(),f=i.getObjectArrayPath("markers."+a),d=0;d<c.length;d++){var e=c[d];n.label.on(e,s(e,t,r,n.label,f,o,u))}};return{getAvailableLabelEvents:l,genDispatchLabelEvent:s,genLabelEvents:u}}]),angular.module("leaflet-directive").factory("leafletMapEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpers",function(e,t,r,n,a){var i=(n.safeApply,n.isDefined),o=(n.isObject,n.errorHeader,a.fire),l=function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},s=function(e,t,r){return function(n){var a="leafletDirectiveMap."+t;o(e,a,r,n,n.target,e)}},u=function(e){e.$broadcast("boundsChanged")},c=function(e,t,r,n){if(i(r.urlHashCenter)){var a=t.getCenter(),o=a.lat.toFixed(4)+":"+a.lng.toFixed(4)+":"+t.getZoom();i(n.c)&&n.c===o||e.$emit("centerUrlHash",o)}};return{getAvailableMapEvents:l,genDispatchMapEvent:s,notifyCenterChangedToBounds:u,notifyCenterUrlHashChanged:c}}]),angular.module("leaflet-directive").factory("leafletMarkerEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpers","leafletLabelEvents",function(e,t,r,n,a,i){var o=n.safeApply,l=n.isDefined,s=n.isObject,u=n,c=n.errorHeader,f=a.fire,d=i,p=function(t,r,n,a,i,l,s){return function(u){var c="leafletDirectiveMarker."+t;"click"===t?o(n,function(){e.$broadcast("leafletDirectiveMarkersClick",i)}):"dragend"===t&&(o(n,function(){l.lat=a.getLatLng().lat,l.lng=a.getLatLng().lng}),l.message&&l.focus===!0&&a.openPopup()),f(n,c,r,u,u.target||a,l,i,s)}},g=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose"]};return{getAvailableMarkerEvents:g,bindMarkerEvents:function(e,t,n,a,i){var o,f,v=[],h="emit";if(l(a.eventBroadcast))if(s(a.eventBroadcast))if(l(a.eventBroadcast.marker))if(s(a.eventBroadcast.marker)){void 0!==a.eventBroadcast.marker.logic&&null!==a.eventBroadcast.marker.logic&&("emit"!==a.eventBroadcast.marker.logic&&"broadcast"!==a.eventBroadcast.marker.logic?r.warn(c+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===a.eventBroadcast.marker.logic&&(h="emit"));var m=!1,y=!1;if(void 0!==a.eventBroadcast.marker.enable&&null!==a.eventBroadcast.marker.enable&&"object"==typeof a.eventBroadcast.marker.enable&&(m=!0),void 0!==a.eventBroadcast.marker.disable&&null!==a.eventBroadcast.marker.disable&&"object"==typeof a.eventBroadcast.marker.disable&&(y=!0),m&&y)r.warn(c+"can not enable and disable events at the same time");else if(m||y)if(m)for(o=0;o<a.eventBroadcast.marker.enable.length;o++)f=a.eventBroadcast.marker.enable[o],-1!==v.indexOf(f)?r.warn(c+"This event "+f+" is already enabled"):-1===g().indexOf(f)?r.warn(c+"This event "+f+" does not exist"):v.push(f);else for(v=g(),o=0;o<a.eventBroadcast.marker.disable.length;o++){f=a.eventBroadcast.marker.disable[o];var b=v.indexOf(f);-1===b?r.warn(c+"This event "+f+" does not exist or has been already disabled"):v.splice(b,1)}else r.warn(c+"must enable or disable events")}else r.warn(c+"event-broadcast.marker must be an object check your model.");else v=g();else r.error(c+"event-broadcast must be an object check your model.");else v=g();for(o=0;o<v.length;o++)f=v[o],e.on(f,p(f,h,a,e,t,n,i));u.LabelPlugin.isLoaded()&&l(e.label)&&d.genLabelEvents(t,h,a,e,n,i)}}}]),angular.module("leaflet-directive").factory("leafletPathEvents",["$rootScope","$q","$log","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(e,t,r,n,a,i){var o=(n.safeApply,n.isDefined),l=n.isObject,s=n,u=n.errorHeader,c=a,f=i.fire,d=function(e,t,r,n,a,i,o){return function(l){var s="leafletDirectivePath."+e;f(r,s,t,l,l.target||n,i,a,o)}},p=function(e,t,n,a){var i,f,p=[],v="broadcast";if(o(a.eventBroadcast))if(l(a.eventBroadcast))if(o(a.eventBroadcast.path))if(l(a.eventBroadcast.paths))r.warn(u+"event-broadcast.path must be an object check your model.");else{void 0!==a.eventBroadcast.path.logic&&null!==a.eventBroadcast.path.logic&&("emit"!==a.eventBroadcast.path.logic&&"broadcast"!==a.eventBroadcast.path.logic?r.warn(u+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===a.eventBroadcast.path.logic&&(v="emit"));var h=!1,m=!1;if(void 0!==a.eventBroadcast.path.enable&&null!==a.eventBroadcast.path.enable&&"object"==typeof a.eventBroadcast.path.enable&&(h=!0),void 0!==a.eventBroadcast.path.disable&&null!==a.eventBroadcast.path.disable&&"object"==typeof a.eventBroadcast.path.disable&&(m=!0),h&&m)r.warn(u+"can not enable and disable events at the same time");else if(h||m)if(h)for(i=0;i<a.eventBroadcast.path.enable.length;i++)f=a.eventBroadcast.path.enable[i],-1!==p.indexOf(f)?r.warn(u+"This event "+f+" is already enabled"):-1===g().indexOf(f)?r.warn(u+"This event "+f+" does not exist"):p.push(f);else for(p=g(),i=0;i<a.eventBroadcast.path.disable.length;i++){f=a.eventBroadcast.path.disable[i];var y=p.indexOf(f);-1===y?r.warn(u+"This event "+f+" does not exist or has been already disabled"):p.splice(y,1)}else r.warn(u+"must enable or disable events")}else p=g();else r.error(u+"event-broadcast must be an object check your model.");else p=g();for(i=0;i<p.length;i++)f=p[i],e.on(f,d(f,v,a,p,t));s.LabelPlugin.isLoaded()&&o(e.label)&&c.genLabelEvents(a,v,e,t)},g=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:g,bindPathEvents:p}}])}(angular);